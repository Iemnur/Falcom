from Falcom.ED83.Parser.scena_writer_helper import *

def funcCallBack(name: str, f: Callable):
    match name:
        case 'AniBtlStart': return AniBtlStart
        case 'AniBtlMove': return AniBtlMove
        case 'AniBtlAttack': return AniBtlAttack
        case 'AniBtlSCraft00': return AniBtlSCraft00
        # case 'AniBtlAria': return AniBtlAria
        # case '_AniBtlAria': return _AniBtlAria
        # case 'AniBtlArts': return AniBtlArts
        # case '_AniBtlArts': return _AniBtlArts
        case _: pass

    pass

def opcodeCallBack(opcode: int, *args):
    match opcode:
        case 0x02:      # Call
            if args[0] == ScriptId.BtlCom and args[1] == 'AniBtlMove':
                AniBtlMove2()
                return True

def runCallBack(g):
    from Falcom.ED83.Parser.scena_writer import _gScena as scena
    for f in [
        AniBtlCraft05_暴雨疾风枪,
        AniBtlCraftDamageAnimeX,
        AniBtlCraftDamageX,
        AniBtlCraftDamageXKnockBack,
        AniBtlPlayLanceEffects,
        AniBtlItem,
    ]:
        scena.Code(f.__name__.split('_', maxsplit = 1)[0])(f)

def _init():
    from Falcom.ED83.Parser.scena_writer import _gScena as scena
    scena.registerFuncCallback(funcCallBack)
    scena.registerOpCodeCallback(opcodeCallBack)
    scena.registerRunCallback(runCallBack)

_init()

def AniBtlMove2():
    PlayChrAnimeClip(0xFFFE, 'BTL_MOVE', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1, -1, -1, 0x00, 0x00)
    OP_33(0x34)
    Call(ScriptId.CurrentCharacter, 'AniBtlWait')

def AniBtlCraft05_暴雨疾风枪():
    end = genLabel()

    Call(ScriptId.BtlCom, 'AniBtlCraftBegin')

    LoadEffect(0xFFFE, 0x90, 'battle/cr000_02_1.eff')
    # LoadEffect(0xFFFE, 0x91, 'battle/cr000_02_5.eff')
    LoadEffect(0xFFFE, 0x92, 'battle/cr033_00_0.eff')
    LoadEffect(0xFFFE, 0x95, 'battle/sc033_00_5.eff')
    LoadEffect(0xFFFE, 0x96, 'battle/sc033_00_6.eff')
    LoadEffect(0xFFFE, 0x9F, 'battle/cic033_0.eff')

    Call(ScriptId.Current, 'SpringOff')
    SetEndhookFunction('SpringOn', ScriptId.Current)

    # Call(ScriptId.Current, 'AniAttachEQU442')
    # # Call(ScriptId.Current, 'AniEv86000')
    # # Call(ScriptId.Current, 'AniEv86000b')
    # PlayChrAnimeClip(0xFFFE, 'ev86000a', 0x00, 0x00, 0x01, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    # Sleep(1000)
    # PlayChrAnimeClip(0xFFFE, 'ev86000', 0x00, 0x01, 0x01, 0x00, 0x00, -2.0, -0.0333333, -0.0333333, 0.566667, 0x00, 0x00)
    # Sleep(1000)
    # PlayChrAnimeClip(0xFFFE, 'ev86000', 0x00, 0x00, 0x01, 0x00, 0x00, -2.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    # Sleep(1000)

    # Return()
    # return

    ChrTurnDirection(0xFFFE, 0xFFFB, 0.0, -1.0)
    ChrSavePosition(0xFFFE, 0x00000000)
    ChrCreateDummy(0xFFFE, 1)
    ChrSetPhysicsFlags(DummyCharBaseId, 0x40 | 0x20)
    ChrTurnDirection(DummyCharBaseId, 0xFFFE, 0.0, -1.0)
    # ChrSetPosByTarget(DummyCharBaseId, 0xFFF5, 0.0, 0.0, -2.0, -1.0, 0x00, 0x00)
    ChrSetPosByTarget(DummyCharBaseId, 0xFFFB, 0.0, 0.0, -2.0, -1.0, 0x00, 0x00)

    BattleCtrl(0x47)
    CameraCtrl(0x00)
    CameraSetPosByTarget(0xFFFE, '', 0.0, 0.95, -0.22, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, 6.0, 0, 0, 0, 0x01)
    CameraSetDistance(2.1, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetPosByTarget(0xFFFE, '', 0.0, 0.75, -0.1, 1000)
    CameraRotateByTarget(0xFFFE, '', 0x03, 6.0, -15.0, 0.0, 1000, 0x01)
    CameraSetDistance(3.5, 1000)

    PlayEffect2(0xFFFE, 0x9F, 0xFFFF, 0, '', *(0.5, 0.0, 0.0), *(0.0, 0.0, 0.0), *(0.8, 0.8, 0.8), 0xFF)
    PlaySE(0x8B7D)
    # Sleep(1666)
    Sleep(800)

    PlayVoice(0x1B8C)
    # PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_00', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 66.6667, 67.2, -1.0, 0x00, 0x00)
    Sleep(500)

    Fade(0x65, 100, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrSetPhysicsFlags(0xFFF9, 64)
    ChrSetPhysicsFlags(0xFFF9, 32)

    # PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_00', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    # PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 66.6667, 67.2, -1.0, 0x00, 0x00)
    ChrClearPhysicsFlags(0xFFF9, 64)
    ChrClearPhysicsFlags(0xFFF9, 32)
    CameraCtrl(0x00)
    CameraSetDistance(3.2, 0)
    Sleep(64)

    def left():
        CameraSetPosByTarget(0xFFFE, '', 1.5, 2.2, -1.5, 0)
        CameraRotateByTarget(0xFFFE, '', 0x03, 22.0, 135.0, 0.0, 0, 0x01)
        PlayEffect2(0xFFFE, 0x92, 0xFFFE, 0x0000000C, '', *(0.0, 0.0, 0.0), 0.0, 0.0, 0.0, *(1.0, 1.0, 1.0), 0xFF)
        SetChrFace(0x03, 0xFFFE, '2', '2[autoM2]', '0', '2', '0')
        Sleep(1000)
        CameraSetPosByTarget(DummyCharBaseId, '', 2.5, 2.2, -2.8, 700)

        CameraCtrl(0x16, 0x03, 3.2, 700)
        CameraSetDistance(3.2, 700)

        PlayEffect2(0xFFFE, 0x95, 0xFFFE, 0x00000003, '', *(0.0, 0.0, 0.0), 0.0, 0.0, 0.0, *(0.5, 0.5, 0.5), 0xFF)
        PlayEffect2(0xFFFE, 0x96, 0xFFFE, 0x00000003, '', *(0.0, 1.0, 0.0), 0.0, 0.0, 0.0, *(0.5, 0.5, 0.5), 0x01)
        PlaySE(0xFB1)
        PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 66.6667, 67.2, -1.0, 0x00, 0x00)
        ChrSetPosByTarget(0xFFFE, 0xFFF5, 0.0, 0.0, -2.0, 7.0, 0x00, 0x00)
        ChrSetPosByTarget(DummyCharBaseId, 0xFFF5, 0.0, 0.0, -2.0, -1.0, 0x00, 0x00)
        CameraSetPosByTarget(0xFFFE, '', 2.5, 2.2, -2.8, 700)

    def right():
        CameraSetPosByTarget(0xFFFE, '', -3.5, 2.2, -2.2, 0)
        CameraRotateByTarget(0xFFFE, '', 0x03, 22.0, 235, 0.0, 0, 0x01)
        PlayEffect2(0xFFFE, 0x92, 0xFFFE, 0x0000000C, '', *(0.0, 0.0, 0.0), 0.0, 0.0, 0.0, *(1.0, 1.0, 1.0), 0xFF)
        SetChrFace(0x03, 0xFFFE, '2', '2[autoM2]', '0', '2', '0')
        Sleep(1000)
        CameraSetPosByTarget(DummyCharBaseId, '', -3.5, 1.5, -0.8, 700)

        CameraCtrl(0x16, 0x03, 3.2, 700)
        CameraSetDistance(3.2, 700)

        PlayEffect2(0xFFFE, 0x95, 0xFFFE, 0x00000003, '', *(0.0, 0.0, 0.0), 0.0, 0.0, 0.0, *(0.5, 0.5, 0.5), 0xFF)
        PlayEffect2(0xFFFE, 0x96, 0xFFFE, 0x00000003, '', *(0.0, 1.0, 0.0), 0.0, 0.0, 0.0, *(0.5, 0.5, 0.5), 0x01)
        PlaySE(0xFB1)
        PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 66.6667, 67.2, -1.0, 0x00, 0x00)
        ChrSetPosByTarget(0xFFFE, 0xFFF5, 0.0, 0.0, -2.0, 7.0, 0x00, 0x00)
        ChrSetPosByTarget(DummyCharBaseId, 0xFFF5, 0.0, 0.0, -2.0, -1.0, 0x00, 0x00)
        CameraSetPosByTarget(0xFFFE, '', -3.5, 2.2, -2.2, 700)

    RandIf(50, left, right)

    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x01, 0x01, 0x00, 0x01, 0x00, 0.2, 67.2333, 67.4333, -0.0333333, 0x00, 0x00)
    Sleep(100)
    StopEffect(0xFFFE, 0x01, 0)

    ChrCreateAfterImage(0xFFFE)
    ChrSetAfterImageOn(0xFFFE, 0.1, 0.1, 0.22, 0.45, 1.0)

    for i in range(5):
        CreateThread(0xFFFE, 1, ScriptId.Current, 'AniBtlPlayLanceEffects')

        match i:
            case 0 | 2 | 4:
                CreateThread(0xFFFE, 2, ScriptId.Current, 'AniBtlCraftDamageX')
                WaitForThreadExit(0xFFFE, 2)

            case 1 | 3:
                CreateThread(0xFFFE, 2, ScriptId.Current, 'AniBtlCraftDamageAnimeX')
                WaitForThreadExit(0xFFFE, 2)

        WaitForThreadExit(0xFFFE, 1)
        Sleep(100)

    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.05, 68.9333, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 0.5)
    Sleep(800)

    PlayEffect2(0xFFFE, 0x90, 0xFFFE, 0x00000003, '', *(0.0, 1.0, 0.0), 0.0, 180, 0.0, *(1.0, 1.0, 1.0), 0xFF)
    PlaySE(0xFB1)
    ChrSetPosByTarget(0xFFFE, 0xFFF4, 0.0, 0.0, 0.0, 3.0, 0x00, 0x00)
    Sleep(300)

    CreateThread(0xFFFE, 0x02, ScriptId.Current, 'AniBtlCraftDamageXKnockBack')
    WaitForThreadExit(0xFFFE, 0x02)
    Sleep(1000)

    label(end)

    ChrSetAfterImageOff()

    PlayChrAnimeClip(0xFFFE, 'BTL_WAIT', 0x01, 0x00, 0x00, 0x00, 0x00, 0.5, -1.0, -1.0, -1.0, 0x00, 0x00)
    Call(ScriptId.BtlCom, 'AniBtlCraftFinish')

    Return()

def AniBtlPlayLanceEffects():
    effs = [
        ((1.5, 1.5, 0.0),   0xFF),
        ((-1.5, 1.5, 0.0),  0xFF),
        ((1.5, 0, 0.0),     0xFF),
        ((-1.5, 0, 0.0),    0xFF),
        ((0.0, 1.5, 0.0),   0xFF),
        ((0.0, 0.0, 0.0),   0xFF),
    ]

    for eff in effs:
        OP_3B(0x00, (0xFF, 0x8F62, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, -1.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
        OP_3B(0x00, (0xFF, 0x8F66, 0x0), 0.5, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
        PlayEffect2(
            CraftTarget.Self,
            0x83,
            CraftTarget.Self,
            0xC,
            '',
            *eff[0],
            0.0, 0.0, 0.0,
            0.5, 0.5, 0.8,
            eff[1],
        )
        Sleep(70)

    Return()

def AniBtlCraftDamageAnimeX():
    AniBtlCraftDamageT(False, 0)

def AniBtlCraftDamageX():
    AniBtlCraftDamageT(True, 0)

def AniBtlCraftDamageXKnockBack():
    AniBtlCraftDamageT(True, 5)

def AniBtlCraftDamageT(damage: bool, knockBack: float):
    def cb():
        status = AbnormalCondition.Deathblow | AbnormalCondition.Burn
        ChrSetAbnormalCondition(0xFFFB, status, 0x000000FF, 0x000000FF, 0x00)
        # SetChrPos(0xFFFB, 0.0, -100.0, 0.0, 0.0)
        # ChrPhysicsCtrl(0x00, 0xFFFB, 0xFFFFFFFF)

    # ForEachTarget(cb)

    BattleInitHit(0xFFFE)

    def cb():
        if damage:
            BattleDamage(0xFFFB, 0xFFFE, 100)
        BattleDamageAnime2(0xFFFB, knockBack, 0.5, 0x01)

    ForEachTarget(cb)

    Return()

def AniBtlStart():
    OP_3B(0x39, 0xFFFE)
    # CreateThread(0xFFFF, 3, ScriptId.Current, 'AniBtlUndead')
    Return()

def AniBtlMove():
    LoadEffect(0xFFFE, 0x90, 'battle/cr000_02_1.eff')
    LoadEffect(0xFFFE, 0x94, 'battle/cr000_02_5.eff')

    Call(0x0B, 'SpringOff')
    SetEndhookFunction('SpringOn', 0x0B)

    CameraCtrl(0x00)
    ChrTurnDirection(0xFFFE, 0xFFF5, 0.0, 1)
    OP_33(0x47)

    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_03', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, 0, 1.0, -1.0, 0x00, 0x00)
    # PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_02', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 10.4, 10.8, -1.0, 0x00, 0x00)
    Sleep(50)
    # PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_01', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(100)

    ChrCreateAfterImage(0xFFFE)
    ChrSetAfterImageOn(0xFFFE, 0.1, 0.1, 0.22, 0.45, 1.0)

    PlayEffect(0xFFFE, (0xFF, 0x94, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    PlayEffect(0xFFFE, (0xFF, 0x90, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    PlaySE(0xFB1)

    CameraCtrl(0x0A, 0.02, 0.008, 0.0, 0x0064, 0x00FA, 0x0064, 0x0000, 0x0000, 0x00)
    ChrSetPosByTarget(0xFFFE, 0xFFF5, 0.0, 0.0, -1.5, 6.0, 0x00, 0x00)
    CameraCtrl(0x16, 0x02, 5.5, 0x03E8)
    OP_33(0x3A, 0xFFFE)

    ChrSetAfterImageOff()

    # PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_02', 0x00, 0x00, 0x00, 0x00, 0x00, 0.5, -1.0, -1.0, -1.0, 0x00, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT00_02', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 9.75, 11.8, -1.0, 0x00, 0x00)
    ChrSetPosByTarget(0xFFFE, 0xFFF5, 0.0, 0.0, 0.0, 2.0, 0x00, 0x00)
    Sleep(200)
    OP_33(0x47)

    Call(ScriptId.Current, 'AniBtlWait')
    Sleep(500)

    Call(ScriptId.BtlCom, 'ReleaseEffect')

    Return()

def AniBtlItem():
    Call(ScriptId.BtlCom, 'AniBtlItem')
    Return()

def AniBtlAria():
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x00, 0x00)
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x01, 0x01)
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x02, 0x02)
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x03, 0x03)

    If(
        (
            (Expr.Eval, "OP_33(0x62, 0xFFFE, 0x0E)"),
            Expr.Return,
        ),
        'loc_12D7',
    )

    OP_33(0x3C, 0xFFFE, 0xFFFB, 0, 0.5)
    EffectCtrl(0x0C, 0xFFFE, (0xFF, 0x7D9, 0x0), 0xFFFE, 0x00000021, (0xDD, ''), (0xEE, 0.0, 0x0), (0x33, 0x3, 0x0), (0xEE, 0.0, 0x0), 0, 0, 0, (0x33, 0x2, 0x0), (0x33, 0x2, 0x0), (0x33, 0x2, 0x0), 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT01_00', 0x01, 0x00, 0x00, 0x00, 0x00, 0, -1, -1, -1, 0x00, 0x00)
    SetChrFace(0x03, 0xFFFE, '7', '0', '', '#b', '0')

    Jump('loc_13DF')

    def _loc_12D7(): pass

    label('loc_12D7')

    CameraCtrl(0x00)
    OP_33(0x47)
    OP_33(0x48, 0xFFFE)
    OP_33(0x46, 0.25, 6, 15)
    OP_33(0x3C, 0xFFFE, 0xFFFB, 0, 0.5)
    EffectCtrl(0x0C, 0xFFFE, (0xFF, 0x7D9, 0x0), 0xFFFE, 0x00000021, (0xDD, ''), (0xEE, 0.0, 0x0), (0x33, 0x3, 0x0), (0xEE, 0.0, 0x0), 0, 0, 0, (0x33, 0x2, 0x0), (0x33, 0x2, 0x0), (0x33, 0x2, 0x0), 0x00)
    OP_3B(0x00, (0xFF, 0x8B7E, 0x0), 1, (0xFF, 0x0, 0x0), 0, 0, 0x0000, 0xFFFF, 0, 0, 0, 0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x3A, 0xFFFE, (0x33, 0x0, 0x0), (0x33, 0x1, 0x0), (0xFF, 0x0, 0x0), (0xFF, 0x0, 0x0))
    SetChrFace(0x03, 0xFFFE, '7', '1', '', '#b', '0')
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT01_00', 0x01, 0x00, 0x00, 0x00, 0x00, 0.4, -1, -1, -1, 0x00, 0x00)
    Sleep(1500)
    SetChrFace(0x03, 0xFFFE, '7', '0', '', '#b', '0')

    def _loc_13DF(): pass

    label('loc_13DF')

    Return()

def AniBtlArts():
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x00, 0x00)
    OP_0C(0x00, 0x01)
    OP_0E(0x00, 0x01, 0x01)
    CameraCtrl(0x00)
    OP_33(0x47)
    OP_33(0x48, 0xFFFE)
    OP_33(0x46, 0.25, 6, 15)
    OP_33(0x4B, 0x00FA, 0x03)
    OP_33(0x3C, 0xFFFE, 0xFFF5, 0, 0.5)
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT01_01', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1, -1, -1, 0x00, 0x00)
    Sleep(400)
    SetChrFace(0x03, 0xFFFE, '6', 'B', '', '#b', '0')
    OP_3B(0x3A, 0xFFFE, (0x33, 0x0, 0x0), (0x33, 0x1, 0x0), (0xFF, 0x0, 0x0), (0xFF, 0x0, 0x0))
    WaitAnimeClip(0xFFFE, 0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT01_01a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1, -1, -1, 0x00, 0x00)

    If(
        (
            (Expr.GetChrWork, 0xFFFE, 0x8),
            (Expr.PushLong, 0x3F),
            Expr.Equ,
            Expr.Return,
        ),
        'loc_1686',
    )

    EffectCtrl(0x0C, 0xFFFE, (0xFF, 0x7DB, 0x0), 0xFFE1, 0x00000003, (0xDD, 'NODE_CENTER'), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0, 0, 0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)

    Jump('loc_16D4')

    def _loc_1686(): pass

    label('loc_1686')

    EffectCtrl(0x0C, 0xFFFE, (0xFF, 0x7DB, 0x0), 0xFFFE, 0x00000003, (0xDD, 'NODE_CENTER'), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0, 0, 0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)

    def _loc_16D4(): pass

    label('loc_16D4')

    OP_3B(0x00, (0xFF, 0x8B7F, 0x0), 1, (0xFF, 0x0, 0x0), 0, 0, 0x0000, 0xFFFF, 0, 0, 0, 0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(500)
    CameraCtrl(0x00)
    OP_33(0x47)
    OP_33(0x05, 0x00, '')
    OP_33(0x06, 0x00)
    SetChrFace(0x03, 0xFFFE, '0', '0', '', '#b', '0')
    PlayChrAnimeClip(0xFFFE, 'BTL_CRAFT01_01a', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1, -1, -1, 0x00, 0x00)
    WaitAnimeClip(0xFFFE, 0, 0x00)
    EffectCtrl(0x12, 0xFFFE, 0x07DB)

    Return()

def AniBtlAttack():
    LoadEffect(0xFFFE, 0x90, 'battle/cr000_02_1.eff')
    LoadEffect(0xFFFE, 0x91, 'battle/cr000_02_5.eff')

    CameraCtrl(0x00)
    BattleCtrl(0x47)
    BattleCtrl(0x48, 0xFFFE)
    BattleCtrl(0x48, 0xFFFB)
    BattleCtrl(0x46, 0.25, 6.0, 15.0)

    ChrTurnDirection(0xFFFE, 0xFFFB, 0.0, -1.0)
    ChrCreateAfterImage(0xFFFE)
    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.2, 66.6667, 67.2, -1.0, 0x00, 0x00)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)

    PlayEffect(0xFFFE, (0xFF, 0x91, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    PlayEffect(0xFFFE, (0xFF, 0x90, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    PlaySE(0xFB1)
    ChrSetPosByTarget(0xFFFE, 0xFFFB, 0.0, 0.0, -4.0, 7.0, 0x00, 0x00)

    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x01, 0x01, 0x00, 0x01, 0x00, 0.2, 67.2333, 67.4333, -0.0333333, 0x00, 0x00)

    If(
        (
            (Expr.Eval, "BattleCtrl(0x62, 0xFFFE, 0x0A)"),
            (Expr.PushLong, 0x2),
            Expr.Neq,
            Expr.Return,
        ),
        'loc_7F57',
    )

    If(
        (
            (Expr.Eval, "IsBattleModelEqualTo(0xFFFE, 'C_CHR033_C00')"),
            Expr.Return,
        ),
        'loc_7F3B',
    )

    OP_3B(0x3A, 0xFFFE, (0xFF, 0x1B8A, 0x0), (0xFF, 0x1B8B, 0x0), (0xFF, 0x0, 0x0), (0xFF, 0x0, 0x0))

    Jump('loc_7F57')

    def _loc_7F3B(): pass

    label('loc_7F3B')

    OP_3B(0x3A, 0xFFFE, (0xFF, 0x1B5E, 0x0), (0xFF, 0x1B5F, 0x0), (0xFF, 0x0, 0x0), (0xFF, 0x0, 0x0))

    def _loc_7F57(): pass

    label('loc_7F57')

    OP_6C(0xFFFE, 1.0)
    ChrSetAfterImageOn(0xFFFE, 0.1, 0.1, 0.22, 0.45, 1.0)
    SetChrFace(0x03, 0xFFFE, '2', '2', '', '#b', '0')
    PlayEffect(0xFFFE, (0xFF, 0x82, 0x0), 0xFFFE, 0x0000000C, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.5, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 0.75, 0x0), (0xEE, 0.75, 0x0), (0xEE, 0.75, 0x0), 0xFF)
    OP_3B(0x00, (0xFF, 0x8FAE, 0x0), 0.7, (0xFF, 0x0, 0x0), 0.0, -2.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)

    BattleInitHit(0xFFFE)

    CreateThread(0xFFFE, 0x02, ScriptId.Current, 'AniBtlAttackDamage01')
    CameraCtrl(0x0A, 0.3, 0.25, 0.1, 0x001E, 0x03E8, 0x0190, 0x0000, 0x0000, 0x00)
    OP_5E(0x00, 0x0002, 0.15, 0x001E, 0x03E8, 0x02BC, 0.3, 0xFFFF, -9000.0, -9000.0, -9000.0)
    Sleep(166)
    Sleep(166)
    WaitForThreadExit(0xFFFE, 0x02)

    BattleInitHit(0xFFFE)

    CreateThread(0xFFFE, 0x02, ScriptId.Current, 'AniBtlAttackDamage01')
    Sleep(166)
    Sleep(166)
    WaitForThreadExit(0xFFFE, 0x02)

    BattleInitHit(0xFFFE)

    CreateThread(0xFFFE, 0x02, ScriptId.Current, 'AniBtlAttackDamage01')
    Sleep(333)
    ChrSetAfterImageOff()
    Sleep(166)
    ChrSetAfterImageOn(0xFFFE, 0.1, 0.1, 0.22, 0.45, 1.0)
    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.4, 68.3, 68.5, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 0.5)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.4, 68.5333, 68.6, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 0.4)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_ATTACK', 0x00, 0x01, 0x00, 0x00, 0x00, 0.05, 68.6333, -1.0, -1.0, 0x00, 0x00)
    BattleCtrl(0x47)
    BattleCtrl(0x48, 0xFFFB)
    BattleCtrl(0x46, 0.5, 6.0, 15.0)
    PlayEffect(0xFFFE, (0xFF, 0x83, 0x0), 0xFFFE, 0x0000000C, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    CameraCtrl(0x0A, 0.64, 0.3, 0.2, 0x001E, 0x0258, 0x0258, 0x0000, 0x0000, 0x00)
    OP_5E(0x00, 0x0002, 0.25, 0x001E, 0x02BC, 0x02BC, 0.45, 0xFFFF, -9000.0, -9000.0, -9000.0)
    OP_3B(0x00, (0xFF, 0x8F62, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, -1.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8F66, 0x0), 0.5, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CreateThread(0xFFFE, 0x02, ScriptId.Current, 'AniBtlAttackDamage01')
    SetChrFace(0x03, 0xFFFE, '2', '0', '', '#b', '0')
    Sleep(133)
    OP_6C(0xFFFE, 0.2)
    ChrSetAfterImageOff()
    Sleep(266)
    OP_6C(0xFFFE, 1.0)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    WaitForThreadExit(0xFFFE, 0x02)

    Call(ScriptId.BtlCom, 'ReleaseEffect')
    Return()

def AniBtlSCraft00():
    Call(ScriptId.BtlCom, 'AniBtlSCraftBegin')
    ChrAnimeClipCtrl(0x04, 0xFFFE, 'C_CHR033_SC1', '')
    LoadEffect(0xFFFE, 0x8E, 'event/evr04_01.eff')
    LoadEffect(0xFFFE, 0x8F, 'event/evret_10.eff')
    LoadEffect(0xFFFE, 0x90, 'battle/sc033_00_0.eff')
    LoadEffect(0xFFFE, 0x91, 'battle/sc033_00_1.eff')
    LoadEffect(0xFFFE, 0x92, 'battle/sc033_00_2.eff')
    LoadEffect(0xFFFE, 0x93, 'battle/sc033_00_3.eff')
    LoadEffect(0xFFFE, 0x94, 'battle/sc033_00_4.eff')
    LoadEffect(0xFFFE, 0x95, 'battle/sc033_00_5.eff')
    LoadEffect(0xFFFE, 0x96, 'battle/sc033_00_6.eff')
    LoadEffect(0xFFFE, 0x97, 'battle/sc033_00_7.eff')
    LoadEffect(0xFFFE, 0x98, 'battle/sc033_00_8.eff')
    LoadEffect(0xFFFE, 0x99, 'battle/sc033_00_9.eff')
    LoadEffect(0xFFFE, 0x9A, 'battle/sc033_00_10.eff')
    LoadEffect(0xFFFE, 0x9B, 'battle/sc033_00_11.eff')
    LoadEffect(0xFFFE, 0x9C, 'battle/sc033_00_12.eff')
    LoadEffect(0xFFFE, 0x9D, 'battle/sc033_00_13.eff')
    LoadEffect(0xFFFE, 0x9F, 'battle/cic033_0.eff')
    PlayEffect(0xFFFE, (0xFF, 0x90, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x02)
    OP_3B(0x00, (0xFF, 0x1012, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_C0(0x0002, 1.65)
    ChrPhysicsCtrl(0x01, 0xFFFE, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFE, 0x00000020)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000020)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000080)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000200)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000020)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000080)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000200)
    SetChrPos(0xFFFE, 0.0, 0.0, -50.0, 0.0)
    ChrTurnDirection(0xFFFE, 0xFFEA, -1.0, 0.5)
    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    BattleCtrl(0x13, 0xFFFE, 0x0001, 0xFFFF, 0x00000000, 0x00000578, 0x00000000)
    def _loc_C630(): pass

    label('loc_C630')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_C67B',
    )

    ChrTurnDirection(0xFFFB, 0xFFEA, -1.0, 0.5)
    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlFloat', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    ChrTargetsIterNext(0xFFFE)
    Sleep(1)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_C630')

    def _loc_C67B(): pass

    label('loc_C67B')

    Call(ScriptId.Current, 'SpringOff')
    Call(ScriptId.Current, 'EraseEquip')
    LoadAsset('C_EQU090')
    AttachEquip(0xFFFE, 'C_EQU090', 'R_arm_point', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0)
    OP_2A(0x00, 0xFFFE, '', 'R_arm_point', 0x01)
    Sleep(0)
    Fade(0x65, 1500, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraCtrl(0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_00', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    SetChrFace(0x03, 0xFFFE, 'F', '2[autoM2]', '4', 'F', '0')
    CameraSetPosByTarget(0xFFFE, '', -0.41, 0.8, -0.54, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, 0.0, -162.0, 0.0, 0, 0x01)
    CameraSetDistance(1.6, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetPosByTarget(0xFFFE, '', -0.17, 1.61, 0.28, 3000)
    CameraRotateByTarget(0xFFFE, '', 0x03, 16.0, -25.0, 0.0, 3000, 0x01)
    CameraSetDistance(0.6, 3000)
    CameraCtrl(0x0B, 0x03, 25.0, 0x0BB8)
    OP_3B(0x00, (0xFF, 0x8F27, 0x0), 0.8, (0xFF, 0x1F4, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(1000)
    OP_3B(0x32, (0xFF, 0x1B6A, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(1500)
    SetChrFace(0x03, 0xFFFE, '3', '2[autoM2]', '4', '3', '0')
    CameraCtrl(0x07, 0x00BF)
    CameraSetPosByTarget(0xFFFE, '', -0.1, 1.31, 0.69, 1500)
    CameraRotateByTarget(0xFFFE, '', 0x03, 3.0, 0.0, 0.0, 1500, 0x01)
    CameraCtrl(0x05, 0x02, 0.7, 1500)
    CameraCtrl(0x0B, 0x02, 40.0, 0x05DC)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_01', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_45(0xFFFE, 15.0, -15.0, 0.0, 0x01F4, 0x0000)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_01a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    CameraSetDistance(1.1, 10000)
    Sleep(700)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_02', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(166)
    PlayEffect(0xFFFE, (0xFF, 0x92, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x04)
    PlayEffect(0xFFFE, (0xFF, 0x93, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x05)
    OP_3B(0x00, (0xFF, 0x8FA8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CameraSetPosByTarget(0xFFFE, '', 0.49, 1.06, 1.58, 200)
    CameraRotateByTarget(0xFFFE, '', 0x03, -8.0, 23.0, 0.0, 200, 0x01)
    CameraSetDistance(3.6, 200)
    OP_45(0xFFFE, 0.0, 0.0, 0.0, 0x0064, 0x0000)
    SetChrFace(0x03, 0xFFFE, '2', '0', '', '#b', '0')
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00FA, 0x00C8, 1.0, 0xF011, 0.0, 1.0, 0.0)
    OP_3B(0xFF, 0.5, 0.7, 0.2)
    Sleep(150)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_02a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    CameraSetPosByTarget(0xFFFE, '', 0.49, 2.61, 1.58, 3000)
    CameraRotateByTarget(0xFFFE, '', 0x03, -7.0, 23.0, 0.0, 3000, 0x01)
    CameraSetDistance(10.0, 3000)
    Sleep(500)
    StopEffect(0xFFFE, 0x04, 0x01)
    PlayEffect(0xFFFE, (0xFF, 0x9F, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    OP_3B(0x00, (0xFF, 0x8B7D, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(1666)
    LoadAsset('C_CHRX10')
    ChrCreateTempChar(0x0000, 0xFFFF, 'C_CHRX10', '')
    ChrPhysicsCtrl(0x01, 0x0B68, 0x00000040)
    ChrPhysicsCtrl(0x01, 0x0B68, 0x00000020)
    ChrPhysicsCtrl(0x00, 0x0B68, 0x00000020)
    ChrPhysicsCtrl(0x00, 0x0B68, 0x00000200)
    ChrPhysicsCtrl(0x00, 0x0B68, 0x00000080)
    SetChrPos(0x0B68, 0.0, 0.0, -50.0, 0.0)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPosByTarget(0xFFFE, '', -2.28, -0.42, -5.36, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, 7.0, 22.0, 0.0, 0, 0x01)
    CameraSetDistance(10.0, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    OP_3B(0x32, (0xFF, 0x1B6B, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0xFF, 0.5, 0.7, 0.6)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_03', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_3B(0x00, (0xFF, 0x8F62, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_45(0xFFFE, 45.0, 45.0, 90.0, 0x01F4, 0x0000)
    Sleep(166)
    PlayEffect(0xFFFE, (0xFF, 0x95, 0x0), 0x0B68, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), 0x07)
    CameraSetPosByTarget(0xFFFE, '', -2.75, 8.39, -6.77, 1200)
    CameraRotateByTarget(0xFFFE, '', 0x03, -39.0, 22.0, 0.0, 1200, 0x01)
    CameraSetDistance(15.0, 1200)
    Sleep(333)
    SetChrFace(0x03, 0xFFFE, '2', '7', '7', '2', '0')
    Sleep(166)
    PlayEffect(0xFFFE, (0xFF, 0x94, 0x0), 0x0B68, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), 0x06)
    OP_3B(0x00, (0xFF, 0x8F2D, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0708, 0x0258, 0x0000, 0x0708, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_03a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 2.0)
    Fade(0x65, 500, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPosByTarget(0xFFFE, '', 0.2, 1.42, 1.59, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, 2.0, 2.0, 0.0, 0, 0x01)
    CameraSetDistance(8.0, 0)
    CameraSetPosByTarget(0xFFFE, '', 0.2, 1.74, 1.59, 1500)
    CameraRotateByTarget(0xFFFE, '', 0x03, -13.0, -14.0, 0.0, 1500, 0x01)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_01a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 3.0)
    OP_45(0xFFFE, 0.0, 0.0, 0.0, 0x0000, 0x0000)
    SetChrFace(0x03, 0xFFFE, '3', '3', '0', '3', '0')
    Sleep(1000)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPosByTarget(0xFFFE, '', -0.47, 0.54, -5.94, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, 6.0, 4.0, 0.0, 0, 0x01)
    CameraSetDistance(10.5, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetDistance(8.5, 1500)
    Sleep(1500)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_02', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(233)
    OP_3B(0x00, (0xFF, 0x8FA6, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x03E8, 0x012C, 0x0000, 0x03E8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_45(0xFFFE, 0.0, 0.0, 0.0, 0x0064, 0x0000)
    SetChrFace(0x03, 0xFFFE, '2', '0', '', '#b', '0')
    CameraSetPosByTarget(0xFFFE, '', -0.23, 0.95, -5.88, 150)
    CameraRotateByTarget(0xFFFE, '', 0x03, 0.0, 0.0, 0.0, 150, 0x01)
    CameraSetDistance(8.0, 150)
    Sleep(150)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000020)
    BattleCtrl(0x13, 0xFFFE, 0x0001, 0xFFFF, 0x00000000, 0x00000578, 0x00000000)
    Sleep(1)
    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_D04A(): pass

    label('loc_D04A')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_D072',
    )

    ChrTurnDirection(0xFFFB, 0xFFFF, 180.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_D04A')

    def _loc_D072(): pass

    label('loc_D072')

    Fade(0x65, 500, 1.0, 0x0000)
    Fade(0xFE, 0)
    PlayEffect(0xFFFE, (0xFF, 0x91, 0x0), 0x0B68, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x03)
    OP_3B(0x00, (0xFF, 0x8F96, 0x0), 0.8, (0xFF, 0x3E8, 0x0), 0.0, -3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FAA, 0x0), 0.5, (0xFF, 0x3E8, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CameraSetPos(2.38, 1.57, -49.52, 0)
    CameraRotate(354.0, 2.0, 0.0, 0, 0x01)
    CameraSetDistance(11.0, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetPos(11.72, 4.01, -7.9, 1000)
    CameraRotate(356.0, -149.0, 0.0, 1000, 0x01)
    CameraSetDistance(30.1, 1000)
    OP_3B(0xFF, 0.5, 0.7, 0.6)
    ChrSetPosByTarget(0x0B68, 0xFFFE, 0.0, 0.0, 25.0, 3.75, 0x00, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_02a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 3.0)
    CameraCtrl(0x07, 0x00BF)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000020)
    StopEffect(0xFFFE, 0x05, 0x01)
    OP_3B(0xFF, 0.3, 0.5, 2.0)
    CameraSetPos(6.86, 4.79, 20.05, 1000)
    CameraRotate(352.0, -161.0, 0.0, 1000, 0x01)
    CameraSetDistance(36.0, 1000)
    ChrSetPosByTarget(0x0B68, 0xFFFF, 0.0, 0.0, 0.0, 3.75, 0x02, 0x00)
    CameraCtrl(0x07, 0x00BF)
    CameraSetPos(5.62, 12.73, 20.6, 1500)
    CameraRotate(341.0, 195.0, 0.0, 1500, 0x01)
    CameraSetDistance(30.0, 1500)
    StopEffect(0xFFFE, 0x03, 0x01)
    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_D2AA(): pass

    label('loc_D2AA')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_D2D2',
    )

    ChrTurnDirection(0xFFFB, 0xFFFE, 0.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_D2AA')

    def _loc_D2D2(): pass

    label('loc_D2D2')

    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 0.0, 6.5, 1.0, 0.5, 0x02, 0x00)
    OP_3B(0x00, (0xFF, 0x8F41, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x00, 'AniBtlFloat')
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_D3A6',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 1.5, 5.0, 0.0, 0.5, 0x02, 0x00)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x00, 'AniFall')

    def _loc_D3A6(): pass

    label('loc_D3A6')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_D3FA',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, -1.5, 5.0, 0.0, 0.5, 0x02, 0x00)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x00, 'AniBtlFloat')

    def _loc_D3FA(): pass

    label('loc_D3FA')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_D44A',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 0.0, 3.5, -1.0, 0.5, 0x02, 0x00)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x00, 'AniFall')

    def _loc_D44A(): pass

    label('loc_D44A')

    CameraCtrl(0x07, 0x00BF)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x01, 0xFFFE, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFE, 0x00000020)
    ChrSetPosByTarget(0xFFFE, 0xFFEA, 0.0, 5.0, -20.0, 0.0, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x93, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x05)
    OP_3B(0x00, (0xFF, 0x8F2E, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CameraSetPos(-1.38, 7.18, -15.89, 0)
    CameraRotate(346.0, 151.0, 0.0, 0, 0x01)
    CameraSetDistance(8.7, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_05', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_05a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    StopEffect(0xFFFE, 0x05, 0x01)
    PlayEffect(0xFFFE, (0xFF, 0x95, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x07)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FA6, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x32, (0xFF, 0x1B6C, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0xFF, 0.5, 0.7, 0.15)
    Sleep(166)
    PlayEffect(0xFFFE, (0xFF, 0x96, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, -0.25, 0x0), (0xEE, 0.5, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x08)
    Sleep(233)
    OP_6C(0xFFFE, 4.0)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00FA, 0x00C8, 0.5, 0xF011, 0.0, 1.0, 0.0)
    ChrSetPosByTarget(0xFFFE, 0xFFF9, 0.0, 6.5, 10.0, 10.0, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x91, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x03)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 4.0)
    Sleep(100)
    OP_4E(1.0, 0.0, 0x03)
    StopEffect(0xFFFE, 0x05, 0x01)
    StopEffect(0xFFFE, 0x06, 0x01)
    PlayEffect(0xFFFE, (0xFF, 0x97, 0x0), 0x0B68, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), (0xEE, 1.2000000476837158, 0x0), 0x09)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000020)
    CameraSetPos(0.0, 0.0, 0.0, 0)
    CameraRotate(13.0, 170.0, 0.0, 0, 0x01)
    CameraSetDistance(10.0, 0)
    CameraCtrl(0x05, 0x00, 7.0, 500)
    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_D8D8(): pass

    label('loc_D8D8')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_D900',
    )

    ChrTurnDirection(0xFFFB, 0xFFFE, 0.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_D8D8')

    def _loc_D900(): pass

    label('loc_D900')

    ReleaseEffect(0xFFFE, 0x96)
    LoadEffect(0xFFFE, 0x96, 'battle/sc033_00_14.eff')
    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    ChrSetPosByTarget(0xFFFB, 0xFFEA, 0.0, 0.0, 0.0, 0.0, 0x00, 0x00)
    OP_5C(0xFFFB, 0x00, 'Root')
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, -30.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000020)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_6C(0xFFFE, 4.0)
    ChrTurnDirection(0xFFFE, 0xFFEA, 0.0, 0.0)
    ChrSetPosByTarget(0xFFFE, 0xFFEA, 0.0, 0.0, -15.0, 0.0, 0x00, 0x00)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPos(1.53, -0.0, 8.99, 0)
    CameraRotate(11.0, 339.0, 0.0, 0, 0x01)
    CameraSetDistance(8.8, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraCtrl(0x02, 0x02, 1.64, 0.0, -4.17, 500)
    ChrSetPosByTarget(0xFFFE, 0xFFFB, 0.0, 0.0, 15.0, 12.5, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x96, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x08)
    BattleCtrl(0x3A, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFE, 0xFFFE, 0.0, 0.0, 10.0, 5.0, 0x02, 0x00)
    Sleep(166)
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x98, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, 0.10000000149011612, 0x0), (0xEE, -0.20000000298023224, 0x0), 25.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0A)
    OP_3B(0x00, (0xFF, 0x8F1C, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FBC, 0x0), 0.4, (0xFF, 0x0, 0x0), 0.0, 9.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00C8, 0x0096, 0.5, 0xFFFB, 0.0, 1.0, 0.0)
    CameraCtrl(0x0A, 0.0, 0.4, 0.0, 0x0000, 0x0032, 0x0320, 0x0000, 0x0000, 0x00)
    OP_3B(0xFF, 0.5, 0.7, 0.1)
    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_4C(0xFFFB, 0.1, 0.3, 0.6, 0x0000, 0x03)
    OP_4C(0xFFFB, 0.0, 0.0, 0.0, 0x01F4, 0x03)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    SetChrFace(0x03, 0xFFFB, 'B', '7', '', '#b', '0')
    Sleep(10)
    PlayChrAnimeClip(0xFFFB, 'BTL_CRUCIFIXION', 0x01, 0x00, 0x00, 0x00, 0x00, 0.25, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(40)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06b', 0x00, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(500)
    BattleCtrl(0x3A, 0xFFFE)
    Fade(0x01, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000020)
    OP_5C(0xFFFB, 0x01, 'Root')
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_E0FD',
    )

    ChrSetPosByTarget(0xFFFB, 0xFFEA, 0.0, 0.0, 0.0, 0.0, 0x00, 0x00)
    OP_5C(0xFFFB, 0x00, 'Root')
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000020)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_6C(0xFFFE, 4.0)
    ChrTurnDirection(0xFFFE, 0xFFEA, 0.0, 0.0)
    ChrSetPosByTarget(0xFFFE, 0xFFEA, 0.0, 0.0, 15.0, 0.0, 0x00, 0x00)
    ChrTurnDirection(0xFFFE, 0xFFFB, 0.0, 0.0)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPos(-2.69, -0.53, 4.26, 0)
    CameraRotate(17.0, 144.0, 0.0, 0, 0x01)
    CameraSetDistance(8.5, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraCtrl(0x02, 0x02, -2.77, 0.32, -0.17, 500)
    CameraCtrl(0x04, 0x02, 8.0, 150.0, 0.0, 500, 0x01)
    ChrSetPosByTarget(0xFFFE, 0xFFFB, 0.0, 0.0, 15.0, 12.5, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x96, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x08)
    BattleCtrl(0x3A, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFE, 0xFFFE, 0.0, 0.0, 10.0, 5.0, 0x02, 0x00)
    Sleep(166)
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x98, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, -0.20000000298023224, 0x0), 25.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0A)
    OP_3B(0x00, (0xFF, 0x8F1C, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FBC, 0x0), 0.4, (0xFF, 0x0, 0x0), 0.0, 9.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00C8, 0x0096, 0.5, 0xFFFB, 0.0, 1.0, 0.0)
    CameraCtrl(0x0A, 0.0, 0.4, 0.0, 0x0000, 0x0032, 0x0320, 0x0000, 0x0000, 0x00)
    SetChrFace(0x03, 0xFFFB, 'B', '7', '', '#b', '0')
    OP_3B(0xFF, 0.5, 0.7, 0.1)
    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_4C(0xFFFB, 0.1, 0.3, 0.6, 0x0000, 0x03)
    OP_4C(0xFFFB, 0.0, 0.0, 0.0, 0x01F4, 0x03)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    Sleep(10)
    PlayChrAnimeClip(0xFFFB, 'BTL_CRUCIFIXION', 0x01, 0x00, 0x00, 0x00, 0x00, 1.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(40)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06b', 0x00, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(500)
    BattleCtrl(0x3A, 0xFFFE)
    Fade(0x01, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000020)
    OP_5C(0xFFFB, 0x01, 'Root')

    def _loc_E0FD(): pass

    label('loc_E0FD')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_E530',
    )

    ChrSetPosByTarget(0xFFFB, 0xFFEA, 0.0, 0.0, 0.0, 0.0, 0x00, 0x00)
    OP_5C(0xFFFB, 0x00, 'Root')
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, 0.0, -40.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000020)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_6C(0xFFFE, 4.0)
    ChrTurnDirection(0xFFFE, 0xFFEA, 0.0, 0.0)
    ChrSetPosByTarget(0xFFFE, 0xFFEA, 0.0, 0.0, -15.0, 0.0, 0x00, 0x00)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPos(-1.99, 1.59, -9.21, 0)
    CameraRotate(349.0, 143.0, 0.0, 0, 0x01)
    CameraSetDistance(8.8, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraCtrl(0x02, 0x02, -2.42, 1.5, 4.84, 500)
    CameraCtrl(0x04, 0x02, 352.0, 145.0, 0.0, 500, 0x01)
    ChrSetPosByTarget(0xFFFE, 0xFFFB, 0.0, 0.0, 15.0, 12.5, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x96, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x08)
    BattleCtrl(0x3A, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFE, 0xFFFE, 0.0, 0.0, 10.0, 5.0, 0x02, 0x00)
    Sleep(166)
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x98, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, -0.20000000298023224, 0x0), 25.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0A)
    OP_3B(0x00, (0xFF, 0x8F1C, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FBC, 0x0), 0.4, (0xFF, 0x0, 0x0), 0.0, 9.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00C8, 0x0096, 0.5, 0xFFFB, 0.0, 1.0, 0.0)
    CameraCtrl(0x0A, 0.0, 0.4, 0.0, 0x0000, 0x0032, 0x0320, 0x0000, 0x0000, 0x00)
    SetChrFace(0x03, 0xFFFB, 'B', '7', '', '#b', '0')
    OP_3B(0xFF, 0.5, 0.7, 0.1)
    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_4C(0xFFFB, 0.1, 0.3, 0.6, 0x0000, 0x03)
    OP_4C(0xFFFB, 0.0, 0.0, 0.0, 0x01F4, 0x03)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    Sleep(10)
    PlayChrAnimeClip(0xFFFB, 'BTL_CRUCIFIXION', 0x01, 0x00, 0x00, 0x00, 0x00, 1.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(40)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06b', 0x00, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(500)
    BattleCtrl(0x3A, 0xFFFE)
    Fade(0x01, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000020)
    OP_5C(0xFFFB, 0x01, 'Root')

    def _loc_E530(): pass

    label('loc_E530')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_E971',
    )

    ChrSetPosByTarget(0xFFFB, 0xFFEA, 0.0, 0.0, 0.0, 0.0, 0x00, 0x00)
    OP_5C(0xFFFB, 0x00, 'Root')
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, -30.0, 40.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFFB, 0x00000020)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_6C(0xFFFE, 4.0)
    ChrTurnDirection(0xFFFE, 0xFFEA, 0.0, 0.0)
    ChrSetPosByTarget(0xFFFE, 0xFFEA, 0.0, 0.0, 15.0, 0.0, 0x00, 0x00)
    ChrTurnDirection(0xFFFE, 0xFFFB, 0.0, 0.0)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPos(0.9, 0.62, -2.66, 0)
    CameraRotate(4.0, 334.0, 0.0, 0, 0x01)
    CameraSetDistance(6.0, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraCtrl(0x02, 0x02, 1.16, 0.62, 1.81, 500)
    CameraCtrl(0x04, 0x02, 1.0, 335.0, 0.0, 500, 0x01)
    ChrSetPosByTarget(0xFFFE, 0xFFFB, 0.0, 0.0, 15.0, 12.5, 0x00, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x96, 0x0), 0xFFFE, 0x00000003, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x08)
    BattleCtrl(0x3A, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFE, 0xFFFE, 0.0, 0.0, 10.0, 5.0, 0x02, 0x00)
    Sleep(166)
    OP_5D(0xFFFB, 'Root', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0x0000, 0x03, 0x00)
    PlayEffect(0xFFFE, (0xFF, 0x98, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, -0.20000000298023224, 0x0), 25.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0A)
    OP_3B(0x00, (0xFF, 0x8F1C, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FBC, 0x0), 0.4, (0xFF, 0x0, 0x0), 0.0, 9.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00C8, 0x0096, 0.5, 0xFFFB, 0.0, 1.0, 0.0)
    CameraCtrl(0x0A, 0.0, 0.4, 0.0, 0x0000, 0x0032, 0x0320, 0x0000, 0x0000, 0x00)
    SetChrFace(0x03, 0xFFFB, 'B', '7', '', '#b', '0')
    OP_3B(0xFF, 0.5, 0.7, 0.1)
    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_4C(0xFFFB, 0.1, 0.3, 0.6, 0x0000, 0x03)
    OP_4C(0xFFFB, 0.0, 0.0, 0.0, 0x01F4, 0x03)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    Sleep(10)
    PlayChrAnimeClip(0xFFFB, 'BTL_CRUCIFIXION', 0x01, 0x00, 0x00, 0x00, 0x00, 1.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(40)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_06b', 0x00, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    Sleep(500)
    BattleCtrl(0x3A, 0xFFFE)
    Fade(0x01, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000020)
    OP_5C(0xFFFB, 0x01, 'Root')

    def _loc_E971(): pass

    label('loc_E971')

    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFB, 0x00000020)
    StopEffect(0xFFFE, 0x02, 0x01)
    StopEffect(0xFFFE, 0x03, 0x01)
    StopEffect(0xFFFE, 0x08, 0x01)
    StopEffect(0xFFFE, 0x09, 0x01)
    StopEffect(0xFFFE, 0x0A, 0x01)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000020)
    ChrSetPosByTarget(0xFFFE, 0xFFFF, 0.0, 0.0, 10.0, 0.0, 0x00, 0x00)
    ChrTurnDirection(0xFFFE, 0xFFFB, 180.0, 0.0)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_07', 0x01, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    SetChrFace(0x03, 0xFFFE, '1', '2', '', '#b', '0')
    PlayEffect(0xFFFE, (0xFF, 0x9D, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0xFF)
    OP_3B(0x00, (0xFF, 0x8F27, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CameraSetPos(0.51, 2.81, 6.81, 0)
    CameraRotate(359.0, 11.0, 0.0, 0, 0x01)
    CameraSetDistance(11.3, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetPos(-0.58, 6.99, -2.61, 2500)
    CameraRotate(336.0, 15.0, 5.0, 1250, 0x01)
    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_EAF1(): pass

    label('loc_EAF1')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_EB19',
    )

    ChrTurnDirection(0xFFFB, 0xFFFF, 180.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_EAF1')

    def _loc_EB19(): pass

    label('loc_EB19')

    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 0.0, 6.5, 1.0, 0.0, 0x02, 0x00)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_EB6C',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 1.5, 5.0, 0.0, 0.0, 0x02, 0x00)

    def _loc_EB6C(): pass

    label('loc_EB6C')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_EB9F',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, -1.5, 5.0, 0.0, 0.0, 0x02, 0x00)

    def _loc_EB9F(): pass

    label('loc_EB9F')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_EBD2',
    )

    ChrSetPosByTargetAsync(0xFFFB, 0xFFFF, 0.0, 3.5, -1.0, 0.0, 0x02, 0x00)

    def _loc_EBD2(): pass

    label('loc_EBD2')

    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_EBD7(): pass

    label('loc_EBD7')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_EBFF',
    )

    ChrTurnDirection(0xFFFB, 0xFFFE, 0.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_EBD7')

    def _loc_EBFF(): pass

    label('loc_EBFF')

    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x01, 'AniBtlCrucifixion')
    SetChrFace(0x03, 0xFFFB, 'B', 'F', '', '#b', '0')
    Sleep(1)
    PlayEffect(0xFFFE, (0xFF, 0x99, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0B)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_ED4D',
    )

    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x01, 'AniBtlCrucifixion')
    SetChrFace(0x03, 0xFFFB, 'B', 'F', '', '#b', '0')
    PlayEffect(0xFFFE, (0xFF, 0x99, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0B)

    def _loc_ED4D(): pass

    label('loc_ED4D')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_EE0F',
    )

    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x01, 'AniBtlCrucifixion')
    SetChrFace(0x03, 0xFFFB, 'B', 'F', '', '#b', '0')
    PlayEffect(0xFFFE, (0xFF, 0x99, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0B)

    def _loc_EE0F(): pass

    label('loc_EE0F')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_EED1',
    )

    ChrPlayAnimeClipSeq(0xFFFB, 0x00, 'AniBtlCrucifixion', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '')
    OP_38(0xFFFB, 0x00, 0x00, 'EraseEquip')
    OP_38(0xFFFB, 0x00, 0x01, 'AniBtlCrucifixion')
    SetChrFace(0x03, 0xFFFB, 'B', 'F', '', '#b', '0')
    PlayEffect(0xFFFE, (0xFF, 0x99, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0B)

    def _loc_EED1(): pass

    label('loc_EED1')

    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraCtrl(0x07, 0x00BF)

    # OP_3B(0x32, (0xFF, 0x1B6D, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)

    PlayVoice(0x90AE)

    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFF9, 0x00000020)
    Fade(0x65, 200, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPosByTarget(0xFFFE, '', -4.43, 2.72, -9.37, 0)
    CameraRotateByTarget(0xFFFE, '', 0x03, -7.0, 24.0, -3.0, 0, 0x01)
    CameraSetDistance(13.3, 0)
    CameraCtrl(0x14, 0x02, 0xFFFE, '', -4.43, 3.03, -9.37, 1000)
    CameraRotateByTarget(0xFFFE, '', 0x02, -8.0, 25.0, -3.0, 1000, 0x01)
    CameraCtrl(0x05, 0x02, 11.3, 1000)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_08', 0x00, 0x00, 0x00, 0x00, 0x00, -2.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_08a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    SetChrFace(0x03, 0xFFFE, '1', '2', '', '#b', '0')
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_09', 0x00, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    CameraCtrl(0x02, 0x02, -3.23, 4.39, 1.91, 1000)
    CameraCtrl(0x04, 0x02, -18.0, 24.0, -3.0, 1000, 0x01)
    Sleep(333)
    SetChrFace(0x03, 0xFFFE, '2', '6J737JJ6', '2', '2', '0')
    PlayEffect(0xFFFE, (0xFF, 0x92, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x04)
    OP_3B(0x00, (0xFF, 0x8F2E, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x13F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 4.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x03E8, 0x012C, 0x0000, 0x03E8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_5E(0x00, 0x0000, 0.8, 0x0096, 0x00FA, 0x00C8, 1.0, 0xF011, 0.0, 1.0, 0.0)
    WaitAnimeClip(0xFFFE, 0.0, 0x00)
    PlayChrAnimeClip(0xFFFE, 'BTL_S_CRAFT00_09a', 0x01, 0x00, 0x00, 0x00, 0x00, 0.2, -1.0, -1.0, -1.0, 0x00, 0x00)
    CameraCtrl(0x07, 0x00BF)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000040)
    ChrPhysicsCtrl(0x00, 0xFFFE, 0x00000020)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000040)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x00000020)
    Fade(0x65, 500, 1.0, 0x0000)
    Fade(0xFE, 0)
    CameraSetPos(0.38, 5.3, 4.03, 0)
    CameraRotate(358.0, 10.0, 0.0, 0, 0x01)
    CameraSetDistance(20.3, 0)
    CameraCtrl(0x0B, 0x03, 40.0, 0x0000)
    CameraSetPos(1.0, 5.07, 4.51, 4000)
    CameraRotate(343.0, 35.0, -5.0, 4000, 0x01)
    ChrTargetsIterReset(0x01, 0xFFFE)
    OP_3B(0x00, (0xFF, 0x13EC, 0x0), 0.8, (0xFF, 0x3E8, 0x0), 0.0, 1.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0BB8, 0x0258, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8F31, 0x0), 0.6, (0xFF, 0x3E8, 0x0), 0.0, 1.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    def _loc_F2AD(): pass

    label('loc_F2AD')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_F2D5',
    )

    ChrTurnDirection(0xFFFB, 0xFFFE, 0.0, -1.0)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_F2AD')

    def _loc_F2D5(): pass

    label('loc_F2D5')

    Sleep(800)

    ChrTargetsIterReset(0x01, 0xFFFE)
    kisin = ChrCreateTempChar(1, 0xFFFF, 'C_ROB004', 'rob500')
    ChrSetPhysicsFlags(kisin, 0x00000040)
    ChrSetPhysicsFlags(kisin, 0x00000020)
    ChrSetPhysicsFlags(kisin, 0x00000200)

    ChrSetPosByTarget(kisin, 0xFFFF, 0.0, 0.0, 4.0, 0.0, 0x02, 0x00)
    ChrTurnDirection(kisin, 0xFFFB, 0.0, -1.0)

    ChrClearPhysicsFlags(kisin, 0x00000040)
    ChrClearPhysicsFlags(kisin, 0x00000020)
    ChrSetRGBA(kisin, 1.0, 1.0, 1.0, 0.0, 0x0000, 0x03)
    Sleep(500)

    OP_3B(0x00, (0xFF, 0x7737, 0x0), 0.3, (0xFF, 0x1F4, 0x0), 0.0, 2.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x7613, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, -2.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    PlayEffect(0xFFFE, (0xFF, 0x8E, 0x0), kisin, 0x00020003, (0xDD, 'NODE_CENTER'), (0xEE, 0.0, 0x0), (0xEE, -5.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), 0xFF)
    PlayEffect(0xFFFE, (0xFF, 0x8F, 0x0), kisin, 0x00000103, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), (0xEE, 0.0, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x72)
    Sleep(750)

    ChrSetRGBA(kisin, 1.0, 1.0, 1.0, 0.7, 500, 0x03)
    Sleep(1000)

    ChrTargetsIterInit(0x00)
    ChrTargetsIterReset(0x01, 0xFFFE)
    EffectCtrl(0x0F, 0xFFFE, 0x0099, 0x01)
    PlayEffect(0xFFFE, (0xFF, 0x9A, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0C)
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_F397',
    )

    PlayEffect(0xFFFE, (0xFF, 0x9A, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0C)

    def _loc_F397(): pass

    label('loc_F397')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_F3FE',
    )

    PlayEffect(0xFFFE, (0xFF, 0x9A, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0C)

    def _loc_F3FE(): pass

    label('loc_F3FE')

    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    If(
        (
            (Expr.PushReg, 0x1),
            (Expr.PushLong, 0x0),
            Expr.Gtr,
            Expr.Return,
        ),
        'loc_F465',
    )

    PlayEffect(0xFFFE, (0xFF, 0x9A, 0x0), 0xFFFB, 0x00000003, (0xDD, 'NODE_HEAD'), (0xEE, 0.0, 0x0), (0xEE, -0.18000000715255737, 0x0), (0xEE, -0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), (0xEE, 1.0, 0x0), 0x0C)

    def _loc_F465(): pass

    label('loc_F465')

    PlayVoice(0x1B6D)
    Sleep(500)

    PlayChrAnimeClip(kisin, 'evk1001', 0x00, 0x01, 0x00, 0x00, 0x00, -2.0, 166.667, 167.667, -1.0, 0x00, 0x00)
    OP_3B(0x00, (0xFF, 0x760D, 0x0), 0.7, (0xFF, 0x0, 0x0), 0.0, -4.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x759D, 0x0), 0.5, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(1000)

    PlayEffect2(0xFFFE, 0x93, kisin, 3, '', 0.0, 0.0, -3.0, 0.0, 0.0, 0.0, 3.0, 3.0, 3.0, 0x05)
    OP_3B(0x00, (0xFF, 0x8F2E, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)

    PlayEffect(0xFFFE, (0xFF, 0x9B, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 6.5, 0x0), (0xEE, 0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), 0x0D)
    Sleep(1500)
    OP_3B(0x32, (0xFF, 0x1B6E, 0x0), 1.0, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(1800)

    PlayChrAnimeClip(kisin, 'evk1001', 0x00, 0x01, 0x00, 0x00, 0x00, -2.0, 167.667, 168.633, -1.0, 0x00, 0x00)

    # floor
    PlayEffect2(0xFFFE, 0x95, kisin, 3, '', 0.0, 0.0, -3.0, 0.0, 0.0, 0.0, 2.0, 2.0, 2.0, 0x07)

    # dash
    PlayEffect2(0xFFFE, 0x96, kisin, 3, '', -0.25, 0.5, 0.0, 0.0, 0.0, 0.0, 3.0, 3.0, 3.0, 0x08)

    OP_3B(0x00, (0xFF, 0x8F62, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, -1.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8F66, 0x0), 0.5, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x05DC, 0x012C, 0x0000, 0x05DC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    Sleep(100)

    StopEffect(0xFFFE, 0x05, 0x01)

    ChrSetPosByTargetAsync(kisin, 0xFFFF, -30.0, 30.0, -80.0, 12, 0x02, 0x00)
    OP_3B(0x00, (0xFF, 0x10F8, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x8FA6, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 3.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)

    def cb():
        ChrClearAbnormalCondition(0xFFFB, AbnormalCondition.MagicReflect | AbnormalCondition.PhysicalReflect | AbnormalCondition.CraftGuard)
        ChrClearAbnormalCondition2(0xFFFB, AbnormalCondition2.AbsoluteReflect | AbnormalCondition2.ProtectionAgainstAll)
        ChrSetAbnormalCondition(0xFFFB, AbnormalCondition.Deathblow, 0x000000FF, 0x000000FF, 0x00)

    ForEachTarget(cb)

    Sleep(800)

    PlayEffect(0xFFFE, (0xFF, 0x9C, 0x0), 0xFFFF, 0x00000000, (0xDD, ''), (0xEE, 0.0, 0x0), (0xEE, 6.5, 0x0), (0xEE, 0.20000000298023224, 0x0), 0.0, 0.0, 0.0, (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), (0xEE, 1.5, 0x0), 0x0E)
    OP_3B(0x01, (0xFF, 0x13EC, 0x0), (0xFF, 0x3E8, 0x0))
    OP_3B(0x01, (0xFF, 0x8F31, 0x0), (0xFF, 0x3E8, 0x0))
    OP_3B(0x00, (0xFF, 0x8F2D, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    OP_3B(0x00, (0xFF, 0x114A, 0x0), 0.8, (0xFF, 0x0, 0x0), 0.0, 0.0, 0x0000, 0xFFFF, 0.0, 0.0, 0.0, 0.0, '', 0x04B0, 0x012C, 0x0000, 0x04B0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000)
    CameraCtrl(0x0A, 0.25, 0.25, 0.0, 0x0064, 0x07D0, 0x0064, 0x0000, 0x0000, 0x00)
    OP_3B(0xFF, 0.7, 0.9, 1.5)

    Fade(0x65, 100, 1.0, 0x0000)
    Fade(0xFE, 0)
    ChrPhysicsCtrl(0x00, kisin, 0x00000040)
    ChrPhysicsCtrl(0x00, kisin, 0x00000020)

    Sleep(500)
    Fade(0x03, 2000, 1.0, 0x0000)
    Fade(0xFF, 0, 0x0000)
    PlayChrAnimeClip(0xFFFE, 'BTL_WAIT', 0x01, 0x00, 0x00, 0x00, 0x00, 0.0, -1.0, -1.0, -1.0, 0x00, 0x00)
    ReleaseEffect(0xFFFE, 0x90)
    ReleaseEffect(0xFFFE, 0x91)
    ReleaseEffect(0xFFFE, 0x92)
    ReleaseEffect(0xFFFE, 0x93)
    ReleaseEffect(0xFFFE, 0x94)
    ReleaseEffect(0xFFFE, 0x95)
    ReleaseEffect(0xFFFE, 0x96)
    ReleaseEffect(0xFFFE, 0x97)
    ReleaseEffect(0xFFFE, 0x98)
    ReleaseEffect(0xFFFE, 0x99)
    ReleaseEffect(0xFFFE, 0x9A)
    ReleaseEffect(0xFFFE, 0x9B)
    ReleaseEffect(0xFFFE, 0x9C)
    ReleaseEffect(0xFFFE, 0x9D)
    ReleaseEffect(0xFFFE, 0x8E)
    ReleaseEffect(0xFFFE, 0x8F)
    WaitForThreadExit(0xFFFE, 0x02)
    WaitForThreadExit(0xFFFE, 0x03)
    Call(ScriptId.Current, 'BtlDefaultFace')
    ChrAnimeClipCtrl(0x05, 0xFFFE, 'C_CHR033_SC1', '')
    ChrPhysicsCtrl(0x01, 0xFFFE, 0x000002A0)
    ChrPhysicsCtrl(0x01, 0xFFF9, 0x000002A0)
    OP_38(0xFFF9, 0x00, 0x01, 'ShowEquip')
    ChrDeleteTempChar(0xFFFF)
    ChrSetRGBA(0xFFFE, 1.0, 1.0, 1.0, 1.0, 0x0000, 0x03)
    ChrSetRGBA(0xFFF9, 1.0, 1.0, 1.0, 1.0, 0x0000, 0x03)
    ChrTargetsIterReset(0x01, 0xFFFE)
    def _loc_F6F9(): pass

    label('loc_F6F9')

    If(
        (
            (Expr.PushReg, 0x1),
            Expr.Return,
        ),
        'loc_F722',
    )

    OP_38(0xFFFB, 0x00, 0x00, 'ShowEquip')
    ChrTargetsIterNext(0xFFFE)

    ExecExpressionWithReg(
        0x01,
        (
            (Expr.PushLong, 0x1),
            Expr.Sub2,
            Expr.Return,
        ),
    )

    Jump('loc_F6F9')

    def _loc_F722(): pass

    label('loc_F722')

    BattleCtrl(0x6C, 0x0001)
    Sleep(1)
    Call(ScriptId.BtlCom, 'AniBtlSCraftFinish')

    Return()
