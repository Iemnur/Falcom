//====================================================================
//ステージトラップスクリプト
//[14023][大鉄塔－武器③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev41210.txt参照

//■ローカルフラグ
// 100 中ボス警報
// 101 中ボス出現
// 105 ④敵エリア
// 107 ⑥敵エリア
// 109 ⑦ボタンスイッチを押した
#TREASURE_CH	48
#Fx_TREASURE	2320	//☆020アノマロカリス

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(63,0)
	SE(65,0)

//■地形
	set_obj2("mo41000",	 5, 3,     0, 900,  0,   180) //鉄塔縁↓
	set_obj2("mo41000",	 4, 4,   900,   0,  0,    90) //鉄塔縁→
	set_obj2("mo41000",	 6, 4,  -900,   0,  0,   270) //鉄塔縁←
	set_obj2("mo41000",	 5, 5,     0,-900,  0,     0) //鉄塔縁↑

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 3, 4,   -50,   0,  0,		 90,  0102, 6,"K0_1;")		//①エントリ 武器②
	set_obj("@ob40010a", 3, 4,   100,   0,  0,		 90)						//①階段下（塔）
	set_chr(190,1300,	 3, 4,   100,   0,  0,		  0,    90, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 4, 3,     0,-225,  0,		  0,  0201, 6,"K0_14029;")	//②エントリ 武器終
	set_obj("@ob40020a", 4, 3,     0,-225,  0,		  0)						//②アーチ（塔）
	set_chr(109,622,	 4, 3,     0,-225,  0,		  0,     0, 0,";")			//②ゴール用天使
	set_chr(191,1400,	 4, 3,     0,-225,  0,		  0,     0, 0,";")			//アーチ（ダミー）

	// チェックポイント
	set_chr( 95,990,	 5, 5,     0,-900,  0,		  0,070602, 6,"k5_0")
	set_chr( 96,990,	 5, 3,     0, 900,  0,		180,070602, 6,"k6_0")
	set_chr( 97,990,	 6, 4,  -900,   0,  0,		270,070206, 6,"k7_0")
	set_chr( 98,990,	 4, 4,   900,   0,  0,		 90,070206, 6,"k8_0")

	set_chr( 53,500,	 3, 5,   400,   0,  0,		  8,   270, 6,";")	//③扉（塔） 一通
	set_chr( 54,500,	 4, 6,     0,-900,  0,		  6,     0, 0,";")	//④扉（塔） 開放
	set_chr( 55,500,	 5, 6,     0,-900,  0,		  6,     0, 0,";")	//⑤扉（塔） 開放
	set_chr( 56,500,	 5, 2,     0, 900,  0,		  6,     0, 0,";")	//⑥扉（塔） 開放
	set_chr( 57,500,	 6, 2,     0, 900,  0,		  6,     0, 0,";")	//⑦扉（塔） 開放
	set_chr( 58,500,	 7, 4,   900, 350,  0,		  6,     0, 0,";")	//⑧扉（塔） 開放
	set_chr( 59,500,	 7, 4,  -400,   0,  0,		  6,    90, 0,";")	//⑨扉（塔） 開放
	set_chr( 60,500,	 7, 5,  -400,   0,  0,		  7,    90, 0,";")	//⑩扉（塔） 閉鎖

//■スイッチ・看板
	set_chr(151,672,	 5, 4,     0,-800,  0,		  0,   180, 6,"<EV_JUMP1>") //①ジャンプ台
	set_chr(152,672,	 5, 4,     0, 800,  0,		  0,     0, 6,"<EV_JUMP2>") //②ジャンプ台
	set_chr(153,672,	 5, 4,   800,   0,  0,		  0,   270, 6,"<EV_JUMP3>") //③ジャンプ台
	set_chr(154,672,	 5, 4,  -800,   0,  0,		  0,    90, 6,"<EV_JUMP4>") //④ジャンプ台
	set_chr(155,672,	 7, 3,   900, 400,  0,		  0,   180, 6,"<EV_JUMP5>") //⑤ジャンプ台
	set_chr(156,658,	 7, 4,   550,  50,  0,		  0,   270, 0,";")	//⑧中ボス看板
	set_chr(157,650,	 2, 4,   600,   0,  0,		  2,     0, 0,";"); //⑨苗床

	if ( !F2104 )
	{
		set_chr( 69,636,	 2, 4,   600,   0, 10,		  3,     0, 0,";")					//⑨風船 ⑩扉を開け③敵が出現
		set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M0?69 SF2104;")//風船割った
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2104 WT?5 O1_18 WT?10 C0_53 WT?20 M4_53 WT?60 C0_0;")//
	}
	else
	{
		set_chr( 69,636,	 2, 4,   600,   0, 10,		  0,     0, 0,";")					//⑨風船 ⑩扉を開け③敵が出現
	}


	if ( !F2105 )
	{
	// 初回
		set_chr( 70,570,	 8, 3,  -250, 450,  0,		  6,     0, 5,"SF2105;")	// ⑦ボタンスイッチ ⑦移動床小と⑧移動床小が出現
		set_chr(170,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2105 M5_70 O1_18 WT?10 C0_75 WT?20 O1_1318 V4_75 V4_76 #8_75 WT?30 C0_0;")//⑦ボタンスイッチを押す
	}
	else
	{
	// 押され
		set_chr( 70,570,	 8, 3,  -250, 450,  0,		  7,     0, 5,";")	// ⑦ボタンスイッチ ⑦移動床小が出現
		set_chr(170,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"V4_75 V4_76;")//⑦ボタンスイッチを押す
	}


//■ハニワ・壷
	if ( !F2170 )
	{
		set_chr( 40,802,	 2, 3,   900, 200,  0,		  2,    45, 0,"I_$$$1 SF2170 V4_140;")	//①壷
		set_chr(140,811,	 2, 3,   900, 200,  0,		 -1,    45, 0,";")
	}
	else
	{
		set_chr(140,811,	 2, 3,   900, 200,  0,		  0,    45, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 6, 6,  -100,   0,  0,		  2,     0, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 6, 6,  -100,   0,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 6,  -100,   0,  0,		  0,     0, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,802,	 4, 2,   100,   0,  0,		  2,   135, 0,"I_$$$1 SF2172 V4_142;")	//③壷
		set_chr(142,811,	 4, 2,   100,   0,  0,		 -1,   135, 0,";")
	}
	else
	{
		set_chr(142,811,	 4, 2,   100,   0,  0,		  0,   135, 0,";")
	}


	if ( !F2173 )
	{
		set_chr( 43,634,	 8, 3,    50,   0,  0,		  2,    90, 0,"I_US01 SF2173 V4_143;")	//④ハニワ
		set_chr(143,812,	 8, 3,    50,   0,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(143,812,	 8, 3,    50,   0,  0,		  0,    90, 0,";")
	}


	if ( !F2174 )
	{
		set_chr( 44,802,	 8, 4,  -200, 450,  0,		  2,   270, 0,"I_$$$1 SF2174 V4_144;")	//⑤壷
		set_chr(144,811,	 8, 4,  -200, 450,  0,		 -1,   270, 0,";")
	}
	else
	{
		set_chr(144,811,	 8, 4,  -200, 450,  0,		  0,   270, 0,";")
	}


	if ( !F2175 )
	{
		set_chr( 45,802,	 6, 4,  -300,-300,  0,		  2,   270, 0,"I_$$$1 SF2175 V4_145;")	//⑥壷
		set_chr(145,811,	 6, 4,  -300,-300,  0,		 -1,   270, 0,";")
	}
	else
	{
		set_chr(145,811,	 6, 4,  -300,-300,  0,		  0,   270, 0,";")
	}


	if ( !F2176 )
	{
		set_chr( 46,802,	 6, 4,  -300, 300,  0,		  2,   270, 0,"I_$$$1 SF2176 V4_146;")	//⑦壷
		set_chr(146,811,	 6, 4,  -300, 300,  0,		 -1,   270, 0,";")
	}
	else
	{
		set_chr(146,811,	 6, 4,  -300, 300,  0,		  0,   270, 0,";")
	}


//■宝箱
	set_chr( 49,626,	 4, 4,  -100, 100,  0,		  0,   270,10,"!F2945 I_SLOT SF2945 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2945 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	if( !Fx_TREASURE )
		set_chr( TREASURE_CH,561,	 6, 5,  -100,   0,  0,     6,   270,20,"<TK_TREASURE>;")
	else
		set_chr( TREASURE_CH,561,	 6, 5,  -100,   0,  0,     7,   270, 0,";")


//■罠・障害物
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	if ( !F2190 )
	{
		set_chr( 65,810,	 7, 3,   200, 450,  0,		  2,     0, 0,";"); //①大砲
		set_chr(165,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F65 I_$$$2 SF2190;");
	}

	set_chr( 72,809,	 7, 3,   900, 800,  0,		  3,     0, 0,"") //②トゲ床

	set_chr( 73,808,	 2, 4,   900,-300,  0,		  3,     0, 8,"(X2_-600 Y2_-600 X2_600 Y2_600);")	//⑤トゲ球
	set_chr( 74,808,	 2, 4,   300, 300,  0,		  3,     0, 8,"(X2_600 Y2_600 X2_-600 Y2_-600);")	//⑥トゲ球

	set_chr( 75,677,	 7, 3,   900, 175,175,		 -1,     0, 0,"Z1_-75;")	//⑦移動床小
	set_chr( 76,677,	 7, 3,   900, 800,175,		 -1,     0, 0,"Z1_-75;")	//⑦移動床小


	if ( !F2140 )
		set_chr(110,630,	 5, 5,   300,   0,  0,		  2,     0, 0,"I_FFF1 SF2140;")	//⑩樽
	else
		set_chr(110,630,	 5, 5,   300,   0,  0,		  2,     0, 0,"I_$$$1;")	//⑩樽


	if ( !F2191 )
	{
		set_chr( 66,810,	 8, 5,  -200,-200,  0,		  2,     0, 0,";"); //⑬大砲
		set_chr(166,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F66 I_$$$2 SF2191;");
	}

	set_chr(114,623,	 5, 4,     0,   0,  0,		  2,     0, 0,"") //⑮ガスコンロa
	set_chr(115,660,	 5, 4,     0,   0,-95,		  4,     0, 0,";")	//⑮プロペラ移動床

	set_chr(116,623,	 5, 3,  -400, 400,  0,		  2,     0, 0,"") //⑯ガスコンロb

	set_chr(117 627,	 5, 3,  -175, 400,  0,		  0,   270, 0,";")	//柵小b1
	set_chr(118 627,	 5, 3,  -400, 175,  0,		  0,   180, 0,";")	//柵小b2

	set_chr(119,623,	 4, 4,   400,-400,  0,		  2,     0, 0,"") //⑰ガスコンロc

	set_chr(120 627,	 4, 4,   400,-175,  0,		  0,     0, 0,";")	//柵小c1
	set_chr(121 627,	 4, 4,   175,-400,  0,		  0,    90, 0,";")	//柵小c2

	set_chr(124,628,	 3, 4,  -575,   0,  0,		  0,    90, 0,";")	//柵大d3

	 set_chr(125,698,	 7, 3,   250, 210,  0,		  0,     0, 0,";")	//柵中e1
	set_chr(126,627,	 7, 3,   680, 395,  0,		  0,    90, 0,";")	//柵小e2
	set_chr(127,627,	 8, 3,  -680, 395,  0,		  0,    90, 0,";")	//柵小e3
	set_chr(128,698,	 8, 3,  -250, 210,  0,		  0,     0, 0,";")	//柵中e4

	set_chr(130,698,	 7, 4,   250, 210,  0,		  0,     0, 0,";")	//柵中f1
	set_chr(131,627,	 7, 4,   680, 395,  0,		  0,    90, 0,";")	//柵小f2
	set_chr(132,627,	 8, 4,  -680, 395,  0,		  0,    90, 0,";")	//柵小f3
	set_chr(133,698,	 8, 4,  -250, 210,  0,		  0,     0, 0,";")	//柵中f4


//■敵
	if ( !F2100 )
	{
		set_chr(  1,360,	 7, 5,   900,-250,  0,		 -1,   180, 9,"F101 WT?60 V3_99 <EV_BossItemSpawner>;") //①敵a ころにー
		set_chr(  2,215,	 7, 5,   500,-450,  0,		 -1,   180, 9,"F101 WT?20 V2_99;") //①敵b ふれいむ
		set_chr(  3,215,	 7, 5,  1300,-450,  0,		 -1,   180, 9,"F101 WT?10 V2_99;") //①敵c ふれいむ

		set_chr( 80,990,	 7, 5,   900,-500,  0,		  0,070514, 6,"SF100;")//①敵 中ボス部屋 戦闘開始エリア 
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F100 S0_1 WT?120 #6_82;")//警報出現
		set_chr( 82,990,	 7, 5,   850,-600,  0,		  0,072314, 0,"M5_58 SF101;")//中ボス出現
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F1 WT?10 O1_18 SF2100 <EV_NormalBGM> WT?30 C0_60 WT?20 M4_60 M4_58 WT?30 C0_0;")//中ボス戦闘終了

		// 中ボスBGM
		set_chr(160,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(F103 <EV_BossBGM> WT?90 !F101 !F103 <EV_NormalBGM> WT?90);");
		set_chr(161,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F2100 F101 SF103");	// ボスが生きていて、ボス戦闘中ならば103をセット
		set_chr(162,990,	 7, 5,   850,-600,  0,		  0,072314, 6,"!F2100 SF103");		// ボスが生きていて、ボス部屋内ならば103をセット
		set_chr(163,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF103");				// 103をクリア
	}
	else
	{
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_60 M6_58;")
	}

	set_chr(  4,135,	 7, 4,   200, 450,  0,		  2,   270, 0,";")//②敵 おおぐちぼや

	set_chr(  8,103,	 3, 5,   800,   0,500,		 -1,    90, 9,"F2104 WT?35 V1_99;")//③敵a おーが
	set_chr(  9,103,	 4, 5,  -200,   0,500,		 -1,    90, 9,"F2104 WT?55 V1_99;")//③敵b おーが
	set_chr( 10,103,	 4, 5,     0, 450,500,		 -1,   135, 9,"F2104 WT?55 V1_99;")//③敵c おーが

	set_chr( 12,316,	 4, 6,   700,   0,500,		 -1,    45, 9,"F105 WT?5 V1_99;")//④敵a あかじぇりー
	set_chr( 13,316,	 4, 6,   500,   0,500,		 -1,    90, 9,"F105 WT?25 V1_99;")//④敵b あかじぇりー
	set_chr( 14,316,	 4, 6,   900,   0,500,		 -1,   135, 9,"F105 WT?45 V1_99;")//④敵c あかじぇりー
	set_chr( 15,115,	 4, 6,  1100,   0,500,		 -1,   270, 9,"F105 WT?65 V1_99;")//④敵d ころにー
	set_chr( 16,226,	 4, 6,  1300,   0,500,		 -1,    90, 9,"F105 WT?85 V1_99;")//④敵e こぼるとふぁいや

	set_chr( 17,135,	 5, 3,     0,-250,  0,		  2,   270, 0,";")//⑤敵 おおぐちぼや

	set_chr( 21,147,	 5, 2,   450,   0,500,		 -1,   270, 9,"F107 WT?15 V1_99;")//⑥敵a あーけろん
	set_chr( 22,147,	 5, 2,  1300,   0,500,		 -1,    90, 9,"F107 WT?30 V1_99;")//⑥敵b あーけろん
	set_chr( 23,103,	 5, 2,   900, 450,500,		 -1,    90, 9,"F107 WT?45 V1_99;")//⑥敵c おーが

	set_chr( 25,316,	 6, 4,   200,-250,  0,		  2,   270, 0,";")//⑦敵a あかじぇりー
	set_chr( 26,316,	 6, 4,   200, 250,  0,		  2,    90, 0,";")//⑦敵b あかじぇりー

//■イベント

	set_chr( 86,990,	 4, 6,   900,   0,  0,		  0,  0511, 6,"SF105 M5_54 M5_55;")//④敵 戦闘開始エリア 
	set_chr( 87,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F12 F13 F14 F15 F16 WT?10 O1_18 WT?20 C0_55 WT?20 M4_55 M4_54 WT?30 C0_0;")//戦闘終了

	set_chr( 88,990,	 5, 2,   900,   0,  0,		  0,  0511, 6,"SF107 M5_56 M5_57;")//⑥敵 戦闘開始エリア 
	set_chr( 89,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F21 F22 F23 WT?10 O1_18 WT?20 C0_57 WT?20 M4_57 M4_56 WT?30 C0_0;")//戦闘終了


//■場面固有設定
	// 塔の柵の色
	color2(117, 100,85,85, 0,0,0)
	color2(118, 100,85,85, 0,0,0)

	color2(120, 100,85,85, 0,0,0)
	color2(121, 100,85,85, 0,0,0)

	color2(122, 100,85,85, 0,0,0)
	color2(123, 100,85,85, 0,0,0)
	color2(124, 100,85,85, 0,0,0)

	color2(125, 100,85,85, 0,0,0)
	color2(126, 100,85,85, 0,0,0)
	color2(127, 100,85,85, 0,0,0)
	color2(128, 100,85,85, 0,0,0)

	color2(130, 100,85,85, 0,0,0)
	color2(131, 100,85,85, 0,0,0)
	color2(132, 100,85,85, 0,0,0)
	color2(133, 100,85,85, 0,0,0)
}

//--------------------------------------------------------------------
EV_JUMP1
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	31,	0,-2000,0,	400)
	jump(PLAYER2,2,	31,	0,-2000,0,	400)
	jump(PET,2,	31,	0,-2000,0,	400)
}

//--------------------------------------------------------------------
EV_JUMP2
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	31,	0,2000,0,	400)
	jump(PLAYER2,2,	31,	0,2000,0,	400)
	jump(PET,2,	31,	0,2000,0,	400)
}

//--------------------------------------------------------------------
EV_JUMP3
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	31,	-2000,0,0,	400)
	jump(PLAYER2,2,	31,	-2000,0,0,	400)
	jump(PET,2,	31,	-2000,0,0,	400)
}

//--------------------------------------------------------------------
EV_JUMP4
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	31,	2000,0,0,	400)
	jump(PLAYER2,2,	31,	2000,0,0,	400)
	jump(PET,2,	31,	2000,0,0,	400)
}

//--------------------------------------------------------------------
EV_JUMP5
{
	//	ch,typ	tim,xyz		高さ
	jump(PLAYER1,2,	37,	0,-2600,0,	450)
	jump(PLAYER2,2,	37,	0,-2600,0,	450)
	jump(PET,2,	37,	0,-2600,0,	450)
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_BossBGM
{
	stop_BGM(30)
	wait(30)
	BGM(35)
}

//--------------------------------------------------------------------
EV_NormalBGM
{
	stop_BGM(30)
	wait(30)
	BGM(24)
}

//--------------------------------------------------------------------
EV_BossItemSpawner
{
	set_chr(164,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F1 I_FFF3 I_FFF3 I_FFF3;");
	chr_equip_chr(164, 1,"csp", 100,	0,0,0,	0,0,0);
}

#EndScriptTable
//====================================================================

