//====================================================================
//ステージトラップスクリプト
//[14032][大鉄塔－ボス②]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev42310.txt参照

//■ローカルフラグ
// 100 ⑤敵が出現

#WOODBOX_CH		49
#IT_WOODBOX		216		//○216爆弾
#NUM_WOODBOX	3

#TREASURE_CH	48
#Fx_TREASURE	2342	//☆042ロボ１号の手

#TREASURE2_CH	48
#Fx_TREASURE2	2346	//☆046ロボ１６号の手

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(63,0)
	SE(65,0)

//■地形
	set_obj("obx0554",	 4, 4,   100,-100,  0,	 0) //毒沼大
	set_obj("obx0554",	 6, 4,  -100, 100,  0,	 0) //毒沼大
	set_obj("obx0554",	 5, 5,  -100,-100,  0,	 0) //毒沼大

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 6, 2,  -150,   0,  0,		 90,  0102, 6,"K0_1;")		//①エントリ ボス①
	set_obj("@ob40010a", 6, 2,     0,   0,  0,		 90)						//①階段下（塔）
	set_chr(190,1300,	 6, 2,	   0,   0,  0,		  0,    90, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 6, 6,     0,   0,  0,		  0,  0201, 6,"K0_0;")		//②エントリ ボス③
	set_obj("@ob40000a", 6, 6,     0,   0,  0,		  0)						//②階段上（塔）
	set_chr(191,1301,	 6, 6,	   0,   0,  0,		  0,     0, 0,";")			//階段上（ダミー）

	set_chr( 50,500,	 5, 6,     0,-900,  0,		  8,     0, 6,";")	//③扉（塔）一通
	set_chr( 51,500,	 5, 6,     0, 900,  0,		  3,     0, 6,";")	//④扉（塔）自由
	set_chr( 52,500,	 5, 2,   300,   0,  0,		  8,    90, 6,";")	//⑤扉（塔）一通

	set_chr( 53,500,	 4, 4,  -975,   0,  0,		  7,    90, 0,";")	//⑥扉（塔）閉鎖
	set_chr( 54,500,	 4, 4, -1150,   0,  0,		  7,    90, 0,";")	//⑦扉（塔）閉鎖
	set_chr( 55,500,	 4, 4, -1325,   0,  0,		  7,    90, 0,";")	//⑧扉（塔）閉鎖


	set_chr( 31,666,	 8, 4,     0,   5,  0,		  2,    90, 0,"") //④的a
	set_chr( 32,666,	 5, 5,  -375,-375,  0,		  2,   315, 0,"") //④的b
	set_chr( 33,666,	 4, 3,   425, 425,  0,		  2,     0, 0,"") //④的c
	
	if ( !F2110 )
	{
		set_chr(131,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M2!31 SF2110 WT?10 O1_18 C0_53 WT?20 M4_53 WT?30 C0_0;")
	}
	else
	{
		MOT(31, 3, 0 )
		MOT(53, 6, 0 )
	}


	if ( !F2111 )
	{
		set_chr(132,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M2!32 SF2111 WT?10 O1_18 C0_54 WT?20 M4_54 WT?30 C0_0;")
	}
	else
	{
		MOT(32, 3, 0 )
		MOT(54, 6, 0 )
	}


	if ( !F2112 )
	{
		set_chr(133,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M2!33 SF2112 WT?10 O1_18 C0_55 WT?20 M4_55 WT?30 C0_0;")
	}
	else
	{
		MOT(33, 3, 0 )
		MOT(55, 6, 0 )
	}

//	set_chr( 33,666,	 4, 3,  -190,-190,-25,		  2,   315, 0,"") //④的c
//	set_chr( 33,666,	 4, 3,  -235,-235,275,		  2,   315, 0,"") //④的c
//	set_chr( 33,666,	 4, 3,   425, 425,  0,		  2,   315, 0,"") //④的c


//■宝箱
	if ( !Fx_432Bomb1 )
		set_chr( WOODBOX_CH,562,	 6, 4,   450,-450,  0,		 6,     0,20,"<TK_WOODBOX_X> <EV_SetGetBomb1>;")	//③木箱
	else
		set_chr( WOODBOX_CH,562,	 6, 4,   450,-450,  0,		 7,     0, 0,";")	//③木箱


	if ( GW_LV_PLATE==0 )
	{
		if( !Fx_TREASURE )
			set_chr( TREASURE_CH,561,	 3, 4,   100,   0,  0,		 6, 270,20,"<TK_TREASURE>;")
		else
			set_chr( TREASURE_CH,561,	 3, 4,   100,   0,  0,		 7, 270, 0,";")
	}
	else
	{
		if( !Fx_TREASURE2 )
			set_chr( TREASURE2_CH,561,	 3, 4,   100,   0,  0,		 6, 270,20,"<TK_TREASURE2>;")
		else
			set_chr( TREASURE2_CH,561,	 3, 4,   100,   0,  0,		 7, 270, 0,";")
	}


//■罠・障害物
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
// ポイント切り替えタイミング													                      1                            2                            3                                     4                            5                            6         
	set_chr( 61,808,	 5, 3,   200,   0,  0,		  3,   180, 8,"F2102 (X4_3400 M2_59 T6_59 Y4_-3600 X4_-1800 M4_58 T6_58 Y4_1800 X4_-3600 Y4_-1800 M3_59 T2_59 X4_5400 Y4_3600 M4_58 T4_58 X4_-5400 Y4_-1800 M2_59 T4_59 X4_3600 Y4_-1800 M3_58 T0_58 X4_-3600 Y4_3600 X4_2000);") //①トゲ球
	set_chr( 62,660,	 5, 3,     0,   0,100,		  4,   180, 8,"F2102 (X4_3600 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_1800);") //②プロペラ移動床
	set_chr( 63,660,	 5, 3,  -350,   0, 50,		  4,   180, 8,"F2102 (X4_3950 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_1450);") //③プロペラ移動床
	set_chr( 64,660,	 5, 3,  -700,   0,100,		  4,   180, 8,"F2102 (X4_4300 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_1100);") //④プロペラ移動床
	set_chr( 65,660,	 5, 3, -1050,   0, 50,		  4,   180, 8,"F2102 (X4_4650 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_0750);") //⑤プロペラ移動床
	set_chr( 66,660,	 5, 3, -1400,   0,100,		  4,   180, 8,"F2102 (X4_5000 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_0400);") //⑥プロペラ移動床
	if ( !F2190 )
	{
		set_chr( 67,810,	 5, 3,     0,   0,190,		  2,   180, 8,"F2102 (X4_3600 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_1800);") //⑦大砲
		set_chr(167,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F67 I_$$$2 SF2190;");
		chr_equip_chr(167,67,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}
	if ( !F2191 )
	{
		set_chr( 68,810,	 5, 3, -1400,   0,190,		  2,   180, 8,"F2102 (X4_5000 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_0400);") //⑧大砲
		set_chr(168,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F68 I_$$$2 SF2191;");
		chr_equip_chr(168,68,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}

	if ( !F2130 )
		set_chr( 70,630,	 8, 4,  -900,   0,  0,		  2,    60, 0,"I_FFF1 SF2130;")	//⑩樽
	else
		set_chr( 70,630,	 8, 4,  -900,   0,  0,		  2,    60, 0,"I_$$$1;")	//⑩樽


	if ( !F2185 )
		set_chr( 71,631,	 7, 4,  -350,-300,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1 SF2185;") //⑪爆弾タル
	else
		set_chr( 71,631,	 7, 4,  -350,-300,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1;") //⑪爆弾タル


	if ( !F2186 )
		set_chr( 72,631,	 6, 5,   300, 350,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1 SF2186;") //⑫爆弾タル
	else
		set_chr( 72,631,	 6, 5,   300, 350,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1;") //⑫爆弾タル


	if ( !F2187 )
		set_chr( 73,631,	 5, 4,  -300, 350,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1 SF2187;") //⑬爆弾タル
	else
		set_chr( 73,631,	 5, 4,  -300, 350,  0,		  2,     0, 0,"I_BBB1 I_BBB1 I_BBB1;") //⑬爆弾タル


	if ( !F2131 )
		set_chr( 74,630,	 6, 7,  -400,-400,  0,		  2,   300, 0,"I_FFF1 SF2131;")	//⑭樽
	else
		set_chr( 74,630,	 6, 7,  -400,-400,  0,		  2,   300, 0,"I_$$$1;")	//⑭樽

//■スイッチ・看板
	set_chr( 56,636,	 5, 3,  -350,   0,150,		  4,   180, 8,"F2102 (X4_3950 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_1450);") //①風船
	set_chr( 57,636,	 5, 3, -1050,   0,150,		  4,   180, 8,"F2102 (X4_4650 Y4_-3600 X4_-1800 Y4_1800 X4_-3600 Y4_-1800 X4_5400 Y4_3600 X4_-5400 Y4_-1800 X4_3600 Y4_-1800 X4_-3600 Y4_3600 X4_0750);") //②風船
	set_chr( 58,655,	 4, 4,  -430,   0,  0,		  4,   270, 0,";")	//③順路案内
	set_chr( 59,655,	 6, 5,     0, 300,  0,		  2,   270, 0,";")	//④順路案内

	set_chr( 60,665, 5, 2,     0, -75,  0,		  2,     0, 8,"M3?99 SF2102;")	//⑤ゴング

	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
		F_set(2102)
	}
	if ( !F2102 )
	{
		set_chr(160,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M2!60 WT?10 M4_52 WT?45 SF2102;")//発車 ⑤コング
		set_chr(161,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2102 WT?08 O1_18;")	// ゴング初回
	}
	else
	{
		MOT( 52, 6, 1 )
	}


//■ハニワ・壷
	if ( !F2160 )
	{
		set_chr( 40,634,	 3, 5,     0,   0,  0,		  3,     0, 0,"I_US01 SF2160 V4_140 <EV_AttachOff140>;")	//①ハニワ
		set_chr(140,812,	 3, 5,     0,   0,  0,		 -1,     0, 0,";")
		chr_equip_chr( 40,67,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
		chr_equip_chr(140,67,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}


	if ( !F2161 )
	{
		set_chr( 41,634,	 5, 3,     0,   0,  0,		  3,     0, 0,"I_US01 SF2161 V4_141 <EV_AttachOff141>;")	//②ハニワ
		set_chr(141,812,	 5, 3,     0,   0,  0,		 -1,     0, 0,";")
		chr_equip_chr( 41,68,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
		chr_equip_chr(141,68,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}


	if ( !F2162 )
	{
		set_chr( 42,802,	 7, 4,  -350, 300,  0,		  2,    50, 0,"I_$$$1 SF2162 V4_142;")	//③壷
		set_chr(142,811,	 7, 4,  -350, 300,  0,		 -1,    50, 0,";")
	}
	else
	{
		set_chr(142,811,	 7, 4,  -350, 300,  0,		  0,    50, 0,";")
	}


	if ( !F2163 )
	{
		set_chr( 43,802,	 6, 5,  -300, 350,  0,		  2,   100, 0,"I_$$$1 SF2163 V4_143;")	//④壷
		set_chr(143,811,	 6, 5,  -300, 350,  0,		 -1,   100, 0,";")
	}
	else
	{
		set_chr(143,811,	 6, 5,  -300, 350,  0,		  0,   100, 0,";")
	}


	if ( !F2164 )
	{
		set_chr( 44,802,	 5, 4,   300, 350,  0,		  2,   150, 0,"I_$$$1 SF2164 V4_144;")	//⑤壷
		set_chr(144,811,	 5, 4,   300, 350,  0,		 -1,   150, 0,";")
	}
	else
	{
		set_chr(144,811,	 5, 4,   300, 350,  0,		  0,   150, 0,";")
	}


//■敵
	set_chr( 1,226,		 4, 3,     0,   0,  0,		  2,     0, 0,";")//①敵 ふぁいやこぼると
	set_chr( 2,226,		 7, 3,     0,   0,  0,		  2,    90, 0,";")//②敵 ふぁいやこぼると
	set_chr( 3,212,		 4, 5,     0,   0,  0,		  2,   270, 0,";")//③敵 いふりーと
	set_chr( 4,225,		 7, 5,     0,   0,  0,		  2,   180, 0,";")//④敵 ひのとり

	set_chr( 5,131,		 5, 6,     0,   0,500,		 -1,   180, 8,"F100 V1_99;") //⑤敵 すたんぴーど

//■イベント
	set_chr( 80,990,	 5, 6,     0,   0,  0,		  0,  0511, 6,"SF100;")//⑤敵 戦闘開始エリア 

	if ( !F2103 )
	{
		set_chr( 82,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M0?56 M0?57 WT?10 SF2103  #3_56 #3_57 #3_61 #3_62 #3_63 #3_64 #3_65 #3_66 #3_67 #3_68  O1_18 WT?10 C0_50 WT?20 M4_50 WT?30 C0_0  #8_56 #8_57 #8_61 #8_62 #8_63 #8_64 #8_65 #8_66 #8_67 #8_68 ;")//風船割り待ち ③扉開く
	}
	else
	{
		MOT( 56, 0, 1)
		MOT( 57, 0, 1)
		MOT( 50, 6, 1)
	}
	

//■場面固有設定
}

//--------------------------------------------------------------------
EV_SetGetBomb1
{
	F_set(Fx_432Bomb1)
}
 
//--------------------------------------------------------------------
EV_AttachOff140
{
	chr_equip_off(140)
	jump( 140,3, 24,-1,-1,0, 150)
}

//--------------------------------------------------------------------
EV_AttachOff141
{
	chr_equip_off(141)
	jump( 141,3, 24,-1,-1,0, 150)
}
 
#EndScriptTable
//====================================================================

