//====================================================================
//ステージトラップスクリプト
//[13032][森－ボス②]
//====================================================================

#ScriptTable

#BOSS 		1
#BOSSSW 	55

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev32313.txt参照

//■ローカルフラグ
// 100 中ボス警報
// 101 中ボス出現
// 102 中ボス取り巻きザコが出現1
// 103 中ボスBGM管理
// 104 中ボス取り巻きザコが出現2
// 105 ⑧敵が出現
// 108 フットスイッチ

#TREASURE_CH	49
#Fx_TREASURE	2330	//☆030肉食竜の前足

#TREASURE2_CH	49
#Fx_TREASURE2	2338	//☆038角竜の前足

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(73,0)//鳥3
	SE(74,0)//鳥4
	SE(62,0)//虫

//■地形
	set_obj2("mp32003",   4, 4,  -450, 450,  0,	 0) //↑
	set_obj2("mp32013",   4, 4,   450, 450,  0,	 0) //↑
	set_obj2("mp32163",   4, 4,  -450,-1350, 0,	 0) //

	set_obj2("mp32023",   3, 6,  -450,-450,  0,	 0) //↓
	set_obj2("mp32033",   3, 6,   450,-450,  0,	 0) //↓
	set_obj2("mp32163",   3, 6,  -450, 450, 0,	 0) //

	set_obj2("mp32003",   1, 5,   450,-450,  0,	 0) //←
	set_obj2("mp32023",   1, 5,   450, 450,  0,	 0) //←
	set_obj2("mp32163",   1, 5, -1350,-450, 0,	 0) //

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段
	set_chr( 90,990,	10, 5,     0,   0,  0,		 90,  0102, 6,"K0_1;")		//①エントリ 
	set_obj("@obx0013c",10, 5,     0,   0,  0,		 90)						//①階段入（森紫）
	set_chr(190,1300,	10, 5,	   0,   0,  0,		  0,    90, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 2, 6,     0,   0,  0,		180,  0201, 6,"K0_0;")		//②エントリ 
	set_obj("@obx0023c", 2, 6,     0,   0,  0,		180)						//②階段出（森紫）
	set_chr(191,1301,	 2, 6,	   0,   0,  0,		  0,   180, 0,";")			//階段上（ダミー）

	set_chr( 50,501,	 8, 5,   900,   0,  0,		  6,    90, 0,";")	//③扉（森） 開放 中ボス
	set_chr( 51,501,	 6, 4,  -900,   0,  0,		  6,    90, 0,";")	//④扉（森） 開放 中ボス
	set_chr( 52,501,	 7, 4,     0,-900,  0,		  7,     0, 0,";")	//⑤扉（森） 閉鎖 中ボス奥
	set_chr( 53,501,	 4, 5,   900,   0,  0,		  6,    90, 6,";")	//⑥扉（森） 自由
	set_chr( 55,501,	 6, 6,  -900,   0,  0,		  7,    90, 0,";")	//⑦扉（森） 閉鎖

//■スイッチ・看板

	set_chr( 56,658,	 9, 5,  -600, 225,  0,		  0,   270, 0,"") //①中ボス看板
	set_chr( 57,655,	 9, 5,  -600,-225,  0,		  4,     0, 0,";")	//②順路案内

	set_chr( 58,649,	 5, 6,   600,   0,  0,		  2,    90, 0,"") //③フットスイッチ
	set_chr(158,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(F108 M4_55 WT?15 !F108 M5_55 WT?15);")//扉
	set_chr(159,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF108 M2!58 SF108")	//③フットスイッチ


//■ハニワ・壷

	if ( !F2160 )
	{
		set_chr( 40,802,	 8, 6,     0,   0,  0,		  2,   270, 0,"I_$$$1 SF2160 V4_140;")	//①壷
		set_chr(140,811,	 8, 6,     0,   0,  0,		 -1,   270, 0,";")
	}
	else
	{
		set_chr(140,811,	 8, 6,     0,   0,  0,		  0,   270, 0,";")
	}


	if ( !F2161 )
	{
		set_chr( 41,802,	 6, 5,   150,-150,  0,		  2,     0, 0,"I_$$$1 SF2161 V4_141;")	//②壷
		set_chr(141,811,	 6, 5,   150,-150,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 5,   150,-150,  0,		  0,     0, 0,";")
	}


	if ( !F2162 )
	{
		set_chr( 42,802,	 6, 6,     0,-700,  0,		  2,     0, 0,"I_$$$1 SF2162 V4_142;")	//③壷
		set_chr(142,811,	 6, 6,     0,-700,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(142,811,	 6, 6,     0,-700,  0,		  0,     0, 0,";")
	}


	if ( !F2163 )
	{
		set_chr( 43,802,	 3, 5,     0, 900,  0,		  2,     0, 0,"I_$$$1 SF2163 V4_143;")	//④壷
		set_chr(143,811,	 3, 5,     0, 900,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(143,811,	 3, 5,     0, 900,  0,		  0,     0, 0,";")
	}



//■宝箱
	if ( GW_LV_PLATE==0 )
	{
		if( !Fx_TREASURE )
			set_chr( TREASURE_CH,561,	 7, 3,     0,   0,  0,  	 6,   0,20,"<TK_TREASURE>;")
		else
			set_chr( TREASURE_CH,561,	 7, 3,     0,   0,  0,  	 7,   0, 0,";")
	}
	else
	{
		if( !Fx_TREASURE2 )
			set_chr( TREASURE2_CH,561,	 7, 3,     0,   0,  0,  	 6,   0,20,"<TK_TREASURE2>;")
		else
			set_chr( TREASURE2_CH,561,	 7, 3,     0,   0,  0,  	 7,   0, 0,";")
	}



//■罠・障害物
	set_chr(110,627,	 6, 5,     0,500,  0,		  0,     0, 0,";")	//柵小

	
	if ( !F2130 )
		set_chr( 65,630,	 7, 6,     0,   0,  0,		  2,   180, 0,"I_$$$1 SF2130;")	//①樽
	else
		set_chr( 65,630,	 7, 6,     0,   0,  0,		  2,   180, 0,"I_$$$1;")	//①樽


	if ( !F2131 )
		set_chr( 66,630,	 6, 7,     0,   0,  0,		  2,    45, 0,"I_FFF1 SF2131;")	//②樽
	else
		set_chr( 66,630,	 6, 7,     0,   0,  0,		  2,    45, 0,"I_$$$1;")	//②樽


	if ( !F2132 )
		set_chr( 67,630,	 4, 5,     0,-900,  0,		  2,    45, 0,"I_$$$1 SF2232;")	//③樽
	else
		set_chr( 67,630,	 4, 5,     0,-900,  0,		  2,    45, 0,"I_$$$1;")	//③樽



//■敵
//  -------      no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	set_chr( 81,990,	 8, 5,     0,   0,  0,		  0,070306, 6,"SF100;")//⑦敵 中ボス部屋 戦闘開始エリアa
	set_chr( 82,990,	 6, 4,     0,   0,  0,		  0,070306, 6,"SF100;")//⑦敵 中ボス部屋 戦闘開始エリアb

	if ( !F2100 )
	{
		set_chr(  1,366,	 7, 4,   450, 450,  0,		-1,    315, 0,";")	//①敵 バタフライ幼虫
		F_set_chr(  1, CF_NO_CLIP2)
		F_set_chr(  1, CF_NO_DROPITEM)


		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F100 S0_1 WT?120 #6_84;")//警報出現
		set_chr( 84,990,	 7, 5,     0,-1100, 0,		  0,074031, 0,"SF101 M5_50 M5_51 SF102 V3_1;")//中ボス出現
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F1 SF104 WT?1 <EV_BossItemSpawner> F2 WT?10 O1_18 SF2100 <EV_NormalBGM> WT?30 #8_86;")//中ボス戦闘終了
		set_chr( 86,990,	 0, 0,     0,   0,  0,		  0,     0, 0,"C0_52 WT?20 M4_50 M4_51 M4_52 WT?30 C0_0;")

		// 中ボスBGM
		set_chr(160,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(F103 <EV_BossBGM> WT?90 !F101 !F103 <EV_NormalBGM> WT?90);");
		set_chr(161,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"!F2100 F101 SF103");	// ボスが生きていて、ボス戦闘中ならば103をセット
		set_chr(162,990,	 7, 5,     0,-1100, 0,		  0,074031, 6,"!F2100 SF103");		// ボスが生きていて、ボス部屋内ならば103をセット
		set_chr(163,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF103");				// 103をクリア
	}
	else
	{
		set_chr( 83,990,	 0, 0,     0,   0,  0,		-1,    315, 0,";")
	}

	set_chr( 11,223,	 7, 5,  -150, -150,  0,		  0,   270, 0,";")//②敵a ぴーまん
	set_chr( 12,223,	 7, 5,   150, -150,  0,		  0,   270, 0,";")//②敵b ぴーまん
	set_chr( 13,223,	 7, 5,  -150,  150,  0,		  0,   270, 0,";")//②敵c ぴーまん
	set_chr( 14,223,	 7, 5,   150,  150,  0,		  0,   270, 0,";")//②敵d ぴーまん

	set_chr( 15,224,	 8, 4,  -300,    0,  0,		  0,   270, 0,";")//③敵a とまとにあん
	set_chr( 16,224,	 8, 4,     0,    0,  0,		  0,   270, 0,";")//③敵b とまとにあん
	set_chr( 17,224,	 8, 4,  -300,  300,  0,		  0,   270, 0,";")//③敵c とまとにあん
	set_chr( 18,224,	 8, 4,     0,  300,  0,		  0,   270, 0,";")//③敵d とまとにあん

	set_chr(  4,219,	 8, 5,  -150,-150,  0,		 -1,   135, 8,"F102 WT?35 V2_99;")//④敵 わーらびっと
	set_chr(  5,218		 8, 5,  -250,-150,  0,		 -1,    70, 8,"F102 WT?40 V2_99;")//⑤敵a すぷらいと
	set_chr(  6,218		 8, 5,  -150,-250,  0,		 -1,   120, 8,"F102 WT?48 V2_99;")//⑤敵b すぷらいと

	set_chr(  7,219,	 6, 4,   150, 150,  0,		 -1,   135, 8,"F102 WT?35 V2_99;")//⑥敵 わーらびっと
	set_chr(  8,218		 6, 4,   250, 150,  0,		 -1,    70, 8,"F102 WT?40 V2_99;")//⑦敵a すぷらいと
	set_chr(  9,218		 6, 4,   150, 250,  0,		 -1,   120, 8,"F102 WT?48 V2_99;")//⑦敵b すぷらいと

	set_chr( 21,150,	 6, 6,  -250,  50,400,		 -1,   270, 8,"F105 WT?10 V1_99;")//⑧敵a あるけにー
	set_chr( 22,150,	 8, 6,   250,   0,400,		 -1,    90, 8,"F105 WT?05 V1_99;")//⑧敵b あるけにー
	set_chr( 23,150,	 8, 6,  -350,-250,400,		 -1,    90, 8,"F105 WT?10 V1_99;")//⑧敵c あるけにー
	set_chr( 24,150,	 8, 6,  -350, 250,400,		 -1,    90, 8,"F105 WT?15 V1_99;")//⑧敵d あるけにー

	set_chr( 29,255,	 5, 5,     0,   0,  0,		  2,    90, 0,";")	//⑨敵 もりこぼると
		chr_equip2( 29,	"EQ_005",	"Bone_RightArm",100,   	0,0,0,	0,25,0);	// 斧
		chr_equip2( 29,	"eq_162",	"Bone_Head",100,		25,0,0,	0,50,-10);	// 笠

	set_chr( 25,124,	 4, 5,  -750, -325,  0,		  2,     0, 0,";")	//⑩敵a けさらん
	set_chr( 26,124,	 3, 5,   750,  325,  0,		  2,   180, 0,";")	//⑩敵b けさらん
	set_chr( 27,124,	 3, 5,  -900,  150,  0,		  2,    90, 0,";")	//⑪敵 けさらん

	set_chr( 31,150,	 7, 4,  -350, 100,400,		 -1,   270, 8,"F104 WT?060 V1_99;")//⑫敵a あるけにー
	set_chr( 32,150,	 7, 4,     0, 500,400,		 -1,    90, 8,"F104 WT?120 V1_99;")//⑫敵b あるけにー
	set_chr( 33,150,	 7, 4,  -350, 900,400,		 -1,    90, 8,"F104 WT?180 V1_99;")//⑫敵c あるけにー


//■イベント
	set_chr( 80,990,	 7, 6,     0,   0,  0,		  0,070909, 6,"SF105;")//⑧敵エリア
}

//--------------------------------------------------------------------
EV_BossItemSpawner
{
	set_chr(164,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2 I_FFF3 I_FFF3 I_FFF3;");
	chr_equip_chr(164, 2,"Bone_Spine1", 100,	0,0,0,	0,0,0);
	F_set_chr(  2, CF_NO_CLIP2)
}

//--------1------------------------------------------------------------
EV_BossBGM
{
	stop_BGM(30)
	wait(30)
	BGM(35)
}

//--------------------------------------------------------------------
EV_NormalBGM
{
	stop_BGM(30)
	wait(30)
	BGM(18)
}

#EndScriptTable
//====================================================================

