//====================================================================
//ステージトラップスクリプト
//[16010][山－入口分岐]
//====================================================================

#ScriptTable

#DAIGORO	2

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(51,0)


//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 5, 8,     0,   0,  0,		180,  0601, 6,"K1_16000;")	//①エントリ 入口へ

	set_chr( 91,990,	 5, 3,     0,   0,  0,		  0,  0201, 6,"K0_16011;")	//②エントリ 本道へ
	set_obj("@ob60031a", 5, 3,     0,   0,  0,		  0)						//②アーチ（山）
	set_chr(190,1400,	 5, 3,	   0,   0,  0,		  0,     0, 0,";")			//アーチ（ダミー）

	set_chr( 50,620,	 5, 6,  -400,   0,  0,		  0,   270, 0,";")				//①セーブOBJ

	set_chr( 51,648,	 5, 5,     0,-350,  0,		 17,     0, 0,";")				//①レベルプレート
	color2( 51, 68,75,86, 0,0,0)

	set_chr( 52,654,	 5, 5,  -225,-350,  0,		  2,     0, 0,";")				//①順路案内（メイン）


	if( F4_05_OnVillage2 && !F4_17_InTheEvening			//里についてから夕方まで配置
	{
		set_chr( DAIGORO	,74,-1,-1,  9070,10859,1,	2,270, 20,"<TK_DAIGORO2>")		//ダイゴロー セーブポイント付近
		F_set_chr(DAIGORO,CF_NO_MOVE)
	}


//■イベント
	if(GW_ENTRY_EVENT==3)
	{
		workG(GW_ENTRY_EVENT,SET,0)
		//ダイゴローワープ処理
		EV("EV_16010_WarpEntry")
	}
	else
	if(GW_ENTRY_EVENT==2)
	{
		workG(GW_ENTRY_EVENT,SET,0)
		//スバルと再挑戦
		EV("EV_RootRetry")
	}
	else
	if(GW_ENTRY_EVENT==1)
	{
		workG(GW_ENTRY_EVENT,SET,0)
		//▼隠れ里への道を開く・続き
		EV("EV_4_06_OpenRoad2")
	}

//■場面固有設定
	EFF(4109, 0,0,0,0,100,0)

	EV("EV_SnowFall")
}

//-------------------------------------------------------------------
EV_SnowFall
{
	EFF_chr(4292, 0, 0,100, -1, "charbase0" )
	wait( 50 )
	loop
}

//====================================================================
//=== イベント処理 ===================================================
//====================================================================
//──────────────────────────────
//▼隠れ里への道を開く・続き
//──────────────────────────────
//　　画面フェードインして、洞窟道内部。
//　　途中に休憩所が置かれているが基本的に短い一本道。
//　　そのまま台詞無しでイベント終了、プレイヤー操作許可。
EV_4_06_OpenRoad2
{
	EV_begin()

	//暗転
	fade_in(100,1,0)
	wait_fade()

//	chr_pos(RAGNA,2249,5500,0,180,2)
//	chr_pos(PARTNER,2371,5408,0,180,2)
	chr_pos(RAGNA,9449,14600,1,180,2)
	chr_pos(PARTNER,9555,14688,1,180,2)

	CAM_return(0)

	fade_in(0,30,0)

	EV_end()
}


//--------------------------------------------
//スバルと再挑戦
//--------------------------------------------
EV_RootRetry
{
	EV_begin()

	//暗転
	fade_in(100,1,0)
	wait_fade()

	chr_pos(RAGNA,9492,9657,1,180,2)
	chr_pos(PARTNER,9551,9800,1,180,2)

	CAM_return(0)
	wait(30)

	fade_in(0,50,0)

	EV_end()
}

//---------------------------------------------------------------------
// ダイゴロー　ワープ処理
EV_16010_WarpEntry
{
	EV_begin()

	//暗転
	fade_in(100,1,0)
	wait_fade()
		
	chr_pos(PLAYER1, 9430,10909,1,354,2)
	chr_pos(PLAYER2, 9562,10772,1,357,2)
	chr_pos(PET,     9443,10610,1,345,2)

	CAM_return(0)
	wait(30)
	
	fade_in(0,50,0)
		
	EV_end()
}


#EndScriptTable
//====================================================================

