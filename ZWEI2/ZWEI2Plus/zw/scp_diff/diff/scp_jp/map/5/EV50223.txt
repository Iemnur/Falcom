//====================================================================
//ステージトラップスクリプト
//[15022][城－城内②]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev50213.txt参照

//■ローカルフラグ
// 103 ④敵が出現
// 104 ⑤敵が出現
// 108 ④レバースイッチを押した

#TAKARA_CH	49
#IT_TAKARA	094		//◇094人狼リング

#WOODBOX_CH		48
#IT_WOODBOX		216		//○216爆弾
#NUM_WOODBOX	3

//--------------------------------------------------------------------
INIT
{
//■地形

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 5, 7,     0,-200,  0,		180,  0201, 6,"K0_1;")		//①エントリ 城内①
	set_obj("@ob50523a", 5, 7,     0,-100,  0,		180)						//①階段下（城内）
	set_chr(190,1300,	 5, 7,     0,-100,  0,		  0,   180, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 5, 4,  -750,   0,  0,		270,  0102, 6,"K0_0;")		//②エントリ 城内③
	set_obj("@ob50513a", 5, 4,  -750,   0,  0,		270)						//②階段上（城内）
	set_chr(191,1301,	 5, 4,  -750,   0,  0,		  0,   270, 0,";")			//階段上（ダミー）

	set_chr( 50,503,	 5, 6,     0,-825,  0,		  8,   180, 6,";") //③扉a（城内）一通
	set_chr( 51,503,	 5, 5,     0, 825,  0,		  8,   180, 6,";") //③扉b（城内）一通
	set_chr( 52,503,	 4, 5,     0,-900,  0,		  8,   180, 6,";") //④扉（城内）一通
	set_chr( 53,503,	 6, 5,     0,-900,  0,		  7,     0, 0,";") //⑤扉（城内）閉鎖
	set_chr( 54,503,	 3, 5,     0,-900,  0,		  3,     0, 6,";") //⑥扉（城内）自由
	set_chr( 55,503,	 7, 5,     0,-900,  0,		  3,     0, 6,";") //⑦扉（城内）自由

//■スイッチ・看板

	if ( !F2104 )
	{
	// 初回
		set_chr( 56,570,	 3, 6,  -150,   0,  0,		  6,   270, 5,"M6?99 M5_99 SF2104;")	//①ボタンスイッチ
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2104 O1_18 WT?10 C0_50 WT?20 M4_50 WT?30 C0_0 #0_81 #8_83;")

		// ボタンを押した後
		set_chr( 85,990,	 4, 6,  -900, 150,  0,		  0,  0108, 6,"F2104 SF103;")
	}
	else
	{
	// 押され
		set_chr( 56,570,	 3, 6,  -150,   0,  0,		  7,   270, 8,"M6_50 #0_81 #8_83 SF103;")	//①ボタンスイッチ
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 3,";")
	}


	if ( !F2105 )
	{
	// 初回
		set_chr( 57,570,	 7, 6,   150,   0,  0,		  6,   270, 5,"M6?99 M5_99 SF2105;")	//②ボタンスイッチ
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2105 O1_18 WT?10 C0_51 WT?20 M4_51 WT?30 C0_0 #0_80 #8_82;")

		// ボタンを押した後
		set_chr( 86,990,	 6, 6,   900, 150,  0,		  0,  0108, 6,"F2105 SF104;")
	}
	else
	{
	// 押され
		set_chr( 57,570,	 7, 6,   150,   0,  0,		  7,   270, 8,"M6_51 #0_80 #8_82 SF104;")	//②ボタンスイッチ
		set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 3,";")
	}



	if ( !F2107 )
	{
	// 初回
		set_chr( 58,570,	 5, 3,     0,-350,  0,		  6,     0, 5,"M6?99 M5_99 SF2107;")	//③ボタンスイッチ
		set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2107 O1_18 WT?10 C0_52 WT?20 M4_52 WT?30 C0_0;")
	}
	else
	{
	// 押され
		set_chr( 58,570,	 5, 3,     0,-350,  0,		  7,     0, 3,";")	//③ボタンスイッチ
		set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_52;")
	}


//■罠・障害物
	set_chr( 75,629,	 3, 3,    0,-300,   0,		  0,     0, 8,"(M2_99 WT?45 M3_99 Y7_-2425 M2_99 WT?45 M4_99 Y2_2425)")//②トゲ壁
	set_chr( 76,629,	 7, 3,    0,-300,   0,		  0,     0, 8,"(M2_99 WT?45 M3_99 Y7_-2425 M2_99 WT?45 M4_99 Y2_2425)")//③トゲ壁
//	set_chr( 75,629,	 3, 3,    0,-300,   0,		  0,     0, 8,"(WT?45 Y7_-2425 WT?45 Y2_2425)")//②トゲ壁
//	set_chr( 76,629,	 7, 3,    0,-300,   0,		  0,     0, 8,"(WT?45 Y7_-2425 WT?45 Y2_2425)")//③トゲ壁

	set_chr( 59,571,	 7, 3,   350,-450,  0,		  6,     0,	5,"M!_99 SF108")	//④レバースイッチ
	set_chr(159,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F108 WT?10 #3_75 #3_76 C0_53 WT?20 M4_53 WT?30 C0_0 #8_75 #8_76 ( M6?59 WT?10 M5_53 M7?59 WT?10 M4_53 );")//④レバースイッチ で⑤扉
	if ( !F2135 )
	{
		set_chr(158,990,	 0, 0,     0,   0,  0,		  6,     0,	8,"F108 WT?10 O1_18 SF2135;")
	}


	set_chr( 77,655,	 4, 5,  -350,-350,  0,		  2,   270, 0,";")	//⑤順路案内

//■ハニワ・壷
	if ( !F2160 )
	{
		set_chr( 40,802,	 3, 5,   -75, 650,  0,		  2,   150, 0,"I_$$$1 SF2160 V4_140;")	//①壷
		set_chr(140,811,	 3, 5,   -75, 650,  0,		 -1,   150, 0,";")
	}
	else
	{
		set_chr(140,811,	 3, 5,   -75, 650,  0,		  0,   150, 0,";")
	}


	if ( !F2161 )
	{
		set_chr( 41,802,	 6, 4,  -150,  50,  0,		  2,    15, 0,"I_$$$1 SF2161 V4_141;")	//②壷
		set_chr(141,811,	 6, 4,  -150,  50,  0,		 -1,    15, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 4,  -150,  50,  0,		  0,    15, 0,";")
	}


	if ( !F2162 )
	{
		set_chr( 42,634,	 3, 3,     0,-450,  0,		  2,   300, 0,"I_US01 SF2162 V4_142;")	//③ハニワ
			chr_equip_chr( 42,75,"obx0054", 100, 0,0,0,	-250,25,400);
		set_chr(142,812,	 3, 3,     0,-450,  0,		 -1,   300, 0,";")
			chr_equip_chr(142,75,"obx0054", 100, 0,0,0,	-250,25,400);
	}
	else
	{
		set_chr(142,812,	 3, 3,     0,-450,  0,		  0,   300, 0,";")
			chr_equip_chr(142,75,"obx0054", 100, 0,0,0,	-250,25,400);
	}


	if ( !F2163 )
	{
		set_chr( 43,802,	 6, 3,     0, 375,  0,		  2,    15, 0,"I_$$$1 SF2163 V4_143;")	//④壷
		set_chr(143,811,	 6, 3,     0, 375,  0,		 -1,    15, 0,";")
	}
	else
	{
		set_chr(143,811,	 6, 3,     0, 375,  0,		  0,    15, 0,";")
	}


	if ( !F2164 )
	{
		set_chr( 44,802,	 5, 4,   250,   0,  0,		  2,   215, 0,"I_$$$1 SF2164 V4_144;")	//⑤壷
		set_chr(144,811,	 5, 4,   250,   0,  0,		 -1,   215, 0,";")
	}
	else
	{
		set_chr(144,811,	 5, 4,   250,   0,  0,		  0,   215, 0,";")
	}


//■宝箱
	if(IT_TAKARA<1)
		set_chr( TAKARA_CH,560,	    6, 4,   150,   0,  0,	   6,     0,20,"<TK_TAKARA>;")		//①宝箱（並）
	else
		set_chr( TAKARA_CH,560,	    6, 4,   150,   0,  0,	   7,     0, 0,";")		//①宝箱（並）



	if ( !Fx_522Bomb1 )
		set_chr( WOODBOX_CH,562,	5, 7,  -300, 350,  0,	   6,   270,20,"<TK_WOODBOX_X><EV_SetGetBomb1>;")	//②木箱
	else
		set_chr( WOODBOX_CH,562,	5, 7,  -300, 350,  0,	   7,   270, 0,";")	//③木箱


//■罠・障害物
	set_chr(110,627,	 3, 6,     0,-900,  0,		  0,     0, 0,";")	// 柵小
	set_chr(111,627,	 7, 6,     0,-900,  0,		  0,     0, 0,";")	// 柵小
	color2(110, 100,63,100, 0,0,0)	// 城内の柵の色
	color2(111, 100,63,100, 0,0,0)	// 城内の柵の色

	if ( !F2185 )
	{
		set_chr( 70,810,	 5, 6,  -300,-300,  0,		  2,     0, 0,";")	//④大砲
		set_chr(170,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F70 I_$$$2 SF2185;");
	}

	if ( !F2186 )
	{
		set_chr( 71,810,	 5, 6,   300,-300,  0,		  2,     0, 0,";")	//⑤大砲
		set_chr(171,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F71 I_$$$2 SF2186;");
	}

	if ( !F2187 )
	{
		set_chr( 72,810,	 5, 6,  -750, 150,  0,		  2,     0, 0,";")	//⑥大砲
		set_chr(172,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F72 I_$$$2 SF2187;");
	}

	if ( !F2188 )
	{
		set_chr( 73,810,	 5, 6,   750, 150,  0,		  2,     0, 0,";")	//⑦大砲
		set_chr(173,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F73 I_$$$2 SF2188;");
	}

	if ( !F2130 )
	{
		set_chr( 74,632,	 5, 6,     0, 800,  0,		  2,     0, 0,"I_$$$1 SF2130;") //⑧バリケード
	}


//■敵
	set_chr(  4,309,	 5, 5,     0,-250,  0,		 -1,     0, 8,"F2104 F2105 V1_99;") //①敵 おーがにくす
	// ↑表まで走り出させる

	set_chr(  6,260,	 3, 6,   600,  50,  0,		  2,   270, 0,";") //②敵 ぱさらん
		chr_equip2(  6,	"eq_104",	"Bone_Hips",	90,		0,0,0,	0,0,0);

	set_chr(  8,227,	 7, 6,  -600,  50,  0,		  2,    90, 0,";") //③敵 こぼるとないと

	set_chr( 10,227,	 4, 6,   400, 100,500,		 -1,    90, 8,"F103 V1_99;") //④敵a こぼるとないと

	set_chr( 12,260,	 6, 6,  -400, 100,500,		 -1,   270, 8,"F104 V1_99;") //⑤敵 ぱさらん
		chr_equip2( 12,	"eq_104",	"Bone_Hips",	90,		0,0,0,	0,0,0);

	set_chr( 14,220,	 4, 5,     0,-550,  0,		  2,     0, 0,";") //⑥敵 でゅらはん
		chr_equip2( 14,	"eq_151",	"Bone_LeftHand",	100,		0,180,180,	 -15,30,-30);
		chr_equip2( 14,	"eq_006",	"Bone_RightHand",	100,		45,0,-45,	 0,0,0);

	set_chr( 15,220,	 6, 5,     0,-550,  0,		  2,     0, 0,";") //⑦敵 でゅらはん
		chr_equip2( 15,	"eq_150",	"Bone_LeftHand",	100,		-15,180,180,	 -15,30,-30);
		chr_equip2( 15,	"eq_011",	"Bone_RightHand",	100,		45,60,-45,	 0,0,0);

	set_chr( 21,220,	 4, 3,     0, 300,  0,		  2,   180, 0,";") //⑩敵 でゅらはん
		chr_equip2( 21,	"eq_151",	"Bone_LeftHand",	100,		-15,180,180,	-15,30,-30);
		chr_equip2( 21,	"eq_001",	"Bone_RightHand",	100,		45,60,-45,	 0,0,0);


	set_chr( 24,227,	 4, 4,  -275,-275,  0,		 -1,   330, 8,"F2107 WT?01 V1_99;") //⑫敵b こぼるとないと
	set_chr( 25,220,	 4, 4,   350, 150,150,		 -1,    60, 8,"F2107 WT?25 V2_99;") //⑫敵d でゅらはん
		chr_equip2( 25,	"eq_150",	"Bone_LeftHand",	100,		0,180,180,	-15,30,-30);

//■イベント

	if ( !F2106 )
	{
		set_chr( 82,990,	 0, 0,     0,   0,  0,		  0,     0, 0,"F2104 WT?10 C0_50 WT?20 M4_50 <EV_ArmorOgreGoAhead> WT?60 C0_0 SF2106;")
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 0,"F2105 WT?10 C0_51 WT?20 M4_51 <EV_ArmorOgreGoAhead> WT?60 C0_0 SF2106;")
	}
	else
	{
		set_chr( 82,990,	 0, 0,     0,   0,  0,		  0,     0, 0,";")
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 0,";")
	}
	

//■場面固有設定

}

//--------------------------------------------------------------------
EV_ArmorOgreGoAhead
{
	MOT(4, 1, 15)	//走り
	move(4,2,35, 0,-2000,0, 100)
	rot_chr(4, 5, 90)	// 90は入口階段。そちらの方向なので。
	wait_move(4)
}

//--------------------------------------------------------------------
EV_SetGetBomb1
{
	F_set(Fx_522Bomb1)
}

#EndScriptTable
//====================================================================

