//====================================================================
//ステージトラップスクリプト
//[12032][水没神殿－ボス②]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev22311.txt参照

//■ローカルフラグ
// 100 ①レバースイッチを押した
// 102 ①敵が出現
// 103 ②敵が出現

#TAKARA_CH	49
#IT_TAKARA	110		//◇110盗賊の鼻

#WOODBOX_CH		48
#IT_WOODBOX		196		//∴196どら焼き

//--------------------------------------------------------------------
INIT
{
//■地形
	// 滑る床
	set_obj("ob20141a",	 3, 5,     0,   0,  0,    0)
	set_obj("ob20141a",	 4, 5,     0,   0,  0,    0)
	set_obj("ob20141a",	 5, 5,     0,   0,  0,    0)
	set_obj("ob20141a",	 3, 6,     0,   0,  0,    0)
	set_obj("ob20141a",	 4, 6,     0,   0,  0,    0)
	set_obj("ob20141a",	 5, 6,     0,   0,  0,    0)

	//天井から光
    set_obj("mo20031a",	 6, 4,  -200, 200,  0,    0)

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 4, 7,     0,-100,  0,		180,  0201, 6,"K0_1;")	//①エントリ ボス①
	set_obj("@ob22111a", 4, 7,     0,   0,  0,		180)					//①階段下（神殿）
	set_chr(190,1300,	 4, 7,     0,   0,  0,		  0,   180, 0,";")		//階段下（ダミー）

	set_chr( 91,990,	 4, 3,     0,   0,  0,		  0,  0201, 6,"K0_0;")	//②エントリ ボス③
	set_chr(101,1313,	 4, 3,     0,   0,  0,		  0,     0, 0,";")		//②階段上（神殿）
//?	set_obj("@ob22121a", 4, 3,     0,   0,  0,		  0)					//②階段上（神殿）

	set_chr( 50,1206,	 4, 4,     0,   0,  0,		  8,   180, 0,";")	//③扉（神殿３） 一通

//■スイッチ・看板
	set_chr( 60,669,	 5, 6,     0, 350,  0,		  3,   180, 0,";") //①扇風機
	set_chr( 61,669,	 5, 5,   350,   0,  0,		  3,    90, 0,";") //②扇風機
	set_chr( 62,669,	 3, 5,     0,-350,  0,		  3,     0, 0,";") //④扇風機
	set_chr( 63,669,	 3, 6,  -350,   0,  0,		  3,   270, 0,";") //③扇風機

	if ( !F2102 )
	{
	// 初回
		set_chr( 55,570,	 2, 7,    75, -75,  0,		  6,   315, 5,"M6?99 M5_99 SF2102")//⑤ボタンスイッチ
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2102 O1_18 WT?10 C0_50 WT?20 M4_50 WT?30 C0_0;")//⑤ボタンスイッチ押下
	}
	else
	{
	// 押され
		set_chr( 55,570,	 2, 7,    75, -75,  0,		  7,   315, 3,";")//⑤ボタンスイッチ
		set_chr( 80,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_50;")//⑤ボタンスイッチ押下
	}

//■ハニワ・壷

	if ( !F2160 )
	{
		set_chr( 40,634,	 4, 6,     0,-550, 25,		  2,     0, 0,"I_US01 SF2160 V4_140;")	//①ハニワ
		set_chr(140,812,	 4, 6,     0,-550, 25,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(140,812,	 4, 6,     0,-550, 25,		  0,     0, 0,";")
	}


	if ( !F2161 )
	{
		set_chr( 41,802,	 2, 4,   -75, -75,  0,		  2,   290, 0,"I_$$$1 SF2161 V4_141;")	//②壷
		set_chr(141,811,	 2, 4,   -75, -75,  0,		 -1,   290, 0,";")
	}
	else
	{
		set_chr(141,811,	 2, 4,   -75, -75,  0,		  0,   290, 0,";")
	}


	if ( !F2162 )
	{
		set_chr(  6,137,	 3, 6,  -300,-300, 25,		  2,     0, 0,"D1_42 <EV_Show142>;")	//④敵 つぼみみっく

		set_chr( 42,802,	 3, 6,  -300,-300, 25,		  6,     0, 0,"SF2162;")	//③壷
		chr_equip_chr( 42, 6, "charbase0", 100,	0,0,0,		0, 0,0);
		F_set_chr( 42, CF_NO_CSP)
		F_set_chr(  6, CF_NO_MINIMAP)

		set_chr(142,811,	 3, 6,  -300,-300, 25,		  0,     0, 8,"M2!6 <EV_ActiveteMimic6>;")
		chr_equip_chr(142, 6, "charbase0", 100,	0,0,0,		0,0,0);
		color(142,-1);
	}
	else
	{
		set_chr(142,811,	 3, 6,  -300,-300, 25,		  0,     0, 0,";")
	}




//■宝箱
	if(IT_TAKARA<0)
		set_chr( TAKARA_CH,560,	     4, 5,     0, 595, 15,  	   6,  180,20,"<TK_TAKARA>;")		//②宝箱（並）
	else
		set_chr( TAKARA_CH,560,      4, 5,     0, 595, 15,  	   7,  180, 0,";")		//②宝箱（並）


	if ( !Fx_232Food1 )
		set_chr( WOODBOX_CH,562,	 6, 7,    25,  35,  0,     6,   135,20,"<TK_WOODBOX><EV_SetGetFood1>;")	//②木箱
	else
		set_chr( WOODBOX_CH,562,	 6, 7,    25,  35,  0,     7,   135, 0,";")	//②木箱


//■罠・障害物

	if ( !F2130 )
	{
		set_chr( 72,637,	 4, 6,  -100,-900,  0,		  2,     0, 8,"M0?99 SF2130;") //①氷の柱a
	}

	if ( !F2131 )
	{
		set_chr( 73,637,	 4, 6,   100,-900,  0,		  2,     0, 8,"M0?99 SF2131;") //①氷の柱b
	}

	if ( !F2124 )
		set_chr( 66,630,	 6, 4,     0,   0,  0,		  2,     0, 0,"I_FFF1 SF2124;")	//②樽
	else
		set_chr( 66,630,	 6, 4,     0,   0,  0,		  2,     0, 0,"I_$$$1;")	//②樽


//■敵
	set_chr(  2,250,	 3, 6,     0,-900,400,		 -1,   180, 8,"F102 V1_99;")//①敵 こぼるてす
	set_chr(  3,251,	 5, 6,     0,-900,400,		 -1,     0, 8,"F103 V1_99;")//②敵 ばっとさん

	set_chr(  5,134,	 5, 5,     0,   0,  0,		  0,     0, 0,";")//③敵 いわがえる
	set_chr(  7,134,	 3, 5,     0,   0,  0,		  0,   180, 0,";")//⑤敵 いわがえる
	set_chr(  8,127,	 5, 6,     0,   0,  0,		  0,   270, 0,";")//⑥敵 がにめで

	set_chr( 18,217,	 6, 4,   -75,  75,  0,		  0,    90, 0,";")//⑨敵 あくあ
	set_chr( 19,217,	 6, 4,    75, -75,  0,		  0,    75, 0,";")//⑨敵 あくあ

	F_set_chr( 2,CF_NO_CLIP2)
	F_set_chr( 3,CF_NO_CLIP2)

	F_set_chr( 5,CF_NO_CLIP2)
	F_set_chr( 6,CF_NO_CLIP2)
	F_set_chr( 7,CF_NO_CLIP2)
	F_set_chr( 8,CF_NO_CLIP2)

	F_set_chr(18,CF_NO_CLIP2)
	F_set_chr(19,CF_NO_CLIP2)

//■イベント

	set_chr( 81,990,	 5, 6,     0,-350,  0,		  0,040413, 7,"y9_98")	// ①扇風機-縦風
	set_chr( 82,990,	 4, 5,   600,   0,  0,		  0,043004, 7,"x1_98")	// ②扇風機-横風
	set_chr( 83,990,	 3, 5,     0, 350,  0,		  0,040413, 7,"y1_98")	// ③扇風機-縦風
	set_chr( 84,990,	 4, 6,  -600,   0,  0,		  0,043004, 7,"x9_98")	// ④扇風機-横風

	set_chr( 86,990,	 3, 6,     0,-900,  0,		  0,  0518, 6,"SF102;")//①敵エリア 
	set_chr( 87,990,	 5, 6,     0,-900,  0,		  0,  0518, 6,"SF103;")//②敵エリア 

//■場面固有設定
	map_color(100,100,100,0);//R,G,B, time 100%
	map_spotbmp(25);//100%

	EV("EV_GenWind")
}

//--------------------------------------------------------------------
EV_ActiveteMimic6
{
	F_reset_chr(  6, CF_NO_MINIMAP)
}

//--------------------------------------------------------------------
EV_Show142
{
	color(142,15);
	jump(142,3, 25,-1,-1, 15, 75)
}

//--------------------------------------------------------------------
EV_SetGetFood1
{
	F_set(Fx_232Food1)
}

//--------------------------------------------------------------------
EV_GenWind
{
	EFF_chr(21560, 81, 180, 100, 0,"TG1")// ↑
	EFF_chr(21560, 82,  90, 100, 0,"TG1")// ←
	EFF_chr(21560, 83,   0, 100, 0,"TG1")// ↓
	EFF_chr(21560, 84, 270, 100, 0,"TG1")// →
	wait( 15 )

	EFF_chr(21560, 61,  90, 100, 0,"obx0454")// ←
	EFF_chr(21560, 63, 270, 100, 0,"obx0454")// →

	wait( 15 )

	loop
}
CAM_move(5374,-11354,170,0,0)
#EndScriptTable
//====================================================================

