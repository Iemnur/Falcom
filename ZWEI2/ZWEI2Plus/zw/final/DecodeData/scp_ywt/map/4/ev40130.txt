//====================================================================
//ステージトラップスクリプト
//[14013][大鉄塔－メイン③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev40110.txt参照

//■ローカルフラグ
// 100 ①ボタンスイッチを押した
// 101 ②ボタンスイッチを押した
// 102 ③ボタンスイッチを押した

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(63,0)
	SE(65,0)

//■地形
	F_set_chr(PLAYER1, CF_NO_FALL )
	F_set_chr(PLAYER2, CF_NO_FALL )
	F_set_chr(PET, CF_NO_FALL )

	set_obj("mp40160",	 4, 4,     0,   0,-1100,	 0) //歯車
	set_obj("obx0044",	 5, 5,     0,   0,  0,  	 0) //立体交差用橋

	set_obj2("obx001k",	 3, 3,     0,-900,  0,     0) //鉄塔縁↑
	set_obj2("obx001k",	 3, 3,     0, 900,  0,   180) //鉄塔縁↓
	set_obj2("obx001k",	 3, 3,  -900,   0,  0,   270) //鉄塔縁←
	set_obj2("obx001k",	 3, 3,   900,   0,  0,    90) //鉄塔縁→

	set_obj2("obx001k",	 5, 3,  -900,   0,  0,   270) //鉄塔縁←
	set_obj2("obx001k",	 3, 5,     0,-900,  0,     0) //鉄塔縁↑

	set_obj2("obx001k",	 5, 4,  -900,   0,  0,   270) //鉄塔縁←
	set_obj2("obx001k",	 4, 5,     0,-900,  0,     0) //鉄塔縁↑

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉

	set_chr( 90,990,	 3, 3,     0,-150,  0,		180,  0201, 6,"K0_1;")		//①エントリ メイン①
	set_obj("@ob40010a", 3, 3,     0,   0,  0,		180)						//①階段下（塔）
	set_chr(190,1300,	 3, 3,	   0,   0,  0,		  0,   180, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 5, 6,     0, 225,  0,		180,  0201, 6,"K0_14019;")	//②エントリ 中継分岐
	set_obj("@ob40020a", 5, 6,     0, 225,  0,		180)						//②アーチ（塔）
	set_chr(109,622,	 5, 6,     0, 225,  0,		  0,   180, 0,";")			//②ゴール用天使
	set_chr(191,1400,	 5, 6,     0, 225,  0,		  0,   180, 0,";")			//アーチ（ダミー）

	// チェックポイント
	set_chr( 95,990,	 3, 3,   900,   0,  0,		 90,070206, 6,"k5_0")
	set_chr( 96,990,	 3, 3,     0, 900,  0,		180,070602, 6,"k6_0")
	set_chr( 97,990,	 3, 5,     0,-900,  0,		  0,070602, 6,"k7_0")
	set_chr( 98,990,	 4, 5,     0,-900,  0,		  0,070602, 6,"k8_0")
	set_chr( 93,990,	 5, 3,  -900,   0,  0,		270,070206, 6,"k3_0")
	set_chr( 94,990,	 5, 4,  -900,   0,  0,		270,070206, 0,"k4_0")	// ②ボタンスイッチを押して⑤扉が開くと有効化
	set_chr( 99,990,	 3, 3,  -900,   0,  0,		270,070206, 6,"k9_0")
	set_chr(100,990,	 3, 3,     0,-900,  0,		  0,070602, 6,"ka_0")

	set_chr( 52,500,	 5, 5,     0,1000,  0,		   8,    0, 6,";")	//③扉（塔）一通
	set_chr( 53,500,	 6, 5,   900,   0,  0,		   7,  270, 0,";")	//④扉（塔）閉鎖
	set_chr( 54,500,	 5, 4,  -800,   0,  0,		   7,   90, 0,";")	//⑤扉（塔）閉鎖

//■スイッチ・看板
	if ( !F2116 )
	{
		set_chr( 55,570,	 3, 7,     0,   0,  0,		   6,    0, 5,"M6?99 M5_99 SF2116")	//①ボタンスイッチ
		set_chr(155,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"F2116 O1_18 WT?10 C0_53 WT?20 M4_53 WT?30 C0_0;");	// ①ボタンスイッチ押下
	}
	else
	{
		set_chr( 55,570,	 3, 7,     0,   0,  0,		   7,    0, 3,";")	//①ボタンスイッチ
		MOT( 53, 6, 1 )
	}


	if ( !F2117 )
	{
		set_chr( 56,570,	 7, 3,     0,   0,  0,		   6,    0, 5,"M6?99 M5_99 SF2117")	//②ボタンスイッチ
		set_chr(156,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"F2117 O1_18 WT?10 C0_54 WT?20 M4_54 WT?30 C0_0 #6_94;");	// ②ボタンスイッチ押下
	}
	else
	{
		set_chr( 56,570,	 7, 3,     0,   0,  0,		   7,    0, 3,";")	//②ボタンスイッチ
		set_chr(156,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"#6_94;");
		MOT( 54, 6, 1 )
	}


	if ( !F2118 )
	{
		set_chr( 57,570,	 6, 5,     0,   0,  0,		   6,    0, 5,"M6?99 M5_99 SF2118")	//③ボタンスイッチ
		set_chr(157,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"F2118 O1_18 WT?10 C0_52 WT?20 M4_52 WT?30 C0_0;");	// ③ボタンスイッチ押下
	}
	else
	{
		set_chr( 57,570,	 6, 5,     0,   0,  0,		   7,    0, 3,";")	//③ボタンスイッチ
		MOT( 52, 6, 1 )
	}

	set_chr( 58,655,	 5, 4,  -300, 500,  0,		   4,  270, 0,";")	//③順路案内

//■宝箱
	set_chr( 49,626,	 6, 6,     0,   0,  0,		   0,    0,10,"!F2944 I_SLOT SF2944 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2944 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}


//■罠・障害物

	set_chr( 65,659,	 4, 3,   500,   0,-95,		   0,    0, 8,"(WT?50 X2_-1000 WT?50 X2_1000 );") //②移動床大（火）
	set_chr( 66,659,	 3, 4,     0, 500,-95,		   0,    0, 8,"(WT?50 Y2_1000 WT?50 Y2_-1000 );") //③移動床大（火）

	if ( !F2140 )
	{
		set_chr( 67,635,	 4, 3,   500,   0,  0,		   2,   90, 8,"(WT?50 X2_-1000 WT?50 X2_1000 );") //⑨顔の置物
		set_chr(167,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"M0?67 SF2140;")
//		chr_equip_chr(167,67,"body",  100, 0,0,0,	   0, 0,50);
	}
	if ( !F2141 )
	{
		set_chr( 69,635,	 3, 4,     0, 500,  0,		   2,  180, 8,"(WT?50 Y2_1000 WT?50 Y2_-1000 );") //⑩顔の置物
		set_chr(169,990,	 0, 0,     0,   0,  0,		   0,    0, 8,"M0?69 SF2141;")
//		chr_equip_chr(169,69,"body",  100, 0,0,0,	   0, 0,50);
	}

	set_chr(123,628,	 6, 7,     0,-190,  0,		   0,    0, 0,";")	//柵大
	set_chr(124,627,	 6, 7,  -625,-375,  0,		   0,   90, 0,";")	//柵小

	set_chr(125,659,	 4, 4,     0,   0,-95,		  2,     0, 0,";")//移動床大（火）
	set_chr(126,659,	 4, 4,   500,   0,-95,		  2,     0, 0,";")//移動床大（火）
	set_chr(127,659,	 4, 4,     0, 500,-95,		  2,     0, 0,";")//移動床大（火）

	if ( !F2190 )
	{
		set_chr( 75,810,	 3, 5,     0,   0,  0,		   2,    0, 0,"D1_40;"); //④大砲
		set_chr(175,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F75 I_$$$2 SF2190;");
		chr_equip_chr(175,75,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}

	if ( !F2191 )
	{
		set_chr( 76,810,	 5, 3,     0,   0,  0,		   2,    0, 0,"D1_41;"); //⑤大砲
		set_chr(176,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F76 I_$$$2 SF2191;");
		chr_equip_chr(176,76,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}

	if ( !F2192 )
	{
		set_chr( 77,810,	 7, 5,     0,   0,  0,		   2,    0, 0,"D1_42;"); //⑥大砲
		set_chr(177,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F77 I_$$$2 SF2192;");
		chr_equip_chr(177,77,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}

	if ( !F2193 )
	{
		set_chr( 78,810,	 5, 7,     0,   0,  0,		   2,    0, 0,"D1_43;"); //⑦大砲
		set_chr(178,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F78 I_$$$2 SF2193;");
		chr_equip_chr(178,78,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}


//■ハニワ・壷

	if ( !F2170 )
	{
		set_chr( 40,802,	 3, 5,     0,   0,  0,		  2,   300, 0,"I_$$$1 SF2170 V4_140;")	//①壷
		set_chr(140,811,	 3, 5,     0,   0,  0,		 -1,   300, 0,";")
		chr_equip_chr( 40,75,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}
	else
	{
		set_chr(140,811,	 3, 5,     0,   0,  0,		  0,   300, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 5, 3,     0,   0,  0,		  2,   110, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 5, 3,     0,   0,  0,		 -1,   110, 0,";")
		chr_equip_chr( 41,76,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}
	else
	{
		set_chr(141,811,	 5, 3,     0,   0,  0,		  0,   110, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,634,	 7, 5,     0,   0,  0,		  2,    60, 0,"I_US01 SF2172 V4_142;")	//③ハニワ
		set_chr(142,812,	 7, 5,     0,   0,  0,		 -1,    60, 0,";")
		chr_equip_chr( 42,77,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}
	else
	{
		set_chr(142,812,	 7, 5,     0,   0,  0,		  0,    60, 0,";")
	}


	if ( !F2173 )
	{
		set_chr( 43,634,	 5, 7,     0,   0,  0,		  2,   185, 0,"I_US01 SF2173 V4_143;")	//④ハニワ
		set_chr(143,812,	 5, 7,     0,   0,  0,		 -1,   185, 0,";")
		chr_equip_chr(43,78,"obx0574:Layer1(1)",  100, 0,0,0,	0,0,45);
	}
	else
	{
		set_chr(143,812,	 5, 7,     0,   0,  0,		  0,   185, 0,";")
	}


	if ( !F2174 )
	{
		set_chr( 44,802,	 4, 4,     0,   0,  0,		  2,     0, 0,"V1_12 SF2174 V4_144;")	//⑤壷
		set_chr(144,811,	 4, 4,     0,   0,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(144,811,	 4, 4,     0,   0,  0,		  0,     0, 0,";")
	}


//■敵
	set_chr(  1,103,	 6, 7,     0,-850,  0,		   0,     0, 0,";")//①敵 おーが
	set_chr(  2,103,	 4, 5,  -150,   0,  0,		   0,    90, 0,";")//②敵 おーが
	set_chr(  3,103,	 5, 4,     0,-150,  0,		   0,   180, 0,";")//③敵 おーが

	set_chr(  6,147,	 3, 6,   150,   0,  0,		   0,   180, 0,";")//④敵 あーけろん
	set_chr(  7,147,	 6, 3,     0, 150,  0,		   0,    90, 0,";")//⑤敵 あーけろん

	set_chr(  8,103,	 5, 5,     0,   0,320,		   0,   180, 0,";")//⑥敵 おーが

	set_chr( 10,226,	 5, 5,   900,   0,  0,		   0,     0, 0,";")//⑦敵 ふぁいやこぼると
	set_chr( 11,226,	 6, 7,     0,   0,  0,		   0,   180, 0,";")//⑧敵 ふぁいやこぼると

	set_chr( 12,316,	 4, 4,     0,   0,  0,		 -1,    45, 0,";")//⑤敵 あかじぇりー

//■イベント

//■場面固有設定
	// 塔の柵の色
	color2(120, 100,85,85, 0,0,0)
	color2(121, 100,85,85, 0,0,0)
	color2(122, 100,85,85, 0,0,0)

	color2(123, 100,85,85, 0,0,0)
	color2(124, 100,85,85, 0,0,0)

}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

#EndScriptTable
//====================================================================

