//====================================================================
//ステージトラップスクリプト
//[16021][山－武器①]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ
// 2975		フードスロット
// Fx_623Food1 武器③ 飯
// Fx_622Bomb1 武器② 爆弾×3

//■ルートフラグ 2096-2192

// 2100 武器③ 中ボス

// 2101 武器② ⑤ボタンスイッチ
// 2103 武器② コボルトを助けて扉を開けた

// 2130 武器② ⑦樽 飯
// 2131 武器② ⑤岩
// 2132 武器② ⑥パラボラアンテナ

// 2140 武器③ ⑮岩a
// 2141 武器③ ⑮岩b
// 2142 武器③ ⑮岩c

// 2145 武器③ ①壷
// 2145 武器③ ②壷

// 2150 武器① ①壷
// 2151 武器① ②壷
// 2152 武器① ③壷
// 2153 武器① ④壷
// 2154 武器① ⑤ハニワ どれか一個埴輪に

// 2160 武器② ①壷
// 2161 武器② ②壷
// 2162 武器② ③壷
// 2163 武器② ④壷

// 2167 武器③ 大紅白壷
// 2168 武器③ 大紅白壷
// 2169 武器③ 大紅白壷

// 2170 武器③ ①紅白壷↑
// 2171 武器③ ①紅白壷↑
// 2172 武器③ ②紅白壷←
// 2173 武器③ ③紅白壷←
// 2174 武器③ ④紅白壷↓
// 2175 武器③ ⑤紅白壷↓
// 2176 武器③ ⑥紅白壷→
// 2177 武器③ ⑦紅白壷→

// 2180 武器③ ⑧紅白壷↑
// 2181 武器③ ⑨紅白壷↑
// 2182 武器③ ⑩紅白壷←
// 2183 武器③ ⑪紅白壷←
// 2184 武器③ ⑫紅白壷↓
// 2185 武器③ ⑬紅白壷↓
// 2186 武器③ ⑭紅白壷→
// 2187 武器③ ⑮紅白壷→

// 2190 武器③ ⑯紅白壷↑
// 2191 武器③ ⑰紅白壷↑
// 2192 武器③ ⑱紅白壷←
// 2193 武器③ ⑲紅白壷←
// 2194 武器③ ⑳紅白壷↓
// 2195 武器③ ⑳①紅白壷↓
// 2196 武器③ ⑳②紅白壷→
// 2197 武器③ ⑳③紅白壷→

//■ローカルフラグ
// 101 風船を割った
// 104 範囲チェック用ワーク
// 110 雪球とプレイヤーの距離が一定範囲内

#TAKARA_CH	49
#IT_TAKARA	117		//◇117タイプゲーム

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(51,0)

//■地形
	set_obj("obx0044",	 6, 4,     0,   0,  0,	180) //立体交差用橋
	set_obj("obx0044",	 7, 4,     0,   0,  0,	  0) //立体交差用橋
	set_obj("obx0524",	 7, 6,     0,   0,  0,	  0)	//穴大
	set_obj("obx0524",	 8, 6,     0,   0,  0,	  0)	//穴大

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 2, 6,     0,   0,  0,		180,  0201, 6,"K1_10480;")	//①エントリ 星降りの里分岐（昼）
	set_obj("@ob61031a", 2, 6,     0,   0,  0,		180)						//①アーチ（山）
	set_chr(190,1400,	 2, 6,	   0,   0,  0,		  0,   180, 0,";")			//アーチ（ダミー）

	set_chr( 91,990,	 8, 5,     0,   0,  0,		270,  0102, 6,"K0_0;")		//②エントリ 武器②
	set_obj("@ob61021a", 8, 5,     0,   0,  0,		270)						//②階段上（山）
	set_chr(191,1301,	 8, 5,	   0,   0,  0,		  0,   270, 0,";")			//階段上（ダミー）

	// チェックポイント
	set_chr( 95,990,	 7, 6,     0,-900,  0,		180,070602, 6,"k5_0")
	set_chr( 96,990,	 7, 6,     0, 900,  0,		  0,070602, 6,"k6_0")
	set_chr( 97,990,	 8, 6,     0,-900,  0,		180,070602, 6,"k7_0")
	set_chr( 98,990,	 8, 6,     0, 900,  0,		  0,070602, 6,"k8_0")


	set_chr( 50,1207,	 8, 4,  -500,   0,  0,		  6,    90, 0,";")	//③扉（山２）開放
	set_chr( 51,1207,	 9, 3,   500,   0,  0,		  8,   270, 6,";")	//④扉（山２）一通

//■スイッチ・看板
	set_chr( 60,636,	 8, 4,  1000,-350,  0,		  2,   180, 0,";");	//①風船

//■ハニワ・壷

	if ( !F2150 )
	{
		set_chr( 40,802,	 4, 3,  -200,-350,  0,		  2,    60, 0,"I_$$$1 SF2150 V4_140;")	//①壷
		set_chr(140,811,	 4, 3,  -200,-350,  0,		 -1,    60, 0,";")
	}
	else
	{
		set_chr(140,811,	 4, 3,  -200,-350,  0,		  0,    60, 0,";")
	}


	if ( !F2151 )
	{
		set_chr( 41,802,	 6, 4,     0,-200,320,		  2,     0, 0,"I_$$$1 SF2151 V4_141;")	//②壷
		set_chr(141,811,	 6, 4,     0,-200,320,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 4,     0,-200,320,		  0,     0, 0,";")
	}


	if ( !F2152 )
	{
		set_chr( 42,802,	 6, 4,     0, 200,320,		  2,   135, 0,"I_$$$1 SF2152 V4_142;")	//③壷
		set_chr(142,811,	 6, 4,     0, 200,320,		 -1,   135, 0,";")
	}
	else
	{
		set_chr(142,811,	 6, 4,     0, 200,320,		  0,   135, 0,";")
	}


	if ( !F2153 )
	{
		set_chr( 43,802,	 8, 3,    50,  50,  0,		  2,    40, 0,"I_$$$1 SF2153 V4_143;")	//④壷
		set_chr(143,811,	 8, 3,    50,  50,  0,		 -1,    40, 0,";")
	}
	else
	{
		set_chr(143,811,	 8, 3,    50,  50,  0,		  0,    40, 0,";")
	}


	if ( !F2154 )
	{
		set_chr( 44,634,	 9, 5,   350, 350,  0,		  2,   120, 0,"I_US01 SF2154 V4_144;")	//⑤ハニワ
		set_chr(144,812,	 9, 5,   350, 350,  0,		 -1,   120, 0,";")
	}
	else
	{
		set_chr(144,812,	 9, 5,   350, 350,  0,		  0,   120, 0,";")
	}


//■宝箱
	if(IT_TAKARA<0)
		set_chr( TAKARA_CH,560,  7, 4,   0, 0,320,		  6,     0,20,"<TK_TAKARA>;")		//②宝箱（並）
	else
		set_chr( TAKARA_CH,560,  7, 4,   0, 0,320,		  7,     0, 0,";")		//②宝箱（並）


//■罠・障害物
	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
		set_chr( 65,667,	 7, 4,   900,   0,200,		  1,    90, 5,"#8_99 M3_99 D0_66 T2_00 X5_-550 T6_99 X5_1550 <EV_CQ1> T6_99 X5_1900 <EV_CQ1> T4_99 Y5_1900 <EV_CQ1> (T2_99 X5_-2000 <EV_CQ1> T0_99 Y5_-2000 <EV_CQ1> T6_99 X5_2000 <EV_CQ1> T4_99 Y5_2000 <EV_CQ1>);") //①雪球
	}
	else
	{
		set_chr( 65,667,	 7, 4,   900,   0,200,		  1,   270, 5,"#8_99 M3_99 D0_66 T6_99 X5_900 T6_99 X5_1900 <EV_CQ1> T4_99 Y5_1900 <EV_CQ1> (T2_99 X5_-2000 <EV_CQ1> T0_99 Y5_-2000 <EV_CQ1> T6_99 X5_2000 <EV_CQ1> T4_99 Y5_2000 <EV_CQ1>);") //①雪球
	}
	set_chr( 66,991,	 7, 4,   900,   0,  0,		  1,070105, 0,";")


//■敵
	set_chr(  1,273,	 2, 4,    50, 350,400,		  2,   180, 0,";") //⑦敵 やまつつき
	set_chr(  2,273,	 2, 4,   -50, 900,400,		  2,   270, 0,";") //⑦敵 やまつつき

	set_chr(  3,109,	 3, 4,  -250, 250,  0,		  2,     0, 0,";") //①敵 りゅうだんいわ

	set_chr(  4,274,	 4, 5,  -750,-150,  0,		  2,    90, 0,";") //②敵a ゆきおこじょ
	set_chr(  5,109,	 3, 5,   900,   0,  0,		  2,   270, 0,";") //②敵b りゅうだんいわ

	set_chr( 10,144,	 4, 3,  -150,-150,400,		 -1,   315, 8,"F106 V1_99;") //④敵 くまこぷたー
	set_chr( 11,274,	 6, 4,     0,   0,  0,		  2,   180, 0,";") //⑤敵 ゆきおこじょ
	set_chr( 12,231,	 8, 4,  -450,  50,  0,		  2,   270, 0,";") //⑥敵 こどもいえてぃ

	set_chr( 15,144,	 8, 3,   500,1150,  0,		 -2,   215, 0,";") //⑧敵 くまこぷたー
	set_chr( 16,231,	 8, 3,  1550, 450,  0,		 -2,   195, 0,";") //⑧敵 こどもいえてぃ
	set_chr( 17,213,	 8, 3,  1525, 650,  0,		 -2,   235, 0,";") //⑧敵 おとないえてぃ
	set_chr( 18,231,	 8, 3,  1550, 800,  0,		 -2,   260, 0,";") //⑧敵 こどもいえてぃ
//	set_chr( 17,213,	 8, 3,  1625, 650,  0,		 -2,   235, 0,";") //⑧敵 おとないえてぃ
//	set_chr( 18,231,	 8, 3,  1650, 800,  0,		 -2,   260, 0,";") //⑧敵 こどもいえてぃ

	set_chr( 23,231,	10, 4,     0,   0,300,		  2,     0, 0,";") //⑨敵 こどもいえてぃ
	set_chr( 24,144,	 9, 5,   900,   0,  0,		  2,    90, 0,";") //⑩敵 くまこぷたー


//■イベント
	// 宝箱の状態設定
	// #3は「何もしない状態」とする
	set_chr(120,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(F104 #3_49 M6?49 !F104 #2_49);")

	// 主人公の範囲チェック
	set_chr(121,990,	 7, 4,     0,   0,  0,		  6,020405, 6,"M6?49 SF104")
	set_chr(122,990,	 7, 4,   450,   0,  0,		  6,040505, 6,"M6?49 SF104")
	set_chr(123,990,	 7, 4,  -450,   0,  0,		  6,040505, 6,"M6?49 SF104")
	set_chr(125,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF104")

	// 風船割りと扉開き
	set_chr( 80,990,	 9, 3,   300, 100,  0,		  0,     0, 8,"M0?60 WT?10 O1_18 SF101 <EV_WakeUpYeties> WT?10 C0_99 WT?20 M4_51  WT?60 C0_0;")

	// ④敵
	set_chr( 81,990,	 4, 3,     0,   0,  0,		  0,  1111, 6,"SF106;")

	// 雪球距離
	set_chr(180,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF110 Ly?6500 SF110")

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++

//■場面固有設定
	// 風船と雪球
	F_set_chr(60,CF_NO_CLIP2)
	F_set_chr(65,CF_NO_CLIP2)

	EV("EV_SnowFall")
}

//-------------------------------------------------------------------
EV_SnowFall
{
	EFF_chr(4292, 0, 0,100, -1, "charbase0" )
	wait( 50 )
	loop
}

//--------------------------------------------------------------------
EV_WakeUpYeties
{
	MOT(15, 96, 15) //⑧敵 くまこぷたー
	MOT(16, 96, 15) //⑧敵 こどもいえてぃ
	MOT(17, 96, 15) //⑧敵 おとないえてぃ
	MOT(18, 96, 15) //⑧敵 こどもいえてぃ
}

//--------------------------------------------------------------------
EV_CQ1
{
	if (F110)
	{
		CAM_quake("4646")
	}
}

#EndScriptTable
//====================================================================

