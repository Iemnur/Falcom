//====================================================================
//ステージトラップスクリプト
//[17023][異－ボス１③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev71212.txt参照

#FR_722_Rumor		2100	//裁判の噂を聞いた
#FR_722_Stop		2101	//裁判を止めた
#FR_722_Kill		2102	//被告を殺した
#FR_722_Mode2		2103	//花のほうでクリア

//■ローカルフラグ
//x 101 ⑤敵攻撃され
// 104 ⑫敵が出現
// 110 雪球距離ワーク

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(68,0)

//■地形

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉
	set_chr( 90,990,	 5, 9,     0, -50,  0,		180,  0201, 6,"K0_1;")	//①エントリ ボス１②
	set_obj("@obx1102a", 5, 9,     0,   0,  0,		180)					//①階段下（異２）
	set_chr(190,1300,	 5, 9,     0,   0,  0,		  0,   180, 0,";")		//階段下（ダミー）

	set_chr( 91,990,	 5, 2,    50,   0,  0,		270,  0102, 6,"K0_17029;")	//②エントリ ボス１終
	set_obj("@obx1122a", 5, 2,     0,   0,  0,		270)						//②アーチ（異２）
	set_chr(109,622,	 5, 2,     0,   0,  0,		  0,   270, 0,";")			//②ゴール用天使
	set_chr(191,1400,	 5, 2,     0,   0,  0,		  0,   270, 0,";")			//アーチ（ダミー）

	set_chr( 50,1203,	 5, 5,     0,-800,  0,		  8,   180, 6,";")	//③扉（異２） 一通
	set_chr( 51,1203,	 5, 4,     0, 800,  0,		  8,   180, 6,";")	//④扉（異２） 一通
	set_chr( 52,1203,	 5, 5,     0, 800,  0,		  8,   180, 6,";")	//⑤扉（異２） 一通

//■スイッチ・看板

	if (!F2116 )
	{
		set_chr( 57,570,	 3, 5,  -200,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2116")	//①ボタンスイッチ
		set_chr(157,990,	 5, 5,     0,-375,  0,		  0,     0, 8,"F2116 O1_18 WT?10 C0_99 WT?20 O0_289 WT?100 C0_0;")	//①ボタンスイッチ動作
	}
	else
	{
		set_chr( 57,570,	 3, 5,  -200,   0,  0,		  7,     0, 3,";")	//①ボタンスイッチ
	}


	if (!F2117 )
	{
		set_chr( 58,570,	 7, 5,   200,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2117")	//②ボタンスイッチ
		set_chr(158,990,	 5, 5,     0,-375,  0,		  0,     0, 8,"F2117 O1_18 WT?10 C0_99 WT?20 O0_289 WT?100 C0_0;")	//①ボタンスイッチ動作
	}
	else
	{
		set_chr( 58,570,	 7, 5,   200,   0,  0,		  7,     0, 3,";")	//②ボタンスイッチ
	}


	if (!F2118 )
	{
		set_chr( 59,570,	 5, 7,     0,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2118")	//③ボタンスイッチ
		set_chr(159,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2118 #8_56 O1_18 WT?10 C0_52 WT?20 M4_52 WT?110 C0_0;")	//③ボタンスイッチ
	}
	else
	{
		set_chr( 59,570,	 5, 7,     0,   0,  0,		  7,     0, 3,";")	//③ボタンスイッチ
		set_chr(159,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_52 WT?30 #8_56;")	//③ボタンスイッチ
	}

	set_chr( 60,990,	 5, 5,     0,-375,  0,		  0,     0, 8,"F2116 #8_54 #8_55 WT?20 M4_50 WT?15 M3_80 #8_61 #3_62;")	//①ボタンスイッチ動作a
	set_chr( 61,990,	 0, 0,     0,   0,  0,		  0,     0, 3,"F2117             WT?20 M4_51 WT?15 M4_80 ;")				//②ボタンスイッチ動作a
	set_chr( 62,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2117 #8_84 #8_85 WT?20 M4_50 WT?15 M3_80 #8_63 #3_60;")	//①ボタンスイッチ動作b
	set_chr( 63,990,	 0, 0,     0,   0,  0,		  0,     0, 3,"F2116             WT?20 M4_51 WT?15 M4_80 ;")				//②ボタンスイッチ動作b


	// 月
	set_chr( 54,711,	 5, 5,     0,   0,-250,		 -1,     0, 0,"F2117 WT?45 V3_99 #8_99 M1_99 T6_99 Z3_175 WT?5<EV_Moon1a>WT?25 M3_99 T6_99 X5_2200 T0_99 Y5_-1800<EV_CQ1>T2_99 X5_-450(<EV_CQ1>T4_99 Y5_3600<EV_CQ1>T6_99 X5_1800<EV_CQ1>T0_99 Y5_-3600<EV_CQ1>T2_99 X5_-1800>)");
	set_chr( 55,711,	 5, 5,     0,   0,-250,		 -1,     0, 0,"F2116 WT?45 V3_99 #8_99 M1_99 T2_99 Z3_175 WT?5<EV_Moon2a>WT?25 M3_99 T2_99 X5_-2200 T0_99 Y5_-1800<EV_CQ1>T6_99 X5_450(<EV_CQ1>T4_99 Y5_3600<EV_CQ1>T2_99 X5_-1800<EV_CQ1>T0_99 Y5_-3600<EV_CQ1>T6_99 X5_1800>)");

	set_chr( 84,711,	 5, 5,     0,   0,-250,		 -1,     0, 0,"F2116 WT?45 V3_99 #8_99 M1_99 T2_99 Z3_175 WT?5<EV_Moon1b>WT?25 M3_99 T2_99 X5_-2200 T0_99 Y5_-1800<EV_CQ1>T6_99 X5_450(<EV_CQ1>T4_99 Y5_3600<EV_CQ1>T2_99 X5_-1800<EV_CQ1>T0_99 Y5_-3600<EV_CQ1>T6_99 X5_1800>)");
	set_chr( 85,711,	 5, 5,     0,   0,-250,		 -1,     0, 0,"F2117 WT?45 V3_99 #8_99 M1_99 T6_99 Z3_175 WT?5<EV_Moon2b>WT?25 M3_99 T6_99 X5_2200 T0_99 Y5_-1800<EV_CQ1>T2_99 X5_-450(<EV_CQ1>T4_99 Y5_3600<EV_CQ1>T6_99 X5_1800<EV_CQ1>T0_99 Y5_-3600<EV_CQ1>T2_99 X5_-1800>)");

	set_chr( 56,711,	 5, 5,     0,   0,-250,		 -1,     0, 0,"      WT?45 V3_99 #8_99 M1_99       Z3_175 WT?5<EV_Moon3> WT?25 M3_99 T0_99 Y5_-1450 T6_99 X5_350 (<EV_CQ1> T0_99 Y5_-700 <EV_CQ1> T2_99 X5_-700 <EV_CQ1> T4_99 Y5_700 <EV_CQ1> T6_99 X5_700 );");
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++

		color2( 54,  25, 100,  80,  0, 0,0)	// 異次元の雪球の色（月っぽい）-青a
		color2( 55, 100,  75,   0,  0, 0,0)	// 異次元の雪球の色（月っぽい）-黄a

		color2( 84,  25, 100,  80,  0, 0,0)	// 異次元の雪球の色（月っぽい）-青b
		color2( 85, 100,  75,   0,  0, 0,0)	// 異次元の雪球の色（月っぽい）-黄b

		color2( 56, 100,   0,  50,  0, 0,0)	// 異次元の雪球の色（月っぽい）-赤



	set_chr( 80,656,	 5, 5,  -125,-375,  0,		  2,   350, 8,";")	// ④信号機
	set_chr( 81,650,	 5, 5,     0,   0,  0,		  2,	 0, 0,"") //⑤苗床


//■ハニワ・壷

	if (!F2170)
	{
		set_chr( 40,802,	 4, 7,  -300,-250,  0,		  2,     0, 0,"I_$$$1 SF2170 V4_140;")	//①壷
		set_chr(140,811,	 4, 7,  -300,-250,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(140,811,	 4, 7,  -300,-250,  0,		  0,     0, 0,";")
	}


	if (!F2171)
	{
		set_chr( 41,802,	 6, 7,   300,-250,  0,		  2,     0, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 6, 7,   300,-250,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(141,811,	 6, 7,   300,-250,  0,		  0,     0, 0,";")
	}


	if (!F2172)
	{
		set_chr( 29,152,	 4, 2,   -50,  450,  0,		  6,    75, 0,"I_US01 D1_42 <EV_Show142>;")// <EV_RemoveHaniwa>;")	//⑤敵 ないと
		chr_equip2( 29,	"obx0104",	"Bone_Head",	100,		100, 0, 0,	0,  -64, 14);

		set_chr( 42,634,	 4, 2,   -50,  450,  0,		  6,     0, 0,"SF2172;")	//③ハニワ
		chr_equip_chr( 42,29, "charbase0", 100,	0,0,0,		0, 0,0);
		F_set_chr( 42, CF_NO_CSP)
	
		set_chr(142,812,	 4, 2,   -50,  450,  0,		  0,    75, 0,";")
		chr_equip_chr(142,29, "charbase0", 100,	0,0,0,		0,0,0);
		color(142,-1);

		EV( "EV_HaniwaHeart")
	}
	else
	{
		set_chr( 29,152,	 4, 2,   -50,  450,  0,		  2,    75, 0,";")	//⑤敵 ないと
		set_chr(142,812,	 4, 2,   -50,  450,  0,		  0,    75, 0,";")
	}

//■宝箱
	set_chr( 49,626,	 6, 3,  -150,-900,  0,		  0,     0,10,"!F2987 I_SLOT SF2987 <EV_SlotDarken>;")	//①スロットマシン
	if (F2987)
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

//■罠・障害物
	// 異次元の柵の色
	set_chr(110,698,	 5, 2,  -650, 250,  0,		  0,    90, 0,";")	//柵中
	color2(110, 61,73,100, 0,0,0)	// 異次元の柵の色

	set_chr(120,627,	 5, 6,     0,-150,  0,		  0,     0, 0,";")	//柵小
	color2(120, 61,73,100, 0,0,0)	// 異次元の柵の色



//■敵
	set_chr(  2,154,	 5, 7,     0,   0,  0,		 -2,     0, 0,";")	//①敵 るーく
	set_chr(  3,153,	 5, 7,  -450,-200,  0,		  2,     0, 0,";")	//②敵a ぽーん
	set_chr(  4,153,	 5, 7,   450,-200,  0,		  2,     0, 0,";")	//②敵b ぽーん

	set_chr(  5,152,	 5, 6,     0,   0,  0,		  2,   180, 0,";")	//③敵 ないと
	set_chr(  6,152,	 5, 4,     0,   0,  0,		  2,     0, 0,";")	//④敵 ないと

	set_chr( 11,152,	 6, 5,   200, 200,  0,		  2,    90, 0,";")	//⑥敵 ないと
	set_chr( 12,154,	 7, 5,   200,   0,  0,		 -2,   315, 0,";")	//⑦敵 るーく
	set_chr( 13,153,	 7, 5,  -200, 900,  0,		  2,   180, 0,";")	//⑧敵a ぽーん
	set_chr( 14,153,	 7, 5,  -200,-900,  0,		  2,     0, 0,";")	//⑧敵b ぽーん


	set_chr( 16,152,	 4, 5,  -200, 200,  0,		  2,   270, 0,";")	//⑨敵 ないと
	set_chr( 17,154,	 3, 5,  -200,   0,  0,		 -2,   315, 0,";")	//⑩敵 るーく
	set_chr( 18,153,	 3, 5,   200, 900,  0,		  2,   180, 0,";")	//⑪敵a ぽーん
	set_chr( 19,153,	 3, 5,   200,-900,  0,		  2,     0, 0,";")	//⑪敵b ぽーん

	set_chr( 21,152,	 5, 3,     0,-350,  0,		 -1,     0, 8,"F104 WT?15 V1_99;")	//⑫敵a ないと
	set_chr( 22,152,	 5, 3,  -800, -75,  0,		 -1,     0, 8,"F104 WT?25 V1_99;")	//⑫敵b ないと
	set_chr( 23,152,	 5, 3,   800, -75,  0,		 -1,     0, 8,"F104 WT?25 V1_99;")	//⑫敵c ないと
	set_chr(155,990,	 5, 3,     0,  75,  0,		  0,071104, 6,"SF104;")


//■イベント
	// 雪球距離
	set_chr(181,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"      Lk?5400 SF110")
	set_chr(182,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"      Lk?5500 SF110")
	set_chr(183,990,	 0, 0,     0,   0,  0,		  0,     0, 9,"RF110 Lk?5600 SF110")

//■場面固有設定

}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
//EV_RemoveHaniwa
//{
//	F_set_Node( 29,"obx0104", NP_HIDE)
//}

//--------------------------------------------------------------------
EV_CQ1
{
	if (F110)
	{
		CAM_quake("4646")
	}
}

//--------------------------------------------------------------------
EV_Moon1a
{
	SE(1311, 54)	// 月玉出る
	jump(54,3, 24,-1,-1,200,275)
	wait_move(54)
	CAM_quake("4646")
	SE(297, 54)		// どすん
}

//--------------------------------------------------------------------
EV_Moon2a
{
	SE(1311, 55)	// 月玉出る
	jump(55,3, 24,-1,-1,200,275)
	wait_move(55)
	CAM_quake("4646")
	SE(297, 55)		// どすん
}

//--------------------------------------------------------------------
EV_Moon1b
{
	SE(1311, 84)	// 月玉出る
	jump(84,3, 24,-1,-1,200,275)
	wait_move(84)
	CAM_quake("4646")
	SE(297, 84)		// どすん
}

//--------------------------------------------------------------------
EV_Moon2b
{
	SE(1311, 85)	// 月玉出る
	jump(85,3, 24,-1,-1,200,275)
	wait_move(85)
	CAM_quake("4646")
	SE(297, 85)		// どすん
}

//--------------------------------------------------------------------
EV_Moon3
{
	SE(1311, 56)	// 月玉出る
	jump(56,3, 24,-1,-1,200,275)
	wait_move(56)
	CAM_quake("4646")
	SE(297, 56)	// どすん
}

//--------------------------------------------------------------------
EV_HaniwaHeart
{
	if(!F101)
	{
		EMO(29,EMO_TENTEN);
	}
	wait( 150 )
	loop
}
//--------------------------------------------------------------------
EV_Show142
{
	color(142,15);
	jump(142,3, 25,-1,-1, 15, 75)
}


#EndScriptTable
//====================================================================

