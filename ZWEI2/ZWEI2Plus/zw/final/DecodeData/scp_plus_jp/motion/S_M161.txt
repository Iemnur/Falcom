//======================================================================
// モーション定義ファイル（アスラタケ）
//======================================================================

#CharMotTable:161			//***をキャラ番号（ファイル番号そのまま）に置き換える
en_161m.it3					//モーションファイル指定


//・プレイヤーと一定の距離を保ちながら反射弾を発射（たまに放射弾も）
//　↓
//・弱ってくると自爆


////////////////////////////////////////////////////////////////////////
//ＳＥ再生

if_LEN 1500 0
{
	OTO 01	0016	464 0 0 0	//反射弾
	OTO 00	0016	464 0 0 0	//
	OTO 03	0001	360 0 0 0	//放射弾
	OTO 03	0001	484 0 0 0	//放射弾

	OTO 99	0001	473 0 0 0	//自爆
}


////////////////////////////////////////////////////////////////////////
// モーションセット定義

	//------------------------------------------------------------------
	// 登場
	//------------------------------------------------------------------
	SET 80 80 0001 0032 -1 00	//登場

	//------------------------------------------------------------------
	// 待機
	//------------------------------------------------------------------
	SET 02 02 0001 0032 -1 00

	//------------------------------------------------------------------
	// 歩行
	//------------------------------------------------------------------
	SET 01 01 0001 0032 -1 00
	SET 00 00 0001 0032 -1 00
//		E_charbase0		01 0001 1750 100 0 0		//＠反射弾
		E_charbase0		01 0016 1750 100 0 0		//＠反射弾
//		E_charbase0		00 0001 1750 100 0 0		//＠反射弾
		E_charbase0		00 0016 1750 100 0 0		//＠反射弾


	//------------------------------------------------------------------
	// 攻撃（放射弾）
	//------------------------------------------------------------------
	SET 03 03 0001 0032 -1 00
		E_Bone_10		03 0001 2190 100 0 0		//＠放射弾


	//------------------------------------------------------------------
	// 攻撃（自爆）
	//------------------------------------------------------------------
	SET 99 99 0001 0032 -1 00
		E_csp1			99 0001 3660 150 0 0 		//＠予兆
//		E_csp1			99 0016 3660 150 0 0 		//＠予兆



////////////////////////////////////////////////////////////////////////
// ルーチン分岐

	//mF0 = 汎用カウンタ（壁接触判定）
	//mF1 = 汎用カウンタ（歩行時間計測）
	//mF2 = 壁接触判定
	//mF3 = 自爆発動した？


	//★自爆してもいい頃？
	if_EV DAMAGE
	{
		if_HP 10 0
		{
			if_mF3= 0
			{
				mF3_set -1 -1 1

				E_charbase0			-1 -1 2108 100 0 0		//＠振動（大ｘ２）
				E_charbase0			-1 -1 2145 100 0 0		//＠フラッシュ

				H_@csp -1 -1 10 0 0		//以降、ノーダメージ

				//     set deg tim rnd len next
				B_NEXT  -1  -1   0   0   0   99
			}
		}
	}


	//★ダメージ食らうたびに何か出す
	if_EV DAM_KEN
	{
		if_RAND 2
			E_csp3		-1 -1 1340 100 0 0		//＠粉
		el_RAND 2
			E_csp4		-1 -1 1340 100 0 0		//＠粉
		else
			E_Bone_4	-1 -1 1340 100 0 0		//＠粉
	}


	//★ホバー演出
	if_SET 00 01 02
	{
		if_time 5
		{
			E_charbase0		-1 -1  570 60 0 0 		//＠土煙
		}
	}


	//------------------------------------------------------------------
	// 登場
	//------------------------------------------------------------------
	//     set deg tim rnd  len next
	B_NEXT  80   0  60   0    0   02	//⇒始動


	//------------------------------------------------------------------
	// 待機
	//------------------------------------------------------------------
	//    set typ spd rot xx1 xx2
	B_MOV  02   0   0   8  00  00
		//     set deg tim rnd len next
		B_NEXT  02   0  30   0   0   01		//⇒歩行


	//------------------------------------------------------------------
	// 歩行
	//------------------------------------------------------------------
	//    set typ spd rot xx1 xx2
	B_MOV  01   2   4   8  60  00	//右周り
	B_MOV  00   2   4   8 -60  00	//左周り

	if_SET 01 00
	{
		if_TIME 1 0
		{
			mF2_set -1 -1 0
			
			mF1_add -1 -1 1		//撃った回数＋＋
		}

		if_mF1= 7
		{
			mF1_set -1 -1 0		//★汎用カウンタ初期化

			if_HP 100 0
			{
				//     set deg tim rnd  len next
				B_NEXT  -1   0   0   0    0   03	//⇒放射弾
			}
		}

		if_EV TOUCH_MAP
		{
			if_mF2= 0
			{
				mF2_set -1 -1 1
				
				if_mF0= 1
				{
					mF0_set -1 -1 0
				}
				else
				{
					mF0_set -1 -1 1
				}
			}
		}
		
		if_mF0= 1
		{
			//     set deg tim rnd  len next
			B_NEXT  -1   0  32   0    0   01	//⇒右周り
		}
		else
		{
			//     set deg tim rnd  len next
			B_NEXT  -1   0  32   0    0   00	//⇒左周り
		}
	}

	//------------------------------------------------------------------
	// 攻撃（放射弾）
	//------------------------------------------------------------------
	//    set typ spd rot xx1 xx2
	B_MOV  03   2   0   8  60  00
		//     set deg tim rnd len next
		B_NEXT  03   0  32   0   0   01		//⇒歩行


	//------------------------------------------------------------------
	// 攻撃（自爆）
	//------------------------------------------------------------------
	//    set typ spd rot xx1 xx2
	B_MOV  99  00   0   0  00  00
	
	if_SET 99
	{
		if_time 2
		{
			E_charbase0		-1 -1  2105 100 0  0		//＠振動（小）
		}

		if_TIME 100 90
		{
			OTO -1 -1 1119 0 0 0	//爆発ＳＥ

			POW -1 -1 9999		//自殺
			
			E_charbase0		-1 -1 21100 100 0  0 		//＠爆発
			E_charbase0		-1 -1 31050  15 0 20 		//＠爆発アタリ
		}
	}

#EndCharMotTable

