//====================================================================
//ステージトラップスクリプト
//[11032][廃坑－ボス②]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev10312.txt参照

//■ローカルフラグ
// 100 ①レバースイッチを揃えた

// 104 ①敵が出現

// 110 ③敵が出現
// 111 ③敵が出現２段目
// 112 ③敵終了

// 120 ⑤敵が出現
// 121 ⑤敵が出現２段目
// 122 ⑤敵終了

//--------------------------------------------------------------------

#WOODBOX_CH	49
#IT_WOODBOX	176		//∴176卵

#TAKARA_CH	47
#IT_TAKARA	076		//◇076番兵のこて

INIT
{
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉

	set_chr( 90,990,	 2, 9,   100,   0,  0,		270,  0102, 6,"K0_1;")		//①エントリ ボス①
	set_obj("@obx2012a", 2, 9,     0,   0,  0,		270)						//①階段下（岩２）
	set_chr(190,1300,	 2, 9,	   0,   0,  0,		  0,   270, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 7, 5,     0,   0,  0,		 90,  0102, 6,"K0_0;")		//②エントリ ボス③
	set_obj("@obx2002a", 7, 5,     0,   0,  0,		 90)						//②階段上（岩２）
	set_chr(191,1301,	 7, 5,	   0,   0,  0,		  0,    90, 0,";")			//階段上（ダミー）

	set_chr( 50,1202,	 3, 8,     0,-900,  0,		  8,   180, 6,";")	//③扉（岩３） 一通	３個のレバー

	set_chr( 51,1202,	 2, 6,     0, 450,  0,		  3,     0, 6,";")	//④扉（岩３） 自由
	set_chr( 52,1202,	 2, 5,     0,-450,  0,		  7,   180, 0,";")	//⑤扉（岩３） 閉鎖
	set_chr( 53,1202,	 3, 5,   450,   0,  0,		  8,   270, 6,";")	//⑥扉（岩３） 一通

	set_chr( 54,1202,	 5, 5,     0,-900,  0,		  3,     0, 6,";")	//⑦扉（岩３） 自由
	set_chr( 55,1202,	 6, 5,   900,   0,  0,		  8,   270, 6,";")	//⑧扉（岩３） 一通
	set_chr( 56,1202,	 6, 4,     0,-900,  0,		  7,   180, 0,";")	//⑨扉（岩３） 閉鎖

//■スイッチ・看板
	set_chr( 60,571,	 3, 8,  -200,-100,  0,		  0,     0,	5,"M!_99 M!_61")		//①レバースイッチa
	set_chr( 61,571,	 3, 8,   200, 300,  0,		  1,     0,	5,"M!_99 M!_60 M!_62")	//①レバースイッチb
	set_chr( 62,571,	 3, 8,  -200, 700,  0,		  0,     0,	5,"M!_99 M!_61")		//①レバースイッチc

	set_chr( 63,665,	 2, 5,   900, 900,  0,		  2,     0, 8,"M3?99 SF110;")	//②ゴング
	set_chr( 64,665,	 5, 4,   900,-400,  0,		  2,     0, 8,"M3?99 SF120;")	//③ゴング

	if ( !F2102 )
	{
	// 初回
		set_chr( 65,570,	 5, 3,   900,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2102")	//④ボタンスイッチ
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2102 O1_18 WT?10 C0_55 WT?20 M4_55 WT?30 C0_0;")//④ボタンスイッチを押す
	}
	else
	{
	// 押され
		set_chr( 65,570,	 5, 3,   900,   0,  0,		  7,     0, 3,";")	//④ボタンスイッチ
		set_chr( 83,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"M6_55;")//④ボタンスイッチを押す
	}






//■ハニワ・壷

	if ( !F2160 )
	{
		set_chr( 40,802,	 3, 6,     0,   0,  0,		  2,   135, 0,"I_$$$1 SF2160 V4_140;")	//①壷
		set_chr(140,811,	 3, 6,     0,   0,  0,		 -1,   135, 0,";")
	}
	else
	{
		set_chr(140,811,	 3, 6,     0,   0,  0,		  0,   135, 0,";")
	}


	if ( !F2161 )
	{
		set_chr( 41,634,	 6, 3,  -300,   0,  0,		  2,     0, 0,"I_US01 SF2161 V4_141;")	//②ハニワ
		set_chr(141,812,	 6, 3,  -300,   0,  0,		 -1,   240, 0,";")
	}
	else
	{
		set_chr(141,812,	 3, 6,     0,   0,  0,		  0,   240, 0,";")
	}


	if ( !F2162 )
	{
		set_chr( 42,634,	 5, 3,   300,   0,  0,		  2,     0, 0,"I_US01 SF2162 V4_142;")	//③ハニワ
		set_chr(142,812,	 5, 3,   300,   0,  0,		 -1,   120, 0,";")
	}
	else
	{
		set_chr(142,812,	 5, 3,   300,   0,  0,		  0,   120, 0,";")
	}


	if ( !F2163 )
	{
		set_chr( 43,802,	 6, 5,  -325,-325,  0,		  2,   180, 0,"I_$$$1 SF2163 V4_143;")	//④壷
		set_chr(143,811,	 6, 5,  -325,-325,  0,		 -1,   180, 0,";")
	}
	else
	{
		set_chr(143,811,	 6, 5,  -325,-325,  0,		  0,   180, 0,";")
	}

//■宝箱
	if ( !Fx_132Food1 )
		set_chr( WOODBOX_CH,562,	 2, 4,     0,   0,  0,		6,     0,20,"<TK_WOODBOX><EV_SetGetFood1>;")	//①木箱
	else
		set_chr( WOODBOX_CH,562,	 2, 4,     0,   0,  0,		7,     0, 0,";")	//①木箱


	if(IT_TAKARA<1)
		set_chr( TAKARA_CH,560,		 5, 2,     0,   0,  0,		6,     0,20,"<TK_TAKARA>;")		//②宝箱（並）
	else
		set_chr( TAKARA_CH,560,		 5, 2,     0,   0,  0,		7,     0, 0,";")		//②宝箱（並）


//■罠・障害物
	if ( !F2190 )
	{
		set_chr( 70,810,	 5, 4,   900, 250,  0,		 -1,     0, 8,"F120	V3_99;")	//①大砲
		set_chr(170,990,	 5, 4,   900, 250,  0,		  0,     0, 8,"F70 I_$$$2 SF2190;");
//		set_chr( 70,810,	 5, 4,   900, 350,  0,		 -1,     0, 8,"F120	V3_99;")	//①大砲
//		set_chr(170,990,	 5, 4,   900, 350,  0,		  0,     0, 8,"F70 I_$$$2 SF2190;");
	}

	if ( !F2180 )
	{
		set_chr( 77,633,	 5, 3,     0,-600,  0,		  2,     0, 0,"SF2180;")	//③ヒビ壁
	}

	if ( !F2181 )
	{
		set_chr( 78,633,	 5, 2,     0, 600,  0,		  2,     0, 0,"SF2181;")	//④ヒビ壁
	}

	set_chr(110,627,	 5, 4,   100,   0,  0,		  0,    90, 0,";")	//柵小
	set_chr(111,627,	 6, 4,  -100,   0,  0,		  0,    90, 0,";")	//柵小
	set_chr(112,628,	 5, 4,   910, 650,-10,		  0,     0, 0,";")	//柵大 - 砲台の弾抜け防止用

//■敵
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	// レバーの部屋
	set_chr(  1,208,	 3, 8,   150,-250,  0,		  2,     0, 0,";")//①敵a こぼると

	set_chr(  2,208,	 3, 8,  -150,-250,  0,		  2,     0, 0,";")//①敵b こぼると
		chr_equip2( 2,	"eq_155",	"Bone_Head",	100,		0, 0, 0,	0,  0,  0);		// メガネ

	// 第1ザコ部屋
	set_chr(  4,101,	 2, 5,   450, 450,500,		 -1,    90, 8,"F110 WT?5 V1_99;")//③敵1a はこむかで
	set_chr(  5,311,	 2, 5,  1350, 450,500,		 -1,   270, 8,"F110 WT?15 V1_99;")//③敵1b あおじぇりー
	set_chr(  6,311,	 2, 5,   450,1350,500,		 -1,   180, 8,"F110 WT?35 V1_99;")//③敵1c あおじぇりー
	set_chr(  7,101,	 2, 5,  1350,1350,500,		 -1,     0, 8,"F110 WT?55 V1_99;")//③敵1d はこむかで
		F_set_chr(  4, CF_NO_CLIP2)
		F_set_chr(  5, CF_NO_CLIP2)
		F_set_chr(  6, CF_NO_CLIP2)
		F_set_chr(  7, CF_NO_CLIP2)

	set_chr(  8,216,	 2, 5,   900,1400,500,		 -1,    45, 8,"F111 WT?5 V1_99;")//③敵3a あーす
	set_chr(  9,216,	 2, 5,  1400, 900,500,		 -1,    90, 8,"F111 WT?25 V1_99;")//③敵3b あーす
	set_chr( 10,216,	 2, 5,   900, 500,500,		 -1,   135, 8,"F111 WT?45 V1_99;")//③敵3c あーす
	set_chr( 11,123,	 2, 5,  1350,1350,500,		 -1,   180, 8,"F111 WT?85 V1_99;")//③敵3d しろおこじょ
		F_set_chr(  8, CF_NO_CLIP2)
		F_set_chr(  9, CF_NO_CLIP2)
		F_set_chr( 10, CF_NO_CLIP2)
		F_set_chr( 11, CF_NO_CLIP2)

	
	set_chr( 84,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F110 M5_51 F4 F5 F6 F7 WT?5 SF111 F8 F9 F10 F11 SF112;")//③敵 進行
	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F112 WT?30 O1_18 WT?10 C0_51 WT?20 M4_51 M4_53 WT?30 C0_52 WT?20 M4_52 WT?30 C0_0;")//③敵 終了時カメラ
	}
	else
	{
		set_chr( 85,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F112 WT?30 O1_18 WT?10 C0_53 WT?20 M4_53 M4_51 WT?30 C0_52 WT?20 M4_52 WT?30 C0_0;")//③敵 終了時カメラ
	}

	// 中間
	set_chr( 29,214,	 4, 5,   400,-200,  0,		  2,   315, 0,";")//④敵 コウモリ①

	// 第2ザコ部屋
	set_chr( 17,204,	 5, 4,   900,-300,500,		 -1,   270, 8,"F120 WT?15 V1_99;")//⑤敵1a ちびわーむ
	set_chr( 18,203,	 5, 4,   500,-100,500,		 -1,   315, 8,"F120 WT?35 V1_99;")//⑤敵1b わーむ
	set_chr( 19,204,	 5, 4,  1300,-100,500,		 -1,    45, 8,"F120 WT?55 V1_99;")//⑤敵1c ちびわーむ
		F_set_chr( 17, CF_NO_CLIP2)
		F_set_chr( 18, CF_NO_CLIP2)
		F_set_chr( 19, CF_NO_CLIP2)

	set_chr( 22,123,	 5, 4,   600,   0,500,		 -1,   135, 8,"F121 WT?55 V1_99;")//⑤敵2c しろおこじょ
	set_chr( 23,123,	 5, 4,   900,   0,500,		 -1,   225, 8,"F121 WT?165 V1_99;")//⑤敵2e しろおこじょ
		F_set_chr( 22, CF_NO_CLIP2)
		F_set_chr( 23, CF_NO_CLIP2)

 	set_chr( 86,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F120 M5_54 F17 F18 F19 WT?5 SF121 F22 F23 SF122;")//⑤敵 終了
 	set_chr( 87,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F122 WT?30 O1_18 C0_56 WT?20 M4_54 M4_56 WT?30 C0_0;")//⑤敵 終了

	// 出口前
	set_chr( 30,101,	 6, 5,     0,   0,  0,		  2,    90, 0,";")//⑥敵 はこむかで


//■イベント
	set_chr( 80,990,	 0, 0,     0,   0,  0,		  5,     0, 9,"M3?60 M3?61 M3?62 SF100;")//①レバースイッチそろえ判定
	set_chr( 81,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F100 O1_18 WT?10 C0_50 WT?20 M4_50 WT?30 C0_0;")

	set_chr( 82,990,	 3, 9,     0,-800,  0,		  0,  1001, 6,"SF104;")//①敵エリア 


//■場面固有設定
	map_color(100,100,100,0);//R,G,B, time 100%
	map_spotbmp(45);//100%
}

//--------------------------------------------------------------------
EV_SetGetFood1
{
	F_set(Fx_132Food1)
}

#EndScriptTable
//====================================================================

