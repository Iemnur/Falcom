//====================================================================
//ステージトラップスクリプト
//[12033][水没神殿－ボス③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev22311.txt参照

//■ローカルフラグ
// 100 ①敵が出現
// 101 ②敵が出現
// 102 ①ボタンスイッチ ④扉⑥扉 開く
// 103 ②ボタンスイッチ ⑦扉⑨扉 開く
// 105 ⑪敵が出現

#TREASURE_CH	48
#Fx_TREASURE	2322	//☆022竜宮の使い

//--------------------------------------------------------------------
INIT
{
//■地形
	// 滑る床
	set_obj("ob20141a",	 3, 6,     0,   0,  0,    0)
	set_obj("ob20141a",	 4, 6,     0,   0,  0,    0)

	//床飾りマーク
    set_obj("mo20021a",	 4, 3,     0,   0,  1,    0)

	//天井から光
    set_obj("mo20031a",	 2, 5,   900,   0,  0,    0)
    set_obj("mo20031a",	 4, 2,     0, 450,  0,    0)
    set_obj("mo20031a",	 4, 4,     0,   0,  0,    0)


//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉

	set_chr( 90,990,	 3, 7,     0,-100,  0,		180,  0201, 6,"K0_1;")		//①エントリ ボス②
	set_obj("@ob22111a", 3, 7,     0,   0,  0,		180)						//①階段下（神殿３）
	set_chr(190,1300,	 3, 7,     0,   0,  0,		  0,   180, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 4, 2,     0,-100,  0,		  0,  0201, 6,"K0_12039;")	//②エントリ ボス終
	set_obj("@ob22131a", 4, 2,     0,-100,  0,		  0)						//②アーチ（神殿３）
	set_chr(109,622,	 4, 2,     0,   0,  0,		  0,     0, 0,";")			//②ゴール用天使
	set_chr(191,1400,	 4, 2,     0,   0,  0,		  0,     0, 0,";")			//アーチ（ダミー）

	set_chr( 53,1206,	 3, 6,     0, 900,  0,		  6,     0, 0,";")	//③扉（神殿３） 開放 上雑魚部屋
	set_chr( 54,1206,	 3, 6,   900,   0,  0,		  6,    90, 0,";")	//④扉（神殿３） 開放 上雑魚部屋
	set_chr( 55,1206,	 3, 6,     0,-900,  0,		  6,   180, 0,";")	//⑤扉（神殿３） 開放 上雑魚部屋
	set_chr( 56,1206,	 3, 6,  -900,   0,  0,		  6,   270, 0,";")	//⑥扉（神殿３） 開放 上雑魚部屋
	set_chr( 57,1206,	 4, 6,     0, 900,  0,		  6,     0, 0,";")	//⑦扉（神殿３） 開放 上雑魚部屋
	set_chr( 58,1206,	 4, 6,   900,   0,  0,		  6,    90, 0,";")	//⑧扉（神殿３） 開放 上雑魚部屋
	set_chr( 59,1206,	 4, 6,     0,-900,  0,		  6,   180, 0,";")	//⑨扉（神殿３） 開放 上雑魚部屋

	set_chr( 52,1206,	 4, 3,     0,-900,  0,		  3,   180, 6,";")	//⑪扉（神殿３） 自由

//■スイッチ・看板

	if ( !F2103 )
	{
	// 初回
		set_chr( 60,570,	 2, 5,   125, 900, 20,		  6,     0, 5,"M6?99 M5_99 SF2103;")	//①ボタンスイッチ ④扉⑥扉 開く

		if(WK_ENTRY==91)//階段91 から来た時（帰り）
		{
			set_chr( 82,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"F2103 M5_60 O1_18 WT?10 C0_56 WT?20 M4_56 M4_54 WT?30 C0_0;")//①ボタンスイッチを押すと扉
		}
		else //行き
		{
			set_chr( 82,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"F2103 M5_60 O1_18 WT?10 C0_54 WT?20 M4_54 M4_56 WT?30 C0_0;")//①ボタンスイッチを押すと扉
		}
	}
	else
	{
	// 押され
		set_chr( 60,570,	 2, 5,   125, 900, 20,		  7,     0, 3,";")	//①ボタンスイッチ
		MOT( 54, 6, 1 )
		MOT( 56, 6, 1 )
	}


	if ( !F2104 )
	{
	// 初回
		set_chr( 61,570,	 5, 7,  -900,-125, 20,		  6,     0, 5,"M6?99 M5_99 SF2104;")	//②ボタンスイッチ ⑦扉⑨扉 開く

		if(WK_ENTRY==91)//階段91 から来た時（帰り）
		{
			set_chr( 85,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"F2104 M5_61 O1_18 WT?10 C0_57 WT?20 M4_57 M4_59 WT?30 C0_0;")//①ボタンスイッチを押すと扉
		}
		else //行き
		{
			set_chr( 85,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"F2104 M5_61 O1_18 WT?10 C0_59 WT?20 M4_59 M4_57 WT?30 C0_0;")//①ボタンスイッチを押すと扉
		}
	}
	else
	{
	// 押され
		set_chr( 61,570,	 5, 7,  -900,-125, 20,		  7,     0, 3,";")	//②ボタンスイッチ

		MOT( 57, 6, 1 )
		MOT( 59, 6, 1 )
	}


//■ハニワ・壷

	if ( !F2170 )
	{
		set_chr( 40,802,	 4, 6,     0,   0,  0,		  2,     0, 0,"I_$$$1 SF2170 V4_140;")	//①壷
		set_chr(140,811,	 4, 6,     0,   0,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(140,811,	 4, 6,     0,   0,  0,		  0,     0, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 4, 5,   350,-150,  0,		  2,   290, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 4, 5,   350,-150,  0,		 -1,   290, 0,";")
	}
	else
	{
		set_chr(141,811,	 4, 5,   350,-150,  0,		  0,   290, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,634,	 5, 3,  -200,   0,  0,		  2,    90, 0,"I_US01 SF2172 V4_142;")	//③ハニワ
		set_chr(142,812,	 5, 3,  -200,   0,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(142,812,	 5, 3,  -200,   0,  0,		  0,    90, 0,";")
	}


	if ( !F2173 )
	{
		set_chr( 24,137,	 4, 3,     0, 400,  0,		  2,     0, 0,"D1_43 <EV_Show143>;")	//⑧敵e つぼみみっく

		set_chr( 43,802,	 4, 3,     0, 400,  0,		  6,     0, 0,"SF2173;")	//④壷
		chr_equip_chr( 43,24, "charbase0", 100,	0,0,0,		0, 0,0);
		F_set_chr( 43, CF_NO_CSP)
		F_set_chr( 24, CF_NO_MINIMAP)

		set_chr(143,811,	 4, 3,     0, 400,  0,		  0,     0, 8,"M2!24 <EV_ActiveteMimic24>;")
		chr_equip_chr(143,24, "charbase0", 100,	0,0,0,		0,0,0);
		color(143,-1);
	}
	else
	{
		set_chr(143,811,	 4, 3,     0, 400,  0,		  0,     0, 0,";")
	}


	if ( !F2174 )
	{
		if(WK_ENTRY==91)//階段91 から来た時（帰り）
		{
			set_chr( 86,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"M0?52 SF105 <EV_SpawnMimic28B>;")//⑪敵 出現
		}
		else
		{
			set_chr( 86,990,	 0, 0,     0,   0,  0,  	  0,     0, 8,"M0?52 SF105 <EV_SpawnMimic28A>;")//⑪敵 出現
		}
	}
	else
	{
		set_chr(144,811,	 4, 2,     0,1000,  0,		  0,     0, 0,";")
	}

//■宝箱
	set_chr( 49,626,	 3, 3,   200,   0,  0,		  0,   270,10,"!F2926 I_SLOT SF2926 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2926 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	if( !Fx_TREASURE )
		set_chr( TREASURE_CH,561,	 6, 4,     0,   0,  0,     6,     0,20,"<TK_TREASURE>;")
	else
		set_chr( TREASURE_CH,561,	 6, 4,     0,   0,  0,     7,     0, 0,";")

//■罠・障害物
	set_chr( 73,590,	 4, 3,  -900,   0,  0,		  2,   270, 0,";")	//①重し
	set_chr(121,627,	 4, 3,  -900, 350,  0,		  0,   270, 0,";")	//柵小a1
	set_chr(122,627,	 4, 3,  -900,-350,  0,		  0,   270, 0,";")	//柵小a2
	set_chr(123,627,	 4, 3,   900, 350,  0,		  0,   270, 0,";")	//柵小b1
	set_chr(124,627,	 4, 3,   900,-350,  0,		  0,   270, 0,";")	//柵小b2
	// 神殿の柵の色
	color2(121, 61,81,100, 0,0,0)
	color2(122, 61,81,100, 0,0,0)
	color2(123, 61,81,100, 0,0,0)
	color2(124, 61,81,100, 0,0,0)


	if ( !F2128 )
		set_chr( 78,630,	 4, 3,   950,   0,  0,		  2,    90, 0,"I_$$$2 SF2128;")	//②樽
	else
		set_chr( 78,630,	 4, 3,   950,   0,  0,		  2,    90, 0,"I_$$$1;")	//②樽


	if ( !F2132 )
	{
		set_chr(112,638,	 6, 5,  -900,-100,  0,		  2,     0, 8,"M0?99 SF2132;") //③火の柱a
	}

	if ( !F2133 )
	{
		set_chr(113,638,	 6, 5,  -900, 100,  0,		  2,     0, 8,"M0?99 SF2133;") //③火の柱b
	}

	if ( !F2134 )
	{
		set_chr(114,638,	 6, 5,   150,  25,  0,		  2,     0, 8,"M0?99 SF2134;") //④火の柱a
	}

	if ( !F2135 )
	{
		set_chr(115,638,	 6, 5,   -25,-150,  0,		  2,     0, 8,"M0?99 SF2135;") //④火の柱b
	}

	if ( !F2136 )
	{
		set_chr(116,638,	 6, 5,  -100,-900,  0,		  2,     0, 8,"M0?99 SF2136;") //⑤火の柱a
	}

	if ( !F2137 )
	{
		set_chr(117,638,	 6, 5,   100,-900,  0,		  2,     0, 8,"M0?99 SF2137;") //⑤火の柱b
	}

//■敵
	set_chr( 32,211,	 3, 6,  -300,   0,  0,		 -1,     0, 8,"F100 V2_99;")//①敵a しびれまんた
	set_chr( 33,168,	 3, 6,   300,   0,  0,		 -1,     0, 8,"F100 V2_99;")//①敵b そーどふぃっしゅ

	set_chr( 34,129,	 4, 6,     0,-250,  0,		 -1,    90, 8,"F101 V2_99;")//②敵a わーしゃーく
	set_chr( 35,251,	 4, 6,     0, 250,  0,		 -1,    90, 8,"F101 V2_99;")//②敵b ばっとさん

	set_chr(  2,129,	 2, 5,   900,  50, 50,		  0,   315, 0,";")	//③敵a わーしゃーく
	set_chr(  3,217,	 2, 5,  1150,   0,  0,		  0,     0, 0,";")	//③敵b あくあ
	set_chr(  4,217,	 2, 5,   900, 300,  0,		  0,     0, 0,";")	//③敵c あくあ

	set_chr(  9,127,	 5, 7,  -200,-650,  0,		  0,   180, 0,";")	//④敵a がにめで
	set_chr( 10,217,	 5, 7,   -50,-1000, 0,		  0,   180, 0,";")	//④敵b あくあ
	set_chr( 11,217,	 5, 7,  -100,-1100, 0,		  0,   160, 0,";")	//④敵c あくあ
	set_chr( 12,217,	 5, 7,  -250,-800,  0,		  0,   200, 0,";")	//④敵d あくあ

	set_chr( 14,251,	 4, 5,     0,-450,  0,		  0,     0, 0,";")	//⑥敵 ばっとさん

	set_chr( 15,129,	 5, 3,  -450,   0,  0,		  0,    90, 0,";")	//⑦敵 わーしゃーく

	set_chr( 20,250,	 4, 3,  -450, 450,  0,		  0,     0, 0,";")	//⑧敵a こぼるてす
	set_chr( 21,250,	 4, 3,  -150, 200,  0,		  0,     0, 0,";")	//⑧敵b こぼるてす
	set_chr( 22,250,	 4, 3,   150, 200,  0,		  0,     0, 0,";")	//⑧敵c こぼるてす
	set_chr( 23,250,	 4, 3,   450, 450,  0,		  0,     0, 0,";")	//⑧敵d こぼるてす

	set_chr( 25,250,	 4, 3,  -300,-300,  0,		  0,     0, 0,";")	//⑧敵f こぼるてす
	set_chr( 26,250,	 4, 3,   300,-300,  0,		  0,     0, 0,";")	//⑧敵g こぼるてす


//■イベント
//  -------      no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	if ( !F2103 )
	{
		set_chr( 80,990,	 3, 6,     0,   0,  0,		  0,  1010, 6,"SF100 M5_53 M5_54 M5_55 M5_56;")//①敵エリア 
	}
	else
	{
		set_chr( 80,990,	 3, 6,     0,   0,  0,		  0,  1010, 6,"SF100 M5_53 M5_55;")//①敵エリア 
	}
	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
		set_chr( 81,990,	 3, 6,     0,   0,  0,  	  0,     0, 8,"F32 F33 WT?10 O1_18 WT?20 C0_53 WT?20 M4_53 M4_55 WT?30 C0_0;")//①敵 戦闘終了 
	}
	else //行き
	{
		set_chr( 81,990,	 3, 6,     0,   0,  0,  	  0,     0, 8,"F32 F33 WT?10 O1_18 WT?20 C0_55 WT?20 M4_55 M4_53 WT?30 C0_0;")//①敵 戦闘終了 
	}


	if ( !F2103 )
	{
		set_chr( 83,990,	 4, 6,     0,   0,  0,  	  0,  1010, 6,"SF101 M5_57 M5_58 M5_59 M5_54;")//②敵エリア 
	}
	else
	{
		set_chr( 83,990,	 4, 6,     0,   0,  0,  	  0,  1010, 6,"SF101 M5_54 M5_58;")//②敵エリア 
	}
	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
		set_chr( 84,990,	 3, 6,     0,   0,  0,  	  0,     0, 8,"F34 F35 WT?10 O1_18 WT?20  C0_54 WT?20 M4_54 M4_58 WT?30 C0_0;")//②敵 戦闘終了 
	}
	else //行き
	{
		set_chr( 84,990,	 3, 6,     0,   0,  0,  	  0,     0, 8,"F34 F35 WT?10 O1_18 WT?20  C0_58 WT?20 M4_58 M4_54 WT?30 C0_0;")//②敵 戦闘終了 
	}

//■場面固有設定
	map_color(100,100,100,0);//R,G,B, time 100%
	map_spotbmp(25);//100%

}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_SpawnMimic28A
{
	set_chr( 28,137,	 4, 2,     0, 800,350,		  2,     0, 0,"D1_44 <EV_Show144>;")	//⑪敵 つぼみみっく

	set_chr( 44,802,	 4, 2,     0, 800,350,		  6,     0, 0,"SF2174;")	//⑤壷
	chr_equip_chr( 44,28, "charbase0", 100,	0,0,0,		0, 0,0);
	F_set_chr( 44, CF_NO_CSP)
	F_set_chr( 28, CF_NO_MINIMAP)

	set_chr(144,811,	 4, 2,     0, 800,350,		  0,     0, 8,"M2!28 <EV_ActiveteMimic28>;")
	chr_equip_chr(144,28, "charbase0", 100,	0,0,0,		0,0,0);
	color(144,-1);
}

//--------------------------------------------------------------------
EV_SpawnMimic28B
{
	set_chr( 28,137,	 4, 2,     0,1000,350,		  2,     0, 0,"D1_44 <EV_Show144>;")	//⑪敵 つぼみみっく

	set_chr( 44,802,	 4, 2,     0,1000,350,		  6,     0, 0,"SF2174;")	//⑤壷
	chr_equip_chr( 44,28, "charbase0", 100,	0,0,0,		0, 0,0);
	F_set_chr( 44, CF_NO_CSP)
	F_set_chr( 28, CF_NO_MINIMAP)

	set_chr(144,811,	 4, 2,     0,1000,350,		  0,     0, 8,"M2!28 <EV_ActiveteMimic28>;")
	chr_equip_chr(144,28, "charbase0", 100,	0,0,0,		0,0,0);
	color(144,-1);
}

//--------------------------------------------------------------------
EV_ActiveteMimic24
{
	F_reset_chr( 24, CF_NO_MINIMAP)
}

//--------------------------------------------------------------------
EV_Show143
{
	color(143,15);
	jump(143,3, 25,-1,-1, 0, 75)
}

//--------------------------------------------------------------------
EV_ActiveteMimic28
{
	F_reset_chr( 28, CF_NO_MINIMAP)
}

//--------------------------------------------------------------------
EV_Show144
{
	color(144,15);
	jump(144,3, 25,-1,-1, 15, 75)
}


#EndScriptTable
//====================================================================

