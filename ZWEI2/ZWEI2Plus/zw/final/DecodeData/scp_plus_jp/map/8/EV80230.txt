//====================================================================
//ステージトラップスクリプト
//[18023][要塞－ボス③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev80210.txt参照

//■ローカルフラグ
// 100 敵グループが出現
// 101 ①レバースイッチ

#TREASURE_CH	48
#Fx_TREASURE	2308	//☆008バハムーチョ

//--------------------------------------------------------------------
INIT
{
//環境SE
	SE(69,0)

//■地形


//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	//map_color(100,60,70,0)
//■階段・扉
	set_chr( 90,990,	 6, 6,     0,   0,145,		180,  0202, 6,"#8_99 <EV_WarpOut> WT?30 K0_1;")		//①エントリ ボス②
	set_obj("ob80050a",  6, 6,     0,   0,  0,		180)						//①階段（ラス）
	set_chr(190,1300,	 6, 6,     0,   0,  0,		180,     0, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 5, 5,     0,-300,400,		  0,     0, 0,";")							//②エントリ 来る専用
	set_chr( 96,990,	 5, 5,     0, -50,-25,		  0,010603, 3,"#8_99 M0_89 WT?10 #6_97;")	//②エントリ 起動専用
	set_chr( 97,990,	 5, 5,     0,   0,350,		  0,010605, 3,"K0_18029")					//②エントリ 行く専用
	set_chr( 89,549,	 5, 5,     0,   0,  0,		  1,     0, 8,"M3?99 L4!9900 #6_96;")		//②アーチ（ラスト）
	set_obj("ob80010a",  5, 5,     0,   0,  0,		  0)										//②アーチ枠（ラスト）
	set_chr( 98,622,	 5, 5,     0, 175,  0,  	  0,     0, 0,";")		//②ゴール用天使

	// チェックポイント
	set_chr( 93,990,	 5, 4,     0,-900,  0,	180,070501, 6,"k3_0")
	set_chr( 94,990,	 5, 4,  -900,   0,  0,	 90,070105, 6,"k4_0")
	set_chr( 95,990,	 5, 4,   900,   0,  0,	270,070105, 6,"k5_0")

	set_chr( 99,990,	 6, 5,     0,-900,  0,	180,070501, 6,"k9_0")
	set_chr(101,990,	 6, 5,     0, 900,  0,	  0,070501, 6,"kb_0")

	set_chr(102,990,	 7, 6,     0,-900,  0,	180,070501, 6,"kc_0")
	set_chr(103,990,	 7, 6,     0, 900,  0,	  0,070501, 6,"kd_0")
	set_chr(104,990,	 8, 5,   150,-900,  0,	180,071101, 6,"ke_0")

	set_chr(105,990,	 6, 7,   900,   0,  0,	270,070105, 6,"kf_0")
	set_chr(106,990,	 5, 8,     0,-900,  0,	180,070501, 6,"kg_0")

	set_chr(107,990,	 5, 2, -1350,   0,  0,	 90,070111, 6,"kh_0")
	set_chr(108,990,	 5, 2,  1350,   0,  0,	270,070111, 6,"ki_0")

	set_chr( 50,510,	 7, 5,  -900,   0,  0,		  8,   270, 6,";")	//③扉（ラスダン）一通
	set_chr( 51,510,	 7, 5,     0, 900,  0,		  8,     0, 6,";")	//④扉（ラスダン）一通
	set_chr( 52,510,	 5, 6,   900,   0,  0,		  8,    90, 6,";")	//⑤扉（ラスダン）一通
	set_chr( 53,510,	 4, 5,     0,-900,  0,		  6,   180, 0,";")	//⑥扉（ラスダン）開放
	set_chr( 54,510,	 4, 6,     0, 900,  0,		  8,     0, 6,";")	//⑦扉（ラスダン）一通

//■スイッチ・看板
	set_chr( 55,571,	 3, 5,     0,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF101")	//①レバースイッチ
	set_chr(156,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"(F101 WT?10 C0_65 WT?20 M8_65 WT?60 C0_0 WT?385 M4_55 M7_65 RF101);")	//①レバースイッチ
	set_chr(157,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F101 O1_18;")

	set_chr( 56,658,	 4, 2,  -350, 350,  0,		  0,     0, 0,";")	//③中ボス看板
	set_chr( 58,655,	 4, 7,  -550,-525,  0,		  4,     0,	0,";")	//③順路案内

//■ハニワ・壷

	if (!F2170)
	{
		set_chr( 40,802,	 5, 4,     0, 600,  0,		  2,     0, 0,"I_$$$1 SF2170 V4_140;")	//①壷
		set_chr(140,811,	 5, 4,     0, 600,  0,		 -1,     0, 0,";")
	}
	else
	{
		set_chr(140,811,	 5, 4,     0, 600,  0,		  0,     0, 0,";")
	}


	if (!F2171)
	{
		set_chr( 41,802,	 3, 3,  -250,-250,  0,		  2,   110, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 3, 3,  -250,-250,  0,		 -1,   110, 0,";")
	}
	else
	{
		set_chr(141,811,	 3, 3,  -250,-250,  0,		  0,   110, 0,";")
	}


	if (!F2172)
	{
		set_chr( 42,802,	 7, 7,  -250,-250,  0,		  2,   150, 0,"I_$$$1 SF2172 V4_142;")	//③壷
		set_chr(142,811,	 7, 7,  -250,-250,  0,		 -1,   150, 0,";")
	}
	else
	{
		set_chr(142,811,	 7, 7,  -250,-250,  0,		  0,   150, 0,";")
	}


	if (!F2173)
	{
		set_chr( 43,802,	 4, 8,     0,   0,  0,		  2,    90, 0,"I_$$$1 SF2173 V4_143;")	//④壷
		set_chr(143,811,	 4, 8,     0,   0,  0,		 -1,    90, 0,";")
	}
	else
	{
		set_chr(143,811,	 4, 8,     0,   0,  0,		  0,    90, 0,";")
	}


	if (!F2174)
	{
		set_chr( 44,634,	 5, 3,  -100,   0,  0,		  2,     0, 0,"I_US01 SF2174 V4_144;")	//⑤ハニワ
		set_chr(144,812,	 5, 3,  -100,   0,  0,		 -1,   300, 0,";")
	}
	else
	{
		set_chr(144,812,	 5, 3,  -100,   0,  0,		  0,   300, 0,";")
	}


	if (!F2175)
	{
		set_chr( 45,634,	 5, 3,   100,   0,  0,		  2,     0, 0,"I_US01 SF2175 V4_145;")	//⑥ハニワ
		set_chr(145,812,	 5, 3,   100,   0,  0,		 -1,    60, 0,";")
	}
	else
	{
		set_chr(145,812,	 5, 3,   100,   0,  0,		  0,    60, 0,";")
	}


//■宝箱
	set_chr( 49,626,	 5, 6,     0,   0,  0,		  0,  0,10,"!F2997 I_SLOT SF2997 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2997 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	if( !Fx_TREASURE )
		set_chr( TREASURE_CH,561,	 7, 5,     0,   0,  0,		  6,     0,20,"<TK_TREASURE>;")
	else
		set_chr( TREASURE_CH,561,	 7, 5,     0,   0,  0,		  7,     0, 0,";")

//■罠・障害物
	set_chr( 65,719,	 5, 2,    50,  90,350,		  6,     0, 3,";")	//①ラスダン吸玉
	set_obj("obx0470",	 5, 2,    50,  90,  0,	 0)	//ラスダン穴小
	F_set_chr(65,CF_NO_CLIP2)

	set_obj("obx0460",	 5, 4,     0,   0,  0,	 0)	//穴大
	set_chr( 66,724,	 5, 4,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 6, 5,     0,   0,  0,	 0)	//穴大
	set_chr( 67,724,	 6, 5,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 8, 5,     0,   0,  0,	 0)	//穴大
	set_chr( 68,724,	 8, 5,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 8, 6,     0,   0,  0,	 0)	//穴大
	set_chr( 69,724,	 8, 6,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 7, 6,     0,   0,  0,	 0)	//穴大
	set_chr( 70,724,	 7, 6,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 6, 7,     0,   0,  0,	 0)	//穴大
	set_chr( 71,724,	 6, 7,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_obj("obx0460",	 6, 8,     0,   0,  0,	 0)	//穴大
	set_chr( 72,724,	 6, 8,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D1_78 D0_99;")

	set_obj("obx0460",	 5, 8,     0,   0,  0,	 0)	//穴大
	set_chr( 73,724,	 5, 8,     0,   0,  0,	 	  2,     0, 6,"#8_99 M3_99 M5?99 D0_99;")

	set_chr(110,663,	 2, 5,     0,   0,  0,  	  2,     0, 0,";")	//電撃床(大）

	set_chr(111,715,	 3, 7,  -450, -90,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(112,715,	 3, 6,  -450,   0,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(113,715,	 3, 4,     0,   0,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(114,715,	 7, 3,  -450,-450,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(115,715,	 7, 3,   450, 450,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(116,715,	 8, 4,   450, 450,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(117,715,	 8, 5,   400, 900,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(118,715,	 7, 7,   450, 900,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(119,715,	 5, 8,   900,-180,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(120,715,	 5, 8,   900, 540,  0,  	  2,     0, 0,";")	//電撃床(小）

	set_chr(121,715,	 5, 7,  -450,-450,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(122,715,	 5, 7,   450,-450,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(123,715,	 5, 7,  -450, 450,  0,  	  2,     0, 0,";")	//電撃床(小）
	set_chr(124,715,	 5, 7,   450, 450,  0,  	  2,     0, 0,";")	//電撃床(小）

	if (!F2195)
	{
		set_chr( 75,718,	 2, 5,  -250,-900,  0,		  2,     0, 8,"M0?99 I_$$$2 SF2195;")	//②ラスダン砲台
	}
	if (!F2196)
	{
		set_chr( 76,718,	 2, 5,  -250, 900,  0,		  2,     0, 8,"M0?99 I_$$$2 SF2196;")	//③ラスダン砲台
	}
	set_chr( 77,729,	 2, 5,   200,   0, 65,		  0,     0, 8,"WT?10 Y3_-250 WT?10 X3_-250 WT?10 (Y3_250 WT?10 X3_500 WT?10 Y3_-250 WT?10 X3_-500 WT?10	);")	//④移動床大（ラ）
	if (!F2197)
	{
		set_chr( 78,718,	 6, 8,   250, 250,  0,		  2,     0, 8,"M0?99 I_$$$2 SF2197;")	//⑤ラスダン砲台
	}

//■敵
//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
	set_chr(150,990,	 4, 5,     0, 200,  0,  	  0, 071101, 6,"SF100 M5_53;")

	if(WK_ENTRY==91)//階段91 から来た時（帰り）
	{
		set_chr(151,990,	 0, 0,     0,   0,  0,  	  0,      0, 8,"F3 F4 F5 F6 F7 F8 F9 WT?10 O1_18 WT?20 C0_54 WT?30 M3_54 M4_53 WT?30 C0_0;")
	}
	else
	{
		set_chr(151,990,	 0, 0,     0,   0,  0,  	  0,      0, 8,"F3 F4 F5 F6 F7 F8 F9 WT?10 O1_18 WT?20 C0_53 WT?30 M4_53 M4_54 WT?30 C0_0;")
	}

	set_chr(  3,234,	 4, 5,  -300, 700,  0,		 -1,   180, 8,"F100 WT?20  V2_99;")	//①敵a あんのうん－γ
	set_chr(  4,234,	 4, 5,   300, 700,  0,		 -1,   180, 8,"F100 WT?20  V2_99;")	//①敵b あんのうん－γ
	set_chr(  5,233,	 4, 6,     0,-600,  0,		 -1,   180, 8,"F100 WT?180 V2_99;")	//②敵 あんのうん－β
	set_chr(  6,232,	 4, 6,  -300, 450,  0,		 -1,    90, 8,"F100 WT?90  V2_99;")	//③敵a あんのうん－α
	set_chr(  7,232,	 4, 6,   300, 450,  0,		 -1,   270, 8,"F100 WT?90  V2_99;")	//③敵b あんのうん－α
	set_chr(  8,235,	 4, 5,  -300,-450,400,		 -1,     0, 8,"F100 WT?135 V2_99;")	//④敵a あんのうん－Σ
	set_chr(  9,235,	 4, 5,   300,-450,400,		 -1,     0, 8,"F100 WT?135 V2_99;")	//④敵b あんのうん－Σ

	set_chr( 11,235,	 3, 6,     0, 150,  0,		  2,     0, 0,";")	//⑤敵 あんのうん－Σ
	set_chr( 13,232,	 3, 3,   900,   0,  0,		  2,     0, 0,";")	//⑥敵 あんのうん－α
	set_chr( 15,233,	 7, 3,    50, -50,  0,		  2,     0, 0,";")	//⑦敵 あんのうん－β
	set_chr( 16,234,	 8, 4,  -300, 900,  0,		  2,     0, 0,";")	//⑧敵a あんのうん－γ
	set_chr( 17,234,	 8, 4,   300, 900,  0,		  2,     0, 0,";")	//⑧敵b あんのうん－γ

	set_chr( 21,232,	 8, 6,     0,-900,  0,		  2,     0, 0,";")	//⑨敵 あんのうん－α
	set_chr( 22,235,	 6, 7,     0,   0,  0,		  2,     0, 0,";")	//⑩敵 あんのうん－Σ

//■イベント

//■場面固有設定
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_WarpOut
{
	jump(PLAYER2,1,	10,	PLAYER1, 0, 0,	 150)
	jump(PET,1,	10,	PLAYER1, 0, 0,	 150)
	wait( 5)
	SE(291, PLAYER1) //ワープ魔法陣
	EFF_chr(24580, PLAYER1, 0, 100, 0, "Bone_Hips")
	EFF_chr(24580, PLAYER2, 0, 100, 0, "Bone_Hips")

	color(PLAYER1, -10)	//表示
	color(PLAYER2, -10)	//表示
	color(PET, -10)	//表示
	wait(10)

}

#EndScriptTable
//====================================================================

