//====================================================================
//ステージトラップスクリプト
//[10110][アルッテ・雑貨屋]
//====================================================================

#ScriptTable

#ANNETTE	10
#FEDERICA	11
#LA-RAIRA	12

#MIA		13
//=====================================================================
//=== 初期化処理 ======================================================
//=====================================================================
INIT
{
//  set_chr  no typ     tip    		 x    y   z   	 mot  向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■エントリー
	set_chr( 90,990,	-1,-1,      50,  0,   0, 	 90,070103, 6,"K3_10100;")	//エントリ アルッテの街・雑貨屋

	//ＮＰＣ

	//──────────────────────────────
	//▼⑬エンディング直前
	//──────────────────────────────
	if( F6_05_EndSixth )
	{
		set_chr( ANNETTE,43,	-1,-1,   -1291,248,0,	75,100,	20,"<TK_ANNETTE>")	//アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼⑫飛行機でメルセデクに乗り込むことにした（ラグナ・アルウェン・ルゥ）
	//──────────────────────────────
	if( F6_00_GoToMeru )
	{
		set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  	75,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼⑪クリスタルバレーを起動することにした（ラグナ・ルゥ（・オデッサ））
	//──────────────────────────────
	if( F5_00_HearLunar )
	{
		set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  	75,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼⑩社へ向かったミアを追うことにした（ラグナ・アルウェン）
	//──────────────────────────────
	if( F4_09_GoShrineMia)
	{
		set_chr( ANNETTE,43,	-1,-1,   -1300,-243,0, 	51,100,	20,"<SHOP_ANNETTE>")	//フロアで商品直し　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼⑨汎用忍者が倒れているだけのフラグ。
	//──────────────────────────────
	//※無し
	//──────────────────────────────
	//▼⑧星降りの里に到着した（ラグナ・スバル）
	//──────────────────────────────
	//※無し
	//──────────────────────────────
	//▼⑦ラグナは単独行動を始めた
	//──────────────────────────────
	if( F4_00_StartSolo )
	{
		if(F4_02_GoVillage2)
		{
			if(!F4_09_GoShrineMia)
			{
				set_chr( LA-RAIRA,23,	-1,-1,   -1322,-44,0, 		10,100,	20,"<TK_LA-RAIRA>")	//ラーライラ
				F_set_chr(LA-RAIRA,CF_NO_MOVE)
			}
			
			set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  		75,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
			//EV("MOTION_ANETTE")
			//EV("LOOKING_ANETTE")
			F_set_chr(ANNETTE,CF_NO_MOVE)

//			EV("EV_InShop")
		}
	}
	else
	//──────────────────────────────
	//▼⑤魔女ラーライラから、敵の正体が明かされた
	//──────────────────────────────
	if( F2_14_TalkEnemy )
	{
		set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  		75,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼④炎のパーツを入手した
	//──────────────────────────────
	//※無し
	//──────────────────────────────
	//▼③金闇の森へ向かうことにした
	//──────────────────────────────
	if( F2_00_GoForest )
	{
		set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  		50,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
		set_chr( FEDERICA,70,	-1,-1,	-645,-140,1,		2,223,	20,"<TK_FEDERICA>")	//カウンター　フェデリカ
//		EV("MOTION_ANETTE_03")
		F_set_chr(ANNETTE,CF_NO_MOVE)
		F_set_chr(FEDERICA,CF_NO_MOVE)

//		EV("EV_InShop_NoVoice")//話し中
	}
	else
	//──────────────────────────────
	//▼②ロアルタ村へ向かうことにした
	//──────────────────────────────
	if( F1_15_GoVillage )
	{
		set_chr( ANNETTE,43,	-1,-1,   -1300,-243,0, 		75,100,	20,"<SHOP_ANNETTE>")	//フロアで商品直し　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
	else
	//──────────────────────────────
	//▼①城を取り戻すために行動を開始した
	//──────────────────────────────
	if( F1_01_GameStart )
	{
		set_chr( ANNETTE,43,	-1,-1,   -576,-447,1  		75,0,	20,"<SHOP_ANNETTE>")	//カウンター　アネット
		//EV("MOTION_ANETTE")
		//EV("LOOKING_ANETTE")
		F_set_chr(ANNETTE,CF_NO_MOVE)

//		EV("EV_InShop")
	}
//	EV("EV_InShop")//本当はここに書く。
}

//====================================================================
//=== モーション処理 =================================================
//====================================================================

//=======================================
//汎用モーション
//=======================================
MOTION_ANETTE
{

	workL(90,RAND,12)//モーション数の３倍程度を記入

	if(WK090==0)
	{
		MOT(ANNETTE,2,15)
		wait(20)
	}
	else
	if(WK090==1)
	{
		MOT(ANNETTE,50,15)
		wait(20)
	}
	else
/*	if(WK090==2)//アネットはこの動きを行わない。
	{
		MOT(ANNETTE,51,15)
		wait(20)
	}
	else
*/	if(WK090==3)
	{
		MOT(ANNETTE,52,15)
		wait(20)
	}
	else
	if(WK090==4)//testモーション
	{
		MOT(ANNETTE,75,15)
		wait(400)
	}
	wait(100)
	loop

}

//=======================================
//▼③モーション
//=======================================
MOTION_ANETTE_03
{

	MOT_SET(ANNETTE,150, -2,409,409,-1,15)

	workL(90,RAND,10)//モーション数の３倍程度を記入

/*	if(WK090==0)
	{
		MOT(ANNETTE,2,15)
		wait(20)
	}
	else
*/	if(WK090==1)
	{
		MOT(ANNETTE,50,15)
		wait(20)
	}
	else
/*	if(WK090==2)//アネットはこの動きを行わない。
	{
		MOT(ANNETTE,51,15)
		wait(20)
	}
	else
*/	if(WK090==3)
	{
		MOT(ANNETTE,52,15)
		wait(20)
	}
	else
/*	if(WK090==4)//testモーション
	{
		MOT(ANNETTE,75,15)
		wait(400)
	}
	else
*/	if(WK090==5)//testモーション
	{
		MOT(ANNETTE,150,15)
		wait(80)

		workL(90,RAND,2)
		if(WK090==0)
			MOT(ANNETTE,50,15)
		else
			MOT(ANNETTE,52,15)
		wait(20)
	}
	wait(100)
	loop

}

//=======================================
//注視
//=======================================
LOOKING_ANETTE
{
	rot_chr(ANNETTE,30,PLAYER1)
	wait(10)
	loop
}

/*

TEST_Equip
{

	chr_equip_off(PLAYER1)

	chr_equip2( PLAYER1,	"obx0709",	"Bone_Head",	100,		0, 0, 0,	0,0,0)
	chr_equip2( PLAYER1,	"EQ_013",	"Bone_RightSword",	100,		0, 0, 0,	0,0,0)

}

TEST_BMP
{
	TK_begin()

//	Load_BMP(13,"sys\\Title01.itm","")
//	Load_BMP(13,"sys\\test01.itm","sys\\test01a.itm")
//	Load_BMP(13,"sys\\Title.itm","")


	//bmpNo(13)に画像/アルファ画像を登録
	Load_BMP(13,"sys\\test01.itm","sys\\test01.itm")
	Load_BMP(14,"sys\\Title.itm","sys\\Title.itm")

	//bmpNo(13)の表示画像範囲を登録
	menuBMP(0,	13,	0,0,640,480)

	//表示・移動など
	menu(0,	0,	320,240,0,	0,0,	0,0,0)
	menu(0,	0,	0,0,0,	320,240,	60,100,0)

	//メニュー表示待ち
	wait_menu(0)

	menuBMP(1,	14,	0,0,640,480)

	menu(1,	0,	320,240,0,	0,0,	0,0,0)
	menu(1,	0,	320,240,0,	320,240,	60,100,0)

	//メニュー表示待ち
	wait_menu(1)

	wait_key(0)

	menu(0,	0,	320,240,0,	0,0,	60,0,360)
	menu(1,	0,	320,240,0,	0,0,	60,0,360)
	wait_menu(0)
	wait_menu(1)

	TK_end()
}
*/


EV_SP002
{

	if(SP002 > 0)
		EMO(PLAYER1,EMO_BIKKURI)
	else
	if(SP002 <= 0)
		EMO(PLAYER1,EMO_HATENA)

	MES(0,"――",0)
	MES_close(0)

}


//====================================================================
//=== ショップボイス処理 =============================================
//====================================================================

EV_InShop
{
	wait(5)//これ入れないと鳴らないことがある。
	SE(26,90)
	wait(30)
	VOICE( 709,ANNETTE ) 
	F_set(FS_SP_ShopCH1)

}

EV_InShop_NoVoice
{
	wait(5)//これ入れないと鳴らないことがある。
	SE(26,90)
	F_set(FS_SP_ShopCH1)

}


TT
{

MES(0,"『奥義・ギガントL711ハンマー』L422を習得した！",0)
MES_close(0)
}

//====================================================================
//=== NPC処理 ===================================================
//====================================================================

//====================================================================
//=== イベント処理 ===================================================
//====================================================================

#EndScriptTable
//====================================================================

