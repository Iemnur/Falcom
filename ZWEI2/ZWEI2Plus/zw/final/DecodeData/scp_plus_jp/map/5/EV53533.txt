//====================================================================
//ステージトラップスクリプト
//[15053][城－礼拝堂③]
//====================================================================

#ScriptTable

//--------------------------------------------------------------------
//■グローバルフラグ・ルートフラグはev53513.txt参照

//■ローカルフラグ
// 102 ②敵が出現。
// 106 ④敵が出現
// 107 ③敵が出現
// 108 ⑤敵⑥敵が出現
// 112 ⑦敵が出現

#TREASURE_CH	48
#Fx_TREASURE	2343	//☆043ロボ１号の足

#TREASURE2_CH	48
#Fx_TREASURE2	2347	//☆047ロボ１６号の足

#WOODBOX_CH		47
#IT_WOODBOX		166		//∴166ハンバーグ

//--------------------------------------------------------------------
INIT
{
//■地形
	set_obj2("mp53003",   3, 6,  450,-450,  0,	 0) //←
	set_obj2("mp53023",   3, 6,  450, 450,  0,	 0) //
	set_obj("mp53163",   3, 6, -900,-450,  0,	 0) //

	set_obj2("mp53003",   4, 7,  450,-450,  0,	 0) //←
	set_obj2("mp53023",   4, 7,  450, 450,  0,	 0) //
	set_obj("mp53163",   4, 7, -900,-450,  0,	 0) //

	set_obj2("mp53013",   7, 6, -450,-450,  0,	 0) //→
	set_obj2("mp53033",   7, 6, -450, 450,  0,	 0) //
	set_obj("mp53163",   7, 6,  450,-450,  0,	 0) //

	set_obj2("mp53013",   6, 7, -450,-450,  0,	 0) //→
	set_obj2("mp53033",   6, 7, -450, 450,  0,	 0) //
	set_obj("mp53163",   6, 7,  450,-450,  0,	 0) //

	set_obj2("mp53023",   5, 8, -450,-450,  0,	 0) //↓
	set_obj2("mp53033",   5, 8,  450,-450,  0,	 0) //
	set_obj("mp53163",   5, 8, -450, 450,  0,	 0) //

//  -------  no typ   	  tip      x    y   z       mot     向 状  000+++++++010+++++++020+++++++030+++++++040+++++++050+++++++060+++++++070+++++++080+++++++090+++++++100+++++++110+++++++120+++++++130+++++++140+++++++150+++++++160+++++++170+++++++180+++++++190+++++++200+++++++210+++++++220+++++++230+++++++240+++++++250++
//■階段・扉

	set_chr( 90,990,	 3, 4,     0, 100,  0,		  0,  0201, 6,"K0_1;")		//①エントリ 礼拝②
	set_obj("@ob50553a", 3, 4,     0,   0,  0,		  0)						//①階段下（礼拝）
	set_chr(190,1300,	 3, 4,	   0,   0,  0,		  0,     0, 0,";")			//階段下（ダミー）

	set_chr( 91,990,	 5, 3,     0,   0,  0,		  0,  0201, 6,"K0_15059;")	//②エントリ 礼拝終
	set_obj("@ob50543a", 5, 3,     0,   0,  0,		  0)						//②階段上（礼拝）
	set_chr(109,622,	 5, 3,     0,   0,  0,		  0,     0, 0,";")			//②ゴール用天使
	set_chr(191,1400,	 5, 3,	   0,   0,  0,		  0,     0, 0,";")			//アーチ（ダミー）

	set_chr( 50,504,	 5, 6,     0, 900,  0,		  7,   180, 0,";") 	//③扉（礼拝）閉鎖
	set_chr( 51,504,	 5, 6,  -900,   0,  0,		  7,   270, 0,";") 	//④扉（礼拝）閉鎖
	set_chr( 52,504,	 5, 6,   900,   0,  0,		  7,    90, 0,";") 	//⑤扉（礼拝）閉鎖
	set_chr( 53,504,	 5, 6,     0,-900,  0,		  8,   180, 6,";") 	//⑥扉（礼拝）一通
	set_chr( 54,504,	 5, 5,     0,-900,  0,		  8,   180, 6,";")	//⑦扉（礼拝）一通

//■スイッチ・看板

	if ( !F2106 )
	{
	// 初回
		set_chr( 58,570,	 6, 5,  -300,-300,  0,		  6,     0, 5,"M6?99 M5_99 SF2106")	//①ボタンスイッチ
		set_chr(121,990,	 5, 6,     0,-600,  0,		  0,     0, 8,"F2106 O1_18 WT?10 C0_99 WT?20 M4_53 WT?30 C0_0;"); //
	}
	else
	{
	// 押され
		set_chr( 58,570,	 6, 5,  -300,-300,  0,		  7,     0, 3,";")	//①ボタンスイッチ
		MOT( 53, 6, 0)
	}


	if ( !F2107 )
	{
	// 初回
		set_chr( 60,570,	 5, 6,     0, 700,  0,		  6,     0, 5,"M6?99 M5_99 SF2107")	//③ボタンスイッチ
		set_chr(123,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2107 O1_18 WT?10 M4_50;"); //
	}
	else
	{
	// 押され
		set_chr( 60,570,	 5, 6,     0, 700,  0,		  7,     0, 3,";")	//③ボタンスイッチ
		MOT( 50, 6, 0)
	}


	if ( !F2108 )
	{
	// 初回
		set_chr( 61,570,	 5, 6,  -700,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2108")	//④ボタンスイッチ
		set_chr(124,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2108 O1_18 WT?10 M4_51;"); //
	}
	else
	{
	// 押され
		set_chr( 61,570,	 5, 6,  -700,   0,  0,		  7,     0, 3,";")	//④ボタンスイッチ
		MOT( 51, 6, 0)
	}


	if ( !F2109 )
	{
	// 初回
		set_chr( 62,570,	 5, 6,   700,   0,  0,		  6,     0, 5,"M6?99 M5_99 SF2109")	//⑤ボタンスイッチ
		set_chr(125,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F2109 O1_18 WT?10 M4_52;"); //
	}
	else
	{
	// 押され
		set_chr( 62,570,	 5, 6,   700,   0,  0,		  7,     0, 3,";")	//⑤ボタンスイッチ
		MOT( 52, 6, 0)
	}


//■ハニワ・壷
	if ( !F2170 )
	{
		set_chr( 19,269,	 4, 5,   300,-300,  0,		  2,   225, 0,"D1_40 <EV_Show140>;")	//⑨敵 つぼみみんがー

		set_chr( 40,802,	 4, 5,   300,-300,  0,		  6,   225, 0,"SF2170;")	//①壷
		chr_equip_chr( 40,19, "charbase0", 100,	0,0,0,		0, 0,0);
		F_set_chr( 40, CF_NO_CSP)
		F_set_chr( 19, CF_NO_MINIMAP)

		set_chr(140,811,	 4, 5,   300,-300,  0,		  0,   225, 8,"M2!19 <EV_ActiveteMimic19>;")
		chr_equip_chr(140,19, "charbase0", 100,	0,0,0,		0,0,0);
		color(140,-1);
	}
	else
	{
		set_chr(140,811,	 4, 5,   300,-300,  0,		  0,   225, 0,";")
	}


	if ( !F2171 )
	{
		set_chr( 41,802,	 4, 6,  -800,   0,  0,		  2,   255, 0,"I_$$$1 SF2171 V4_141;")	//②壷
		set_chr(141,811,	 4, 6,  -800,   0,  0,		 -1,   255, 0,";")
	}
	else
	{
		set_chr(141,811,	 4, 6,  -800,   0,  0,		  0,   255, 0,";")
	}


	if ( !F2172 )
	{
		set_chr( 42,802,	 6, 6,   800,   0,  0,		  2,   165, 0,"I_$$$1 SF2172 V4_142;")	//③壷
		set_chr(142,811,	 6, 6,   800,   0,  0,		 -1,   165, 0,";")
	}
	else
	{
		set_chr(142,811,	 6, 6,   800,   0,  0,		  0,   165, 0,";")
	}


//■宝箱
	set_chr( 49,626,	 5, 4,     0,-150,  0,		  0,     0,10,"!F2962 I_SLOT SF2962 <EV_SlotDarken>;")	//①スロットマシン
	if ( F2962 )
	{
		MOT( 49, 3, 1);
		EV("EV_SlotDarken")
	}

	// ①宝箱
	if ( GW_LV_PLATE==0 )
	{
		if( !Fx_TREASURE )
			set_chr( TREASURE_CH,561,	 4, 4,     0,   0,  0,  	 6,  90,20,"<TK_TREASURE>;")
		else
			set_chr( TREASURE_CH,561,	 4, 4,     0,   0,  0,  	 7,  90, 0,";")
	}
	else
	{
		if( !Fx_TREASURE2 )
			set_chr( TREASURE2_CH,561,	 4, 4,     0,   0,  0,  	 6,  90,20,"<TK_TREASURE2>;")
		else
			set_chr( TREASURE2_CH,561,	 4, 4,     0,   0,  0,  	 7,  90, 0,";")
	}

	if ( !Fx_543Food1 )
		set_chr( WOODBOX_CH,562,	7, 4,     0,   0,  0,		  6,     0,20,"<TK_WOODBOX><EV_SetGetFood1>;")	//③木箱
	else
		set_chr( WOODBOX_CH,562,	7, 4,     0,   0,  0,		  7,     0, 0,";")	//③木箱


//■罠・障害物
	if ( !F2140 )
		set_chr( 65,630,	 5, 6,     0,  50,  0,		  0,   100, 0,"I_$$$1 SF2140;")//①樽
	else
		set_chr( 65,630,	 5, 6,     0,  50,  0,		  0,   100, 0,"I_$$$1;")//①樽


	if ( !F2141 )
		set_chr( 66,630,	 5, 7,     0,  50,  0,		  0,   100, 0,"I_FFF1 SF2141;")//②樽
	else
		set_chr( 66,630,	 5, 7,     0,  50,  0,		  0,   100, 0,"I_$$$1;")//②樽


	if ( !F2142 )
	{
		set_chr( 67,635,	 4, 6,  -375,-450,  0,		  2,    15, 0,"I_$$$1 SF2142;"); //③顔の置物a
	}

	if ( !F2143 )
	{
		set_chr( 68,635,	 4, 6,    50,-450,  0,		  2,   345, 0,"I_$$$1 SF2143;"); //③顔の置物b
	}

	if ( !F2144 )
	{
		set_chr( 69,635,	 6, 5,   100, 150,  0,		  2,   315, 0,"I_$$$1 SF2144 !F2145 <EV_FaceStatueFall>;"); //④顔の置物
	}

	if ( !F2145 )
	{
		if ( !F2144 )
			set_chr( 70,635,	 6, 5,    75, 175,200,		  2,   345, 0,"I_$$$1 SF2145;"); //④顔の置物
		else
			set_chr( 70,635,	 6, 5,    75, 175,  0,		  2,   345, 0,"I_$$$1 SF2145;"); //④顔の置物
	}

//■敵
	set_chr(  1,228,	 5, 6,  -150,-450,  0,		 -1,     0, 8,"F2106 V4_99;")	//①敵 こぼるたん
	set_chr(  2,228,	 5, 6,   150,-450,  0,		 -1,     0, 8,"F2106 V4_99;")	//①敵 こぼるたん

	set_chr( 20,278,	 4, 5,  -150,   0,500,		 -1,     0, 8,"F102 V1_99;")		//②敵 じゃがーのーと
	set_chr( 21,277,	 4, 6,   550,   0,  0,		 -1,    90, 8,"F107 WT?05 V2_99;")	//③敵 らびっとくらうん

	set_chr( 22,136,	 5, 7,     0, 750,  0,		 -1,   180, 8,"F106 WT?05 V4_99;")	//④敵 くろおこじょ
	set_chr( 23,136,	 5, 7,  -750,   0,  0,		 -1,   270, 8,"F106 WT?10 V4_99;")	//④敵 くろおこじょ
	set_chr( 24,136,	 5, 7,   750,   0,  0,		 -1,    90, 8,"F106 WT?15 V4_99;")	//④敵 くろおこじょ

	set_chr( 25,278,	 6, 6,     0, -75,500,		 -1,   180, 8,"F108 WT?05 V1_99;")	//⑤敵 じゃがーのーと
	set_chr( 26,277,	 6, 6,   150,-700,  0,		 -1,     0, 8,"F108 WT?20 V2_99;")	//⑥敵a らびっとくらうん
	set_chr( 27,277,	 6, 6,   300,-700,  0,		 -1,     0, 8,"F108 WT?25 V2_99;")	//⑥敵b らびっとくらうん

	set_chr( 28,136,	 5, 4,   250, 400,  0,		 -1,   120, 8,"F112 WT?15 V4_99;")	//⑦敵a くろおこじょ
	set_chr( 29,136,	 5, 3,     0, 600,  0,		 -1,     0, 8,"F112 WT?45 V4_99;")	//⑦敵b くろおこじょ


//■イベント
	set_chr( 80,990,	 4, 5,  -150, 750,  0,		  0,  0801, 6,"SF102;"); //
	set_chr( 81,990,	 5, 7,     0,   0,  0,		  0,  0808, 6,"SF106;"); //
	set_chr( 82,990,	 4, 6,     0,   0,  0,		  0,  1105, 6,"SF107;"); //
	set_chr( 83,990,	 6, 6,     0,   0,  0,		  0,  1105, 6,"SF108;"); //
	set_chr( 84,990,	 5, 4,     0, 350,  0,		  0,  1101, 6,"SF112;"); //
	

	// こぼるたん
	set_chr(122,990,	 0, 0,     0,   0,  0,		  0,     0, 8,"F1 F2 WT?10 O1_18 WT?20 C0_54 WT?20 M4_54 WT?30 C0_0;"); //


//■場面固有設定
}

//--------------------------------------------------------------------
EV_FaceStatueFall
{
	// 宝箱落下
	jump(70,3, 24,-1,-1,0,150)
	wait_move(70)
}

//--------------------------------------------------------------------
EV_SlotDarken
{
	wait(15)
	color2( 49, 70,70,70,,0,0,0)		// スロット暗く
}

//--------------------------------------------------------------------
EV_SetGetFood1
{
	F_set(Fx_543Food1)
}

//--------------------------------------------------------------------
EV_ActiveteMimic19
{
	F_reset_chr( 19, CF_NO_MINIMAP)
}

//--------------------------------------------------------------------
EV_Show140
{
	color(140,15);
	jump(140,3, 25,-1,-1, 15, 75)
}

#EndScriptTable
//====================================================================

