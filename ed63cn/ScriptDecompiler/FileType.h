#ifndef _FILETYPE_H_
#define _FILETYPE_H_

#include "my_common.h"

#pragma pack(1)

typedef struct
{
    UCHAR szDescription[0xA];
    UCHAR szModuleName[0xE];
    UCHAR unknown[8];
    DWORD dwSelfIndex;
    DWORD dwReferenceIndex[7];
    WORD  wReserve;
    DWORD dwUnknown[6];
    WORD  wEndOffset;
    WORD  wEntryOffset;
    WORD  wUnknown;
    WORD  wPartOffset;
    WORD  wPartOffsetSize;
} TSNHeader;

#pragma pack()

#define MENU_TITLE       0x5A
#define MENU_TITLE_START 0x54   // offset: MENU_TITLE + 8
#define TALK_END         0x58
#define TALK_START       0x5B         // + 2 = char name
#define MENU_START       0x5D
#define MENU_END         0x5E
#define MENU_TITLE_STR   0x60

/*
// 4F

DWORD dwActorParamLenTable[] = 
{
 0     1     2     3     4     5     6     7     8     9     A     B     C     D     E     F    
0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x01, 0x00, 0x00, // 0
0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 1
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 2
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 3
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, // 4
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x07, 0x02, 0x02, // 5
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 6
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 7
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 8
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 9
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // A
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // B
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // C
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // D
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // E
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // F
};

DWORD dwActor_04_Len[] = 
{
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 
};


NoInline DWORD STDCALL ActorParser_004(PBYTE pbBuffer)
{
    BYTE  byte, *pBuf;
    DWORD dwMenuCount;
    
    pBuf = pbBuffer;
    while (1)
    {
        switch (byte = *pbBuffer++)
        {
        case 0x00:
            pbBuffer += 4;
            break;
            
        case 0x1E:
        case 0x1F:
            pbBuffer += 2;
            break;
            
        case 0x20:
        case 0x23:
            ++pbBuffer;
            break;
            
        case 0x21:
            pbBuffer += 3;
            break;
            
        case 0x02: case 0x03: case 0x04: case 0x05:
        case 0x06: case 0x07: case 0x08: case 0x09:
        case 0x0A: case 0x0B: case 0x0C: case 0x0D:
        case 0x0E: case 0x0F: case 0x10: case 0x11:
        case 0x12: case 0x14: case 0x16: case 0x15:
        case 0x17: case 0x18: case 0x19: case 0x1A:
        case 0x1B: case 0x1C: case 0x1D: case 0x22:
            break;
            
        default:
            goto OUT_LOOP;
        }
    }
    
OUT_LOOP:
    
    if (byte == 0)
    {
        dwMenuCount = *(LPWORD)pbBuffer;
        pbBuffer += 2 + dwMenuCount * 4 + 2;
    }
    
    return pbBuffer - pBuf;
}

NoInline DWORD STDCALL ActorParser_016(PBYTE pbBuffer)
{
    if (*pbBuffer == 2)
    {
        return 0x11;
    }
    
    return 1;
}

NoInline DWORD STDCALL ActorParser_002(PBYTE pbBuffer)
{
    return ActorParser_004(pbBuffer) + 2;
}
*/

#endif /* _FILETYPE_H_ */